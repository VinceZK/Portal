{"version":3,"sources":["webpack:///src/$_lazy_route_resource lazy namespace object","webpack:///src/app/app-routing.module.ts","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/custom.reuse.strategy.ts","webpack:///src/app/dialog.service.ts","webpack:///src/app/error-page/error-page.component.ts","webpack:///src/app/error-page/error-page.component.html","webpack:///src/app/external-app/external-app-routing.module.ts","webpack:///src/app/external-app/external-app.component.ts","webpack:///src/app/external-app/external-app.component.html","webpack:///src/app/external-app/external-app.module.ts","webpack:///src/app/head-bar/head-bar.component.ts","webpack:///src/app/head-bar/head-bar.component.html","webpack:///src/app/history.service.ts","webpack:///src/app/identity.service.ts","webpack:///src/app/mockup/mockup-routing.module.ts","webpack:///src/app/mockup/mockup.component.ts","webpack:///src/app/mockup/mockup.module.ts","webpack:///src/app/msgStore.ts","webpack:///src/app/not-found/not-found.component.ts","webpack:///src/app/not-found/not-found.component.html","webpack:///src/app/role.ts","webpack:///src/app/share.service.ts","webpack:///src/app/side-menu/side-menu.component.ts","webpack:///src/app/side-menu/side-menu.component.html","webpack:///src/app/user/user-detail/async-validators.ts","webpack:///src/app/user/user-detail/user-address/user-address.component.ts","webpack:///src/app/user/user-detail/user-address/user-address.component.html","webpack:///src/app/user/user-detail/user-basic/user-basic.component.ts","webpack:///src/app/user/user-detail/user-basic/user-basic.component.html","webpack:///src/app/user/user-detail/user-detail.component.ts","webpack:///src/app/user/user-detail/user-detail.component.html","webpack:///src/app/user/user-detail/user-email/user-email.component.ts","webpack:///src/app/user/user-detail/user-email/user-email.component.html","webpack:///src/app/user/user-detail/user-personalization/user-personalization.component.ts","webpack:///src/app/user/user-detail/user-personalization/user-personalization.component.html","webpack:///src/app/user/user-detail/user-role/user-role.component.ts","webpack:///src/app/user/user-detail/user-role/user-role.component.html","webpack:///src/app/user/user-list/user-list.component.ts","webpack:///src/app/user/user-list/user-list.component.html","webpack:///src/app/work-protection.guard.ts","webpack:///src/environments/environment.ts","webpack:///src/main.ts"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","routes","path","component","canDeactivate","loadChildren","m","DashboardModule","HandsontableModule","AppRoutingModule","forRoot","imports","AppComponent","router","activatedRoute","identityService","shareService","historyService","entityService","messageService","logonService","isCollapsed","setOriginalHost","originalHost","setHost","session","subscribe","data","setSession","setMessageStore","Session","LANGUAGE","events","pipe","event","route","outlet","url","firstChild","snapshot","length","join","apps","find","app","routeLink","sideMenu","activateApp","addHistory","collapse","onCollapse","selector","templateUrl","styleUrls","AppModule","provide","useClass","declarations","bootstrap","providers","CustomReuseStrategy","routesToCache","storedRouteHandles","Map","indexOf","routeConfig","handle","set","has","get","future","curr","DialogService","message","confirmation","window","confirm","providedIn","ErrorPageComponent","ExternalAppRoutingModule","forChild","ExternalAppComponent","sanitizer","paramMap","params","appID","getAppRouteLink","originalRouteLink","navigate","appDangerousUrl","substr","location","origin","appUrl","bypassSecurityTrustResourceUrl","ExternalAppModule","HeadBarComponent","document","history","dropdown","historyOpen","notificationOpen","preferenceOpen","userBasicInfo","currentHistoryObserver","navHistory","currentAppObserver","currentApp","$event","srcElement","className","emit","logout","href","toggleHistoryDropdown","toggleNotificationDropdown","togglePreferenceOpen","HistoryService","historySource","name","NUM_OF_HISTORY","asObservable","idx","map","ele","splice","push","shift","next","httpOptions","headers","IdentityService","http","post","handleError","RELATION_ID","APP_ID","appEntity","Array","isArray","ROUTE_LINK","userID","userName","queryObject","ENTITY_ID","PROJECTION","FILTER","includes","FIELD_NAME","OPERATOR","LOW","replace","SORT","pieceObject","ID","USER_ID","piece","RELATIONS","RELATIONSHIPS","RELATIONSHIP_ID","PARTNER_ENTITY_PIECES","USER_NAME","roleID","NAME","instance","INSTANCE_GUID","DESCRIPTION","user","put","userGUID","operation","result","error","status","addMessage","Exception","console","defaultSession","Date","MockupRoutingModule","MockupComponent","mockupUI","template","MockupModule","msgStore","msgCat","msgName","msgText","EN","shortText","longText","NotFoundComponent","Role","Catalog","App","UserBasicInfo","ShareService","isCollapsedSubject","isCollapsed$","SideMenuComponent","activeRow","mouseLocs","lastDelayLoc","timeoutId","rem","searchTerms","menuDisplay","TOLERANCE","DELAY","role","parseInt","getComputedStyle","head","getPropertyValue","getRoleDetail","roles","_processRoleData","updateIsCollapsed","apps$","term","results","key","returnedApps","forEach","obj","searchedApps","clearMessages","msg","add","categories","category","height","originalHeight","active","isSubMenuShow","isExternal","keyCode","row","menuHeight","nativeElement","offsetHeight","menuScrollTop","getElementsByClassName","scrollTop","top","arrowTop","x","pageX","y","pageY","clearTimeout","isMouseInMenuArea","deactivateSubMenu","menu","offset","left","offsetLeft","offsetTop","upperLeft","offsetWidth","upperRight","lowerLeft","lowerRight","loc","possiblyActivate","appIdx","catalogIdx","findIndex","app1","activate","activateSubMenu","delay","activationDelay","setTimeout","prevLoc","slope","a","b","decreasingCorner","increasingCorner","decreasingSlope","increasingSlope","prevDecreasingSlope","prevIncreasingSlope","mouseleaveMenu","existingUserNameValidator","control","getUserByUserName","value","generateMessage","msgShortText","existingUserIDValidator","getUserByUserID","UserAddressComponent","fb","attributeControlService","userAddressFormArray","userForm","attrCtrls","toAttributeControl","relationMetas","relationMeta","ATTRIBUTES","fieldName","attrCtrl","addressFormGroup","group","ADDRESS_ID","TYPE","required","ADDRESS_VALUE","POSTCODE","CITY","COUNTRY","PRIMARY","setValue","markAsDirty","index","at","newPrimaryIndex","removeAt","addAddress","UserBasicComponent","userBasicNamesForm","userBasicEmployeeForm","concat","UserDetailComponent","dialogService","uiMapperService","readonly","isNewMode","originalUserValue","changedUser","tabStrip","action","getRelationMetaOfEntity","_createNewUser","getUserDetail","instanceGUID","_generateUserForm","_switch2EditMode","_switch2DisplayMode","errorMessages","tabStripID","dirty","reset","_setCheckBoxState","userIDCtrl","clearAsyncValidators","userNameCtrl","emailArray","lastIndex","emailFormGroup","invalid","EMAIL","addressArray","roleArray","roleFormGroup","markAsPristine","replaceState","setAsyncValidators","system_role_INSTANCE_GUID","RELATIONSHIP_INSTANCE_GUID","userDetail","LOCK","PWD_STATUS","DISPLAY_NAME","GIVEN_NAME","MIDDLE_NAME","FAMILY_NAME","TITLE","DEPARTMENT_ID","COMPANY_ID","GENDER","TIMEZONE","DECIMAL_FORMAT","DATE_FORMAT","userBasic","names","employee","emails","array","addresses","userPersonalization","userRole","email","address","userRoleRelationship","values","roleInstance","PARTNER_INSTANCES","getRawValue","userEmailFormArray","userEmployeeForm","userPersonalizationForm","controls","userEmailForm","disable","userAddressForm","enable","_composeChangesToUser","saveUser","userData","_resetUserValue","reportMessage","SYSTEM_ACCESS","userBasicFormGroup","userBasicNamesFormGroup","composeChangedRelation","userBasicEmployeeFormGroup","composeChangedRelationArray","userPersonalizationFormGroup","userRoleFormArray","relationship","composeChangedRelationship","ROLE_ID","switchEditDisplay","save","UserEmailComponent","addEmail","UserPersonalizationComponent","UserRoleComponent","ctrl","onChangeRoleID","currentRole","oldRole","setErrors","trim","getRoleDesc","userRoleForm","existIndex","pristine","rowID","exportObject","afterExportFn","context","ruleIdx","bind","searchHelpComponent","openSearchHelpModalByEntity","UserListComponent","showDeletionConfirmation","users","searchUsers","Warning","messages","search","toBeDeletedUser","toBeDeletedUserGUID","deleteUser","errorMsg","enterSearch","newUser","cancelDeletion","confirmDeletion","WorkProtectionGuard","currentRoute","currentState","nextState","environment","production","bootstrapModule","err","log"],"mappings":";;;;;;;;;;;;;;;;;AAAA,aAASA,wBAAT,CAAkCC,GAAlC,EAAuC;AACtC;AACA;AACA,aAAOC,OAAO,CAACC,OAAR,GAAkBC,IAAlB,CAAuB,YAAW;AACxC,YAAIC,CAAC,GAAG,IAAIC,KAAJ,CAAU,yBAAyBL,GAAzB,GAA+B,GAAzC,CAAR;AACAI,SAAC,CAACE,IAAF,GAAS,kBAAT;AACA,cAAMF,CAAN;AACA,OAJM,CAAP;AAKA;;AACDL,4BAAwB,CAACQ,IAAzB,GAAgC,YAAW;AAAE,aAAO,EAAP;AAAY,KAAzD;;AACAR,4BAAwB,CAACG,OAAzB,GAAmCH,wBAAnC;AACAS,UAAM,CAACC,OAAP,GAAiBV,wBAAjB;AACAA,4BAAwB,CAACW,EAAzB,GAA8B,6CAA9B;;;;;;;;;;;;;;;;ACZA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAQA,QAAMC,MAAM,GAAW,CACrB;AACA;AACA;AAAEC,UAAI,EAAE,OAAR;AAAiBC,eAAS,EAAE;AAA5B,KAHqB,EAIrB;AAAED,UAAI,EAAE,eAAR;AAAyBC,eAAS,EAAE,2FAApC;AAAyDC,mBAAa,EAAE,CAAC,0EAAD;AAAxE,KAJqB,EAKrB;AAAEF,UAAI,EAAE,WAAR;AAAqBG,kBAAY,EAAE;AAAA,eAAM;AAAA;AAAA;AAAA;AAAA,oDAAyCZ,IAAzC,CAA8C,UAAAa,CAAC;AAAA,iBAAIA,CAAC,CAACC,eAAN;AAAA,SAA/C,CAAN;AAAA;AAAnC,KALqB,EAMrB;AAAEL,UAAI,EAAE,cAAR;AAAwBG,kBAAY,EAAE;AAAA,eAAM;AAAA;AAAA;AAAA;AAAA,0DAA+CZ,IAA/C,CAAoD,UAAAa,CAAC;AAAA,iBAAIA,CAAC,CAACE,kBAAN;AAAA,SAArD,CAAN;AAAA;AAAtC,KANqB,EAOrB;AAAEN,UAAI,EAAE,QAAR;AAAkBC,eAAS,EAAE;AAA7B,KAPqB,EAQrB;AAAED,UAAI,EAAE,cAAR;AAAwBC,eAAS,EAAE;AAAnC,KARqB,EASrB;AAAED,UAAI,EAAE,IAAR;AAAcC,eAAS,EAAE;AAAzB,KATqB,CAAvB;;QAgBaM,gB;;;;;YAAAA;;;;yBAAAA,gB;AAAgB,O;AAAA,gBAFlB,CAAE,6DAAaC,OAAb,CAAqBT,MAArB,CAAF,CAEkB,EAHhB,4DAGgB;;;;0HAAhBQ,gB,EAAgB;AAAA;AAAA,kBAHhB,4DAGgB;AAAA,O;AAHJ,K;;;;;sEAGZA,gB,EAAgB;cAJ5B,sDAI4B;eAJnB;AACRV,iBAAO,EAAE,CAAE,4DAAF,CADD;AAERY,iBAAO,EAAE,CAAE,6DAAaD,OAAb,CAAqBT,MAArB,CAAF;AAFD,S;AAImB,Q;;;;;;;;;;;;;;;;;;ACxB7B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAoBaW,Y;;;AAKX,4BAAoBC,MAApB,EACoBC,cADpB,EAEoBC,eAFpB,EAGoBC,YAHpB,EAIoBC,cAJpB,EAKoBC,aALpB,EAMoBC,cANpB,EAOoBC,YAPpB,EAO8C;AAAA;;AAAA;;AAP1B,aAAAP,MAAA,GAAAA,MAAA;AACA,aAAAC,cAAA,GAAAA,cAAA;AACA,aAAAC,eAAA,GAAAA,eAAA;AACA,aAAAC,YAAA,GAAAA,YAAA;AACA,aAAAC,cAAA,GAAAA,cAAA;AACA,aAAAC,aAAA,GAAAA,aAAA;AACA,aAAAC,cAAA,GAAAA,cAAA;AACA,aAAAC,YAAA,GAAAA,YAAA;AARpB,aAAAC,WAAA,GAAc,KAAd;AAUE,aAAKH,aAAL,CAAmBI,eAAnB,CAAmC,sEAAYC,YAA/C;AACA,aAAKH,YAAL,CAAkBI,OAAlB,CAA0B,sEAAYD,YAAtC;AACA,aAAKH,YAAL,CAAkBK,OAAlB,GAA4BC,SAA5B,CAAuC,UAAAC,IAAI,EAAI;AAC7C,eAAI,CAACZ,eAAL,CAAqBa,UAArB,CAAiCD,IAAjC;;AACA,eAAI,CAACR,cAAL,CAAoBU,eAApB,CAAoC,mDAApC,EAA8C,KAAI,CAACd,eAAL,CAAqBe,OAArB,CAA6BC,QAA3E;AACD,SAHD;AAID;;;;mCAEU;AAAA;;AACT,eAAKlB,MAAL,CAAYmB,MAAZ,CAAmBC,IAAnB,CACE,8DAAO,UAAAC,KAAK;AAAA,mBAAIA,KAAK,YAAY,6DAArB;AAAA,WAAZ,CADF,EAEE,2DAAI;AAAA,mBAAM,MAAI,CAACpB,cAAX;AAAA,WAAJ,CAFF,EAGE,8DAAO,UAAAqB,KAAK;AAAA,mBAAIA,KAAK,CAACC,MAAN,KAAiB,SAArB;AAAA,WAAZ,CAHF,EAIE,2DAAI,UAAAD,KAAK,EAAI;AACX,gBAAIE,GAAG,GAAG,EAAV;;AACA,mBAAOF,KAAK,CAACG,UAAb,EAAyB;AACvBH,mBAAK,GAAGA,KAAK,CAACG,UAAd;;AACA,kBAAKH,KAAK,CAACI,QAAN,CAAeF,GAAf,CAAmBG,MAAnB,GAA4B,CAAjC,EAAqC;AACnCH,mBAAG,GAAGA,GAAG,GAAGA,GAAG,GAAG,GAAN,GAAYF,KAAK,CAACI,QAAN,CAAeF,GAAf,CAAmBI,IAAnB,CAAwB,GAAxB,CAAf,GAA8CN,KAAK,CAACI,QAAN,CAAeF,GAAf,CAAmBI,IAAnB,CAAwB,GAAxB,CAAvD;AACD;AACF;;AACD,mBAAOJ,GAAP;AACD,WATD,CAJF,EAcE,gEAAS,UAAAA,GAAG,EAAI;AACd,gBAAI,MAAI,CAACrB,YAAL,CAAkB0B,IAAlB,CAAuBF,MAAvB,KAAkC,CAAtC,EAAyC;AACvC;AACA,qBAAO,gDAAG,IAAH,CAAP;AACD,aAHD,MAGO;AACL,qBAAO,gDAAG,MAAI,CAACxB,YAAL,CAAkB0B,IAAlB,CAAuBC,IAAvB,CAA6B,UAAAC,GAAG;AAAA,uBAAIA,GAAG,CAACC,SAAJ,KAAkB,MAAMR,GAA5B;AAAA,eAAhC,CAAH,CAAP;AACD;AACF,WAPD,CAdF,EAsBGX,SAtBH,CAsBa,UAAAkB,GAAG,EAAI;AAChB,gBAAIA,GAAG,IAAIA,GAAG,CAAC,WAAD,CAAd,EAA6B;AAC3B,oBAAI,CAACE,QAAL,CAAcC,WAAd,CAA+BH,GAA/B;;AACA,oBAAI,CAAC3B,cAAL,CAAoB+B,UAApB,CAAoCJ,GAApC;AACD;AACF,WA3BH;AA4BD;;;qCAEY;AACX,eAAKvB,WAAL,GAAmB,KAAKyB,QAAL,CAAcG,QAAd,EAAnB;AACD;;;;;;;uBAvDUrC,Y,EAAY,uH,EAAA,+H,EAAA,kI,EAAA,4H,EAAA,gI,EAAA,0H,EAAA,mI,EAAA,+H;AAAA,K;;;YAAZA,Y;AAAY,+B;AAAA;AAAA;0EACZ,gF,EAAmB,I;;;;;;;;;;;;;;ACrBhC;;AAEE;;AAAc;AAAA,mBAAc,IAAAsC,UAAA,EAAd;AAA0B,WAA1B;;AAA4B;;AAE1C;;AAEE;;AAGA;;AACE;;AACF;;AACF;;AACF;;;;;;;;;sEDOatC,Y,EAAY;cALxB,uDAKwB;eALd;AACTuC,kBAAQ,EAAE,UADD;AAETC,qBAAW,EAAE,sBAFJ;AAGTC,mBAAS,EAAE,CAAC,qBAAD;AAHF,S;AAKc,Q;;;;;;;;;;;;;;;;;;;;gBACtB,uD;iBAAU,gF,EAAmB;AAAE,sBAAQ;AAAV,W;;;;;;;;;;;;;;;;;;;;AErBhC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QA2DaC,S;;;;;YAAAA,S;AAAS,kBANlB,2DAMkB;;;;yBAATA,S;AAAS,O;AAAA,iBAJT,CACT;AAACC,eAAO,EAAE,mEAAV;AAA8BC,gBAAQ,EAAE;AAAxC,OADS,C;AAEV,gBAjBQ,CACP,uEADO,EAEP,2DAFO,EAGP,mEAHO,EAIP,iEAJO,EAKP,kEALO,EAMP,mFANO,EAOP,oEAPO,EAQP,qEARO,EASP,6DATO,EAUP,6DAVO,CAiBR;;;;0HAEUF,S,EAAS;AAAA,uBAhClB,2DAgCkB,EA/BlB,gFA+BkB,EA9BlB,6EA8BkB,EA7BlB,sFA6BkB,EA5BlB,4FA4BkB,EA3BlB,qGA2BkB,EA1BlB,mIA0BkB,EAzBlB,kGAyBkB,EAxBlB,qGAwBkB,EAvBlB,2GAuBkB,EAtBlB,gFAsBkB,EArBlB,oFAqBkB;AArBA,kBAGlB,uEAHkB,EAIlB,2DAJkB,EAKlB,mEALkB,EAMlB,iEANkB,EAOlB,kEAPkB,EAQlB,mFARkB,EASlB,oEATkB,EAUlB,qEAVkB,EAWlB,6DAXkB,EAYlB,6DAZkB;AAqBA,O;AATP,K;;;;;sEASFA,S,EAAS;cAlCrB,sDAkCqB;eAlCZ;AACRG,sBAAY,EAAE,CACZ,2DADY,EAEZ,gFAFY,EAGZ,6EAHY,EAIZ,sFAJY,EAKZ,4FALY,EAMZ,qGANY,EAOZ,mIAPY,EAQZ,kGARY,EASZ,qGATY,EAUZ,2GAVY,EAWZ,gFAXY,EAYZ,oFAZY,CADN;AAeR9C,iBAAO,EAAE,CACP,uEADO,EAEP,2DAFO,EAGP,mEAHO,EAIP,iEAJO,EAKP,kEALO,EAMP,mFANO,EAOP,oEAPO,EAQP,qEARO,EASP,6DATO,EAUP,6DAVO,CAfD;AA2BR+C,mBAAS,EAAE,CACT,2DADS,CA3BH;AA8BRC,mBAAS,EAAE,CACT;AAACJ,mBAAO,EAAE,mEAAV;AAA8BC,oBAAQ,EAAE;AAAxC,WADS;AA9BH,S;AAkCY,Q;;;;;;;;;;;;;;;;;;AChDtB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAGaI,mB;;;AADb;AAAA;;AAEE,aAAAC,aAAA,GAA0B,CAAC,OAAD,CAA1B;AACA,aAAAC,kBAAA,GAAqB,IAAIC,GAAJ,EAArB;AAsDD;AApDC;;;;;;;;;qCAKa5B,K,EAA6B;AACxC;AACA,iBAAO,KAAK0B,aAAL,CAAmBG,OAAnB,CAA2B7B,KAAK,CAAC8B,WAAN,CAAkB/D,IAA7C,IAAqD,CAAC,CAA7D;AACD;AAED;;;;;;;;;8BAMMiC,K,EAA+B+B,M,EAA2B;AAC9D;AACA,eAAKJ,kBAAL,CAAwBK,GAAxB,CAA4BhC,KAAK,CAAC8B,WAAN,CAAkB/D,IAA9C,EAAoDgE,MAApD;AACD;AAED;;;;;;;;qCAKa/B,K,EAA6B;AACxC;AACA,iBAAO,KAAK2B,kBAAL,CAAwBM,GAAxB,CAA4BjC,KAAK,CAAC8B,WAAN,CAAkB/D,IAA9C,CAAP;AACD;AAED;;;;;;;iCAISiC,K,EAA6B;AACpC,iBAAO,KAAK2B,kBAAL,CAAwBO,GAAxB,CAA4BlC,KAAK,CAAC8B,WAAN,CAAkB/D,IAA9C,CAAP;AACD;AAED;;;;;;;;;;;;yCASiBoE,M,EAAgCC,I,EAA4B;AAC3E;AACA,iBAAOD,MAAM,CAACL,WAAP,KAAuBM,IAAI,CAACN,WAAnC;AACD;;;;;;;uBAvDUL,mB;AAAmB,K;;;aAAnBA,mB;AAAmB,eAAnBA,mBAAmB;;;;;sEAAnBA,mB,EAAmB;cAD/B;AAC+B,Q;;;;;;;;;;;;;;;;;;ACdhC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAMaY,a;;;;;;;;;;AAEX;;;;gCAIQC,O,EAAgB;AACtB,cAAMC,YAAY,GAAGC,MAAM,CAACC,OAAP,CAAeH,OAAO,IAAI,WAA1B,CAArB;AAEA,iBAAO,gDAAGC,YAAH,CAAP;AACD;;;;;;;uBAVUF,a;AAAa,K;;;aAAbA,a;AAAa,eAAbA,aAAa,K;AAAA,kBAFZ;;;;;sEAEDA,a,EAAa;cAHzB,wDAGyB;eAHd;AACVK,oBAAU,EAAE;AADF,S;AAGc,Q;;;;;;;;;;;;;;;;;;ACN1B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAOaC,kB;;;AAEX,oCAAc;AAAA;AAAG;;;;mCAEN,CACV;;;;;;;uBALUA,kB;AAAkB,K;;;YAAlBA,kB;AAAkB,qC;AAAA,c;AAAA,a;AAAA;AAAA;ACP/B;;;;;;;;;sEDOaA,kB,EAAkB;cAL9B,uDAK8B;eALpB;AACT3B,kBAAQ,EAAE,gBADD;AAETC,qBAAW,EAAE,6BAFJ;AAGTC,mBAAS,EAAE,CAAC,4BAAD;AAHF,S;AAKoB,Q;;;;;;;;;;;;;;;;;;;;AEP/B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAIA,QAAMpD,MAAM,GAAW,CACrB;AACEC,UAAI,EAAE,qBADR;AAC+BC,eAAS,EAAE;AAD1C,KADqB,CAAvB;;QAca4E,wB;;;;;YAAAA;;;;yBAAAA,wB;AAAwB,O;AAAA,gBAP1B,CACP,6DAAaC,QAAb,CAAsB/E,MAAtB,CADO,CAO0B,EAHjC,4DAGiC;;;;0HAAxB8E,wB,EAAwB;AAAA;AAAA,kBAHjC,4DAGiC;AAAA,O;AAHrB,K;;;;;sEAGHA,wB,EAAwB;cARpC,sDAQoC;eAR3B;AACRpE,iBAAO,EAAE,CACP,6DAAaqE,QAAb,CAAsB/E,MAAtB,CADO,CADD;AAIRF,iBAAO,EAAE,CACP,4DADO;AAJD,S;AAQ2B,Q;;;;;;;;;;;;;;;;;;AClBrC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAcakF,oB;;;AAKX,oCACU9C,KADV,EAEUnB,YAFV,EAGUD,eAHV,EAIUmE,SAJV,EAKUrE,MALV,EAKwB;AAAA;;AAJd,aAAAsB,KAAA,GAAAA,KAAA;AACA,aAAAnB,YAAA,GAAAA,YAAA;AACA,aAAAD,eAAA,GAAAA,eAAA;AACA,aAAAmE,SAAA,GAAAA,SAAA;AACA,aAAArE,MAAA,GAAAA,MAAA,CAAc,CARxB;;AACA,aAAA6B,IAAA,GAAc,EAAd;AAQK;;;;mCAEM;AAAA;;AACT,eAAKP,KAAL,CAAWgD,QAAX,CAAoBlD,IAApB,CACE,iEAAU,UAACmD,MAAD,EAAsB;AAC5B,gBAAMC,KAAK,GAAGD,MAAM,CAACf,GAAP,CAAW,OAAX,CAAd;;AACA,gBAAI,MAAI,CAACrD,YAAL,CAAkB0B,IAAlB,CAAuBF,MAAvB,KAAkC,CAAtC,EAAyC;AACvC,qBAAO,MAAI,CAACzB,eAAL,CAAqBuE,eAArB,CAAqCD,KAArC,CAAP;AACD,aAFD,MAEO;AACL,qBAAO,gDAAG,MAAI,CAACrE,YAAL,CAAkB0B,IAAlB,CAAuBC,IAAvB,CAA6B,UAAAC,GAAG;AAAA,uBAAIA,GAAG,CAACyC,KAAJ,KAAcA,KAAlB;AAAA,eAAhC,EAAyDE,iBAA5D,CAAP;AACD;AACF,WAPH,CADF,EASK7D,SATL,CASe,UAAAmB,SAAS,EAAI;AACxB,gBAAIA,SAAS,KAAK,aAAlB,EAAiC;AAC/B,oBAAI,CAAChC,MAAL,CAAY2E,QAAZ,CAAqB,CAAC,cAAD,CAArB;AACD,aAFD,MAEO;AACL,kBAAMC,eAAe,GAAG5C,SAAS,CAAC6C,MAAV,CAAiB,CAAjB,EAAoB,CAApB,MAA2B,MAA3B,GAAoC7C,SAApC,GACtB8B,MAAM,CAACgB,QAAP,CAAgBC,MAAhB,GAAyB/C,SAD3B;AAEA,oBAAI,CAACgD,MAAL,GAAc,MAAI,CAACX,SAAL,CAAeY,8BAAf,CAA8CL,eAA9C,CAAd;AACD;AACJ,WAjBD;AAkBD;;;;;;;uBAhCUR,oB,EAAoB,+H,EAAA,4H,EAAA,kI,EAAA,uI,EAAA,uH;AAAA,K;;;YAApBA,oB;AAAoB,uC;AAAA,c;AAAA,a;AAAA,mD;AAAA;AAAA;ACdjC;;;;AAAQ;;;;;;;;sEDcKA,oB,EAAoB;cALhC,uDAKgC;eALtB;AACT9B,kBAAQ,EAAE,kBADD;AAETC,qBAAW,EAAE,+BAFJ;AAGTC,mBAAS,EAAE,CAAC,8BAAD;AAHF,S;AAKsB,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AEdjC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAca0C,iB;;;;;YAAAA;;;;yBAAAA,iB;AAAiB,O;AAAA,gBARnB,CACP,4DADO,EAEP,qFAFO,CAQmB;;;;0HAAjBA,iB,EAAiB;AAAA,uBAH1B,4EAG0B;AAHN,kBAJpB,4DAIoB,EAHpB,qFAGoB;AAGM,O;AANF,K;;;;;sEAMfA,iB,EAAiB;cAT7B,sDAS6B;eATpB;AACRpF,iBAAO,EAAE,CACP,4DADO,EAEP,qFAFO,CADD;AAKR8C,sBAAY,EAAE,CACZ,4EADY;AALN,S;AASoB,Q;;;;;;;;;;;;;;;;;;ACd9B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACiBU;;AAAmC;;AACjC;;AAAY;;AACd;;;;;;AAFsC;;AAAA;;AACpC;;AAAA;;;;;;;;;;QDNCuC,gB;;;AAWX,gCACoBC,QADpB,EAEoBC,OAFpB,EAGoB9E,YAHpB,EAIoBL,eAJpB,EAIsD;AAAA;;AAHlC,aAAAkF,QAAA,GAAAA,QAAA;AACA,aAAAC,OAAA,GAAAA,OAAA;AACA,aAAA9E,YAAA,GAAAA,YAAA;AACA,aAAAL,eAAA,GAAAA,eAAA;AAdV,aAAAmC,UAAA,GAAa,IAAI,0DAAJ,EAAb;AAGV,aAAAiD,QAAA,GAAW;AACTC,qBAAW,EAAE,KADJ;AAETC,0BAAgB,EAAE,KAFT;AAGTC,wBAAc,EAAE;AAHP,SAAX;AAKA,aAAAC,aAAA,GAAyB,IAAI,wDAAJ,EAAzB;AAMyD;;;;mCAE9C;AAAA;;AACT,eAAKL,OAAL,CAAaM,sBAAb,CAAoC9E,SAApC,CAA8C,UAAAwE,OAAO;AAAA,mBAAI,MAAI,CAACO,UAAL,GAAkBP,OAAtB;AAAA,WAArD;AACA,eAAKA,OAAL,CAAaQ,kBAAb,CAAgChF,SAAhC,CAA0C,UAAAiF,UAAU;AAAA,mBAAI,MAAI,CAACA,UAAL,GAAkBA,UAAtB;AAAA,WAApD;AACA,eAAKvF,YAAL,CAAkBK,OAAlB,GAA4BC,SAA5B,CAAuC,UAAAD,OAAO;AAAA,mBAAI,MAAI,CAAC8E,aAAL,GAAqB9E,OAAzB;AAAA,WAA9C;AACA,eAAK8E,aAAL,GAAqB,KAAKxF,eAAL,CAAqBe,OAA1C;AACD;;;wCAGe8E,M,EAAQT,Q,EAAQ;AAC9B,cAAIS,MAAM,CAACC,UAAP,CAAkBC,SAAlB,KAAgC,eAApC,EAAqD;AACnDX,oBAAQ,CAACC,WAAT,GAAuB,KAAvB;AACAD,oBAAQ,CAACE,gBAAT,GAA4B,KAA5B;AACAF,oBAAQ,CAACG,cAAT,GAA0B,KAA1B;AACD;AACF;;;mCAEU;AACT,eAAKpD,UAAL,CAAgB6D,IAAhB;AACD;;;gDAEuB;AACtB,eAAKZ,QAAL,CAAcC,WAAd,GAA4B,CAAC,KAAKD,QAAL,CAAcC,WAA3C;AACA,eAAKD,QAAL,CAAcE,gBAAd,GAAiC,KAAjC;AACA,eAAKF,QAAL,CAAcG,cAAd,GAA+B,KAA/B;AACD;;;qDAE4B;AAC3B,eAAKH,QAAL,CAAcE,gBAAd,GAAiC,CAAC,KAAKF,QAAL,CAAcE,gBAAhD;AACA,eAAKF,QAAL,CAAcC,WAAd,GAA4B,KAA5B;AACA,eAAKD,QAAL,CAAcG,cAAd,GAA+B,KAA/B;AACD;;;+CAEsB;AACrB,eAAKH,QAAL,CAAcG,cAAd,GAA+B,CAAC,KAAKH,QAAL,CAAcG,cAA9C;AACA,eAAKH,QAAL,CAAcC,WAAd,GAA4B,KAA5B;AACA,eAAKD,QAAL,CAAcE,gBAAd,GAAiC,KAAjC;AACD;;;iCAEQ;AAAA;;AACP,eAAKjF,YAAL,CAAkB4F,MAAlB,GAA2BtF,SAA3B,CAAqC;AAAA,mBAAM,MAAI,CAACuE,QAAL,CAAcN,QAAd,CAAuBsB,IAAvB,GAA8BtC,MAAM,CAACgB,QAAP,CAAgBC,MAApD;AAAA,WAArC;AACD;;;;;;;uBAzDUI,gB,EAAgB,gEAWP,wDAXO,C,EAWC,gI,EAAA,8H,EAAA,kI;AAAA,K;;;YAXjBA,gB;AAAgB,mC;AAAA;AAAA;;;;;;;;;;;;;;ACZ7B;;AACE;;AACE;;AAA+C;AAAA,mBAAS,IAAA/C,QAAA,EAAT;AAAmB,WAAnB;;AAC7C;;AAAyB;;AAAiB;;AAC1C;;AACA;;AACA;;AACF;;AACA;;AAAoC;;AAApC;;AACF;;AAGA;;AACE;;AACE;;AACE;;AAAG;AAAA,mBAAS,IAAAiE,qBAAA,EAAT;AAAgC,WAAhC;;AAAwD;;AAAoB;;AAAwB;;AACvG;;AACE;;AAGF;;AACF;;AACF;;AACF;;AAGA;;AACE;;AACE;;AACE;;AAAG;AAAA,mBAAS,IAAAC,0BAAA,EAAT;AAAqC,WAArC;;AAA6D;;AACnC;;AAAgC;;AAAE;;AAC/D;;AACA;;AACE;;AAAI;;AAAY;;AAAwC;;AAAO;;AAAO;;AAAkB;;AAAI;;AAC5F;;AAAI;;AAAY;;AAAwC;;AAAO;;AAAO;;AAAe;;AAAI;;AACzF;;AAAI;;AAAY;;AAAwC;;AAAO;;AAAO;;AAC9D;;AAAI;;AACZ;;AACA;;AAAI;;AAAmC;;AAAQ;;AAAI;;AACrD;;AACF;;AACA;;AACE;;AAAG;AAAA,mBAAS,IAAAC,oBAAA,EAAT;AAA+B,WAA/B;;AAAuD;;AAC7B;;AAAgD;;AAC7E;;AACA;;AACE;;AAAI;;AAAY;;AAAiC;;AAAO;;AAAI;;AAC5D;;AAAI;;AAAY;;AAAgC;;AAAQ;;AAAI;;AAC5D;;AACA;;AAAI;;AAAG;AAAA,mBAAS,IAAAJ,MAAA,EAAT;AAAiB,WAAjB;;AAAmB;;AAAsC;;AAAM;;AAAI;;AAC5E;;AACF;;AACF;;AACF;;AACF;;;;AAxCU;;AAAA;;AACyD;;AAAA;;AAErD;;AAAA;;AAWJ;;AAAA;;AAaA;;AAAA;;AAE2B;;AAAA;;;;;;;;;sED/BxBhB,gB,EAAgB;cAL5B,uDAK4B;eALlB;AACT7C,kBAAQ,EAAE,cADD;AAETC,qBAAW,EAAE,2BAFJ;AAGTC,mBAAS,EAAE,CAAC,0BAAD;AAHF,S;AAKkB,Q;;;;kBAWd,oD;mBAAO,wD;;;;;;;;;;;gBAVnB;;;gBAuBA,0D;iBAAa,kB,EAAoB,CAAC,QAAD,EAAW,UAAX,C;;;;;;;;;;;;;;;;;;;;AEpCpC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAKagE,c;;;AAQX,gCAAc;AAAA;;AAPN,aAAAZ,UAAA,GAAoB,EAApB;AACA,aAAAa,aAAA,GAAgB,IAAI,6EAAJ,CAA2B,EAA3B,CAAhB;AACA,aAAAX,UAAA,GAAa,IAAI,6EAAJ,CAA8B;AAACY,cAAI,EAAE;AAAP,SAA9B,CAAb;AACS,aAAAC,cAAA,GAAiB,EAAjB;AACjB,aAAAhB,sBAAA,GAAyB,KAAKc,aAAL,CAAmBG,YAAnB,EAAzB;AACA,aAAAf,kBAAA,GAAqB,KAAKC,UAAL,CAAgBc,YAAhB,EAArB;AAEiB;;;;mCAEN7E,G,EAAU;AACnB,cAAM8E,GAAG,GAAG,KAAKjB,UAAL,CAAgBkB,GAAhB,CAAoB,UAAAC,GAAG;AAAA,mBAAIA,GAAG,CAAC/E,SAAR;AAAA,WAAvB,EACgBmB,OADhB,CACwBpB,GAAG,CAACC,SAD5B,CAAZ;;AAEA,cAAK6E,GAAG,GAAG,CAAC,CAAZ,EAAgB;AACd,iBAAKjB,UAAL,CAAgBoB,MAAhB,CAAuBH,GAAvB,EAA4B,CAA5B;AACD;;AACD,eAAKjB,UAAL,CAAgBqB,IAAhB,CAAqBlF,GAArB;;AACA,cAAI,KAAK6D,UAAL,CAAgBjE,MAAhB,GAAyB,KAAKgF,cAAlC,EAAmD;AACjD,iBAAKf,UAAL,CAAgBsB,KAAhB;AACD;;AACD,eAAKT,aAAL,CAAmBU,IAAnB,CAAwB,KAAKvB,UAA7B;AACA,eAAKE,UAAL,CAAgBqB,IAAhB,CAAqBpF,GAArB;AACD;;;;;;;uBAtBUyE,c;AAAc,K;;;aAAdA,c;AAAc,eAAdA,cAAc,K;AAAA,kBADF;;;;;sEACZA,c,EAAc;cAD1B,wDAC0B;eADf;AAACxC,oBAAU,EAAE;AAAb,S;AACe,Q;;;;;;;;;;;;;;;;;;;;ACL3B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAaA,QAAMoD,WAAW,GAAG;AAClBC,aAAO,EAAE,IAAI,gEAAJ,CAAgB;AAAE,wBAAgB;AAAlB,OAAhB;AADS,KAApB;;QAKaC,e;;;AAIX,+BAAoBC,IAApB,EACoBjH,cADpB,EAEoBN,MAFpB,EAEoC;AAAA;;AAFhB,aAAAuH,IAAA,GAAAA,IAAA;AACA,aAAAjH,cAAA,GAAAA,cAAA;AACA,aAAAN,MAAA,GAAAA,MAAA;AALZ,aAAAU,YAAA,GAAe,sEAAYA,YAA3B;AAMP;;;;mCAEWI,I,EAAS;AACnB,eAAKF,OAAL,GAAwBE,IAAxB;AACD;;;;AAcD;;;;wCAIa;AACX,iBAAO,KAAKyG,IAAL,CAAUC,IAAV,CAAuB,KAAK9G,YAAL,gCAAvB,EAA0E,EAA1E,EAA8E0G,WAA9E,EAA2FhG,IAA3F,CACL,kEAAW,KAAKqG,WAAL,CAAsB,eAAtB,CAAX,CADK,CAAP;AAED;AAED;;;;;;;;+BAKOzF,S,EAAiB;AACtB,cAAIA,SAAS,CAAC6C,MAAV,CAAiB,CAAjB,EAAoB,EAApB,MAA4B,eAAhC,EAAiD;AAC/C,mBAAO,KAAK0C,IAAL,CAAUC,IAAV,CAAuB,KAAK9G,YAAL,yBAAvB,EACL;AAACgH,yBAAW,EAAE,KAAd;AAAqBC,oBAAM,EAAE3F,SAAS,CAAC6C,MAAV,CAAiB,EAAjB;AAA7B,aADK,EAC+CuC,WAD/C,EAC4DhG,IAD5D,CAEL,2DAAI,UAAAwG,SAAS,EAAI;AACf,kBAAM7F,GAAG,GAAQ,IAAI,yCAAJ,EAAjB;;AACA,kBAAI8F,KAAK,CAACC,OAAN,CAAcF,SAAd,CAAJ,EAA8B;AAAEA,yBAAS,GAAGA,SAAS,CAAC,CAAD,CAArB;AAA2B,eAF5C,CAE6C;;;AAC5D,kBAAIA,SAAS,CAAC,WAAD,CAAb,EAA4B;AAAE;AAC5B7F,mBAAG,CAAC2E,IAAJ,GAAWkB,SAAS,CAAC,KAAD,CAAT,CAAiB,CAAjB,EAAoB,MAApB,CAAX;AACA7F,mBAAG,CAACC,SAAJ,GAAgBA,SAAhB;AACD;;AACD,qBAAOD,GAAP;AACD,aARD,CAFK,EAWL,kEAAW,KAAK0F,WAAL,CAAsB,QAAtB,CAAX,CAXK,CAAP;AAYD,WAbD,MAaO;AACL,mBAAO,KAAKF,IAAL,CAAUC,IAAV,CAAuB,KAAK9G,YAAL,yBAAvB,EACL;AAACgH,yBAAW,EAAE,KAAd;AAAqBK,wBAAU,EAAE/F;AAAjC,aADK,EACwCoF,WADxC,EACqDhG,IADrD,CAEL,2DAAI,UAAAwG,SAAS,EAAI;AACf,kBAAM7F,GAAG,GAAQ,IAAI,yCAAJ,EAAjB;;AACA,kBAAI8F,KAAK,CAACC,OAAN,CAAcF,SAAd,CAAJ,EAA8B;AAAEA,yBAAS,GAAGA,SAAS,CAAC,CAAD,CAArB;AAA2B;;AAC3D,kBAAIA,SAAS,CAAC,WAAD,CAAb,EAA4B;AAC1B7F,mBAAG,CAAC2E,IAAJ,GAAWkB,SAAS,CAAC,KAAD,CAAT,CAAiB,CAAjB,EAAoB,MAApB,CAAX;AACA7F,mBAAG,CAACC,SAAJ,GAAgB4F,SAAS,CAAC,KAAD,CAAT,CAAiB,CAAjB,EAAoB,YAApB,CAAhB;AACD;;AACD,qBAAO7F,GAAP;AACD,aARD,CAFK,EAWL,kEAAW,KAAK0F,WAAL,CAAsB,QAAtB,CAAX,CAXK,CAAP;AAYD;AACF;AAED;;;;;;;wCAIgBjD,K,EAAa;AAC3B,iBAAO,KAAK+C,IAAL,CAAUC,IAAV,CAAuB,KAAK9G,YAAL,yBAAvB,EACL;AAACgH,uBAAW,EAAE,KAAd;AAAqBC,kBAAM,EAAEnD;AAA7B,WADK,EACgC4C,WADhC,EAC6ChG,IAD7C,CAEL,2DAAI,UAAAwG,SAAS,EAAI;AACf,gBAAIC,KAAK,CAACC,OAAN,CAAcF,SAAd,CAAJ,EAA8B;AAAEA,uBAAS,GAAGA,SAAS,CAAC,CAAD,CAArB;AAA2B,aAD5C,CAC6C;;;AAC5D,gBAAIA,SAAS,CAAC,WAAD,CAAb,EAA4B;AAAE;AAC5B,qBAAOA,SAAS,CAAC,KAAD,CAAT,CAAiB,CAAjB,EAAoB,YAApB,CAAP;AACD,aAFD,MAEO;AACL,qBAAO,aAAP;AACD;AACF,WAPD,CAFK,EAUL,kEAAW,KAAKH,WAAL,CAAsB,iBAAtB,CAAX,CAVK,CAAP;AAWD;AAED;;;;;;;;oCAKYO,M,EAAgBC,Q,EAAgB;AAC1C,cAAMC,WAAW,GAAG,IAAI,uDAAJ,EAApB;AACAA,qBAAW,CAACC,SAAZ,GAAwB,QAAxB;AACAD,qBAAW,CAACR,WAAZ,GAA0B,QAA1B;AACAQ,qBAAW,CAACE,UAAZ,GAAyB,CAAC,SAAD,EAAY,WAAZ,EAAyB,cAAzB,EAAyC,MAAzC,EAAiD,WAAjD,CAAzB;AACAF,qBAAW,CAACG,MAAZ,GAAqB,EAArB;;AACA,cAAIL,MAAJ,EAAY;AACV,gBAAIA,MAAM,CAACM,QAAP,CAAgB,GAAhB,KAAwBN,MAAM,CAACM,QAAP,CAAgB,GAAhB,CAA5B,EAAkD;AAChDJ,yBAAW,CAACG,MAAZ,CAAmBpB,IAAnB,CAAwB;AAACsB,0BAAU,EAAE,SAAb;AAAwBC,wBAAQ,EAAE,IAAlC;AAAwCC,mBAAG,EAAET;AAA7C,eAAxB;AACD,aAFD,MAEO;AACLE,yBAAW,CAACG,MAAZ,CAAmBpB,IAAnB,CAAwB;AAACsB,0BAAU,EAAE,SAAb;AAAwBC,wBAAQ,EAAE,IAAlC;AAAwCC,mBAAG,EAAET;AAA7C,eAAxB;AACD;AACF;;AACD,cAAIC,QAAJ,EAAc;AACZ,gBAAIA,QAAQ,CAACK,QAAT,CAAkB,GAAlB,CAAJ,EAA4B;AAC1BL,sBAAQ,GAAGA,QAAQ,CAACS,OAAT,CAAiB,MAAjB,EAAyB,GAAzB,CAAX;AACAR,yBAAW,CAACG,MAAZ,CAAmBpB,IAAnB,CAAwB;AAACsB,0BAAU,EAAE,WAAb;AAA0BC,wBAAQ,EAAE,IAApC;AAA0CC,mBAAG,EAAER;AAA/C,eAAxB;AACD,aAHD,MAGO;AACLC,yBAAW,CAACG,MAAZ,CAAmBpB,IAAnB,CAAwB;AAACsB,0BAAU,EAAE,WAAb;AAA0BC,wBAAQ,EAAE,IAApC;AAA0CC,mBAAG,EAAER;AAA/C,eAAxB;AACD;AACF;;AACDC,qBAAW,CAACS,IAAZ,GAAmB,CAAC,SAAD,CAAnB;AACA,iBAAO,KAAKpB,IAAL,CAAUC,IAAV,CAAoB,KAAK9G,YAAL,eAApB,EAAsDwH,WAAtD,EAAmEd,WAAnE,EAAgFhG,IAAhF,CACL,kEAAW,KAAKqG,WAAL,CAAsB,eAAtB,CAAX,CADK,CAAP;AAED;AAED;;;;;;;;sCAKcO,M,EAAc;AAC1B,cAAMY,WAAW,GAAG;AAClBC,cAAE,EAAE;AAAEnB,yBAAW,EAAE,QAAf;AAAyBoB,qBAAO,EAAEd;AAAlC,aADc;AAElBe,iBAAK,EAAE;AAACC,uBAAS,EAAE,CAAC,QAAD,EAAW,YAAX,EAAyB,SAAzB,EAAoC,WAApC,EAAiD,mBAAjD,CAAZ;AACCC,2BAAa,EAAE,CACb;AACEC,+BAAe,EAAE,cADnB;AAEEC,qCAAqB,EAAE;AAAEH,2BAAS,EAAE,CAAC,QAAD;AAAb;AAFzB,eADa;AADhB;AAFW,WAApB;AAUA,iBAAO,KAAKzB,IAAL,CAAUC,IAAV,CACL,KAAK9G,YAAL,+BADK,EAC6CkI,WAD7C,EAC0DxB,WAD1D,EACuEhG,IADvE,CAEL,kEAAW,KAAKqG,WAAL,CAAsB,eAAtB,CAAX,CAFK,CAAP;AAGD;AAED;;;;;;;wCAIgBO,M,EAAc;AAC5B,cAAMY,WAAW,GAAG;AAClBC,cAAE,EAAE;AAAEnB,yBAAW,EAAE,QAAf;AAAyBoB,qBAAO,EAAEd;AAAlC,aADc;AAElBe,iBAAK,EAAE;AAACC,uBAAS,EAAE,CAAC,QAAD;AAAZ;AAFW,WAApB;AAIA,iBAAO,KAAKzB,IAAL,CAAUC,IAAV,CACL,KAAK9G,YAAL,+BADK,EAC6CkI,WAD7C,EAC0DxB,WAD1D,EACuEhG,IADvE,CAEL,kEAAW,KAAKqG,WAAL,CAAsB,iBAAtB,CAAX,CAFK,CAAP;AAGD;;;0CAEiBQ,Q,EAAgB;AAChC,cAAMW,WAAW,GAAG;AAClBC,cAAE,EAAE;AAAEnB,yBAAW,EAAE,QAAf;AAAyB0B,uBAAS,EAAEnB;AAApC,aADc;AAElBc,iBAAK,EAAE;AAACC,uBAAS,EAAE,CAAC,QAAD;AAAZ;AAFW,WAApB;AAIA,iBAAO,KAAKzB,IAAL,CAAUC,IAAV,CACL,KAAK9G,YAAL,+BADK,EAC6CkI,WAD7C,EAC0DxB,WAD1D,EACuEhG,IADvE,CAEL,kEAAW,KAAKqG,WAAL,CAAsB,mBAAtB,CAAX,CAFK,CAAP;AAGD;;;oCAEW4B,M,EAAc;AACxB,cAAMT,WAAW,GAAG;AAClBC,cAAE,EAAE;AAAEnB,yBAAW,EAAE,QAAf;AAAyB4B,kBAAI,EAAED;AAA/B,aADc;AAElBN,iBAAK,EAAE;AAACC,uBAAS,EAAE,CAAC,QAAD;AAAZ;AAFW,WAApB;AAIA,iBAAO,KAAKzB,IAAL,CAAUC,IAAV,CACL,KAAK9G,YAAL,+BADK,EAC6CkI,WAD7C,EAC0DxB,WAD1D,EACuEhG,IADvE,CAEJ,2DAAI,UAAAmI,QAAQ,EAAI;AACd,mBAAO,mBAAmBA,QAAnB,GACP;AACEC,2BAAa,EAAED,QAAQ,CAAC,eAAD,CADzB;AAEEE,yBAAW,EAAEF,QAAQ,CAAC,QAAD,CAAR,GAAqBA,QAAQ,CAAC,QAAD,CAAR,CAAmB,CAAnB,EAAsB,aAAtB,CAArB,GAA4D;AAF3E,aADO,GAIHA,QAAQ,CAAC,CAAD,CAJZ;AAKD,WAND,CAFI,EASJ,kEAAW,KAAK9B,WAAL,CAAsB,aAAtB,CAAX,CATI,CAAP;AAUD;AAED;;;;;;;iCAISiC,I,EAAY;AACnB,cAAIA,IAAI,CAAC,eAAD,CAAR,EAA2B;AACzB,mBAAO,KAAKnC,IAAL,CAAUoC,GAAV,CACL,KAAKjJ,YAAL,gBADK,EAC8BgJ,IAD9B,EACoCtC,WADpC,EACiDhG,IADjD,CAEL,kEAAW,KAAKqG,WAAL,CAAsB,UAAtB,CAAX,CAFK,CAAP;AAGD,WAJD,MAIO;AACL,mBAAO,KAAKF,IAAL,CAAUC,IAAV,CACL,KAAK9G,YAAL,gBADK,EAC8BgJ,IAD9B,EACoCtC,WADpC,EACiDhG,IADjD,CAEL,kEAAW,KAAKqG,WAAL,CAAsB,UAAtB,CAAX,CAFK,CAAP;AAGD;AACF;AAED;;;;;;;mCAIWmC,Q,EAAgB;AACzB,iBAAO,KAAKrC,IAAL,WAAmC,KAAK7G,YAAL,6BAA8CkJ,QAAjF,EAA2FxC,WAA3F,EAAwGhG,IAAxG,CACL,kEAAW,KAAKqG,WAAL,CAAsB,YAAtB,CAAX,CADK,CAAP;AAGD;;;sCAE4D;AAAA;;AAAA,cAArCoC,SAAqC,uEAAzB,WAAyB;AAAA,cAAZC,MAAY;AAC3D,iBAAO,UAACC,KAAD,EAA+B;AACpC,gBAAIA,KAAK,CAACC,MAAN,KAAiB,GAArB,EAA0B;AACxB,oBAAI,CAAC1J,cAAL,CAAoB2J,UAApB,CAA+B,WAA/B,EAA4C,sCAA5C,EAAoF,+DAAYC,SAAhG;AACD,aAFD,MAEO;AACL,oBAAI,CAAC5J,cAAL,CAAoB2J,UAApB,CAA+B,WAA/B,EAA4C,SAA5C,EAAuD,+DAAYC,SAAnE,EAA8EL,SAA9E,EAAyFE,KAAK,CAACnG,OAA/F;AACD;;AAED,kBAAI,CAAC5D,MAAL,CAAY2E,QAAZ,CAAqB,CAAC,QAAD,CAArB;;AACAwF,mBAAO,CAACJ,KAAR,CAAcF,SAAd,EAAyBE,KAAzB,EARoC,CAQH;AAEjC;;AACA,mBAAO,gDAAGD,MAAH,CAAP;AACD,WAZD;AAaD;;;4BA/MU;AACT,cAAI,KAAKlJ,OAAT,EAAkB;AAAE,mBAAO,KAAMA,OAAb;AAAuB;;AAC3C,cAAMwJ,cAAc,GAAG,IAAI,wDAAJ,EAAvB;AACAA,wBAAc,CAACtB,OAAf,GAAyB,OAAzB;AACAsB,wBAAc,CAAClJ,QAAf,GAA0B,IAA1B;AACA,iBAAOkJ,cAAP;AACD;;;4BAEc;AACb,iBAAO,oEAAY,IAAIC,IAAJ,EAAZ,EAAwB,qBAAxB,EAA+C,OAA/C,CAAP;AACD;;;;;;;uBAvBU/C,e,EAAe,uH,EAAA,yH,EAAA,8G;AAAA,K;;;aAAfA,e;AAAe,eAAfA,eAAe,K;AAAA,kBADH;;;;;sEACZA,e,EAAe;cAD3B,wDAC2B;eADhB;AAACtD,oBAAU,EAAE;AAAb,S;AACgB,Q;;;;;;;;;;;;;;;;;;;;;;;;;;AClB5B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAIA,QAAM5E,MAAM,GAAW,CACrB;AACEC,UAAI,EAAE,YADR;AACsBC,eAAS,EAAE;AADjC,KADqB,CAAvB;;QAcagL,mB;;;;;YAAAA;;;;yBAAAA,mB;AAAmB,O;AAAA,gBAPrB,CACP,6DAAanG,QAAb,CAAsB/E,MAAtB,CADO,CAOqB,EAH5B,4DAG4B;;;;0HAAnBkL,mB,EAAmB;AAAA;AAAA,kBAH5B,4DAG4B;AAAA,O;AAHhB,K;;;;;sEAGHA,mB,EAAmB;cAR/B,sDAQ+B;eARtB;AACRxK,iBAAO,EAAE,CACP,6DAAaqE,QAAb,CAAsB/E,MAAtB,CADO,CADD;AAIRF,iBAAO,EAAE,CACP,4DADO;AAJD,S;AAQsB,Q;;;;;;;;;;;;;;;;;;AClBhC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAQaqL,e;;;AAEX,+BAAoBjJ,KAApB,EAA2C;AAAA;;AAAvB,aAAAA,KAAA,GAAAA,KAAA;AAA0B;;;;mCAInC,CAAG;;;oCAEF;AACV,eAAKkJ,QAAL,GAAgB,YAAY,KAAKlJ,KAAL,CAAWI,QAAX,CAAoB4C,QAApB,CAA6Bd,GAA7B,CAAiC,IAAjC,CAAZ,GAAqD,MAArE;AACD;;;;;;;uBAVU+G,e,EAAe,+H;AAAA,K;;;YAAfA,e;AAAe,iC;AAAA,c;AAAA,a;AAAA,kD;AAAA;AAAA;AAHf;;;;AAAK;;;;;;;;sEAGLA,e,EAAe;cAL3B,uDAK2B;eALjB;AACTjI,kBAAQ,EAAE,YADD;AAETmI,kBAAQ,EAAE,gDAFD;AAGTjI,mBAAS,EAAE,CAAC,wBAAD;AAHF,S;AAKiB,Q;;;;;;;;;;;;;;;;;;;;;;ACR5B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAeakI,Y;;;;;YAAAA;;;;yBAAAA,Y;AAAY,O;AAAA,gBARd,CACP,4DADO,EAEP,0EAFO,CAQc;;;;0HAAZA,Y,EAAY;AAAA,uBAHrB,iEAGqB;AAHN,kBAJf,4DAIe,EAHf,0EAGe;AAGM,O;AANF,K;;;;;sEAMVA,Y,EAAY;cATxB,sDASwB;eATf;AACR5K,iBAAO,EAAE,CACP,4DADO,EAEP,0EAFO,CADD;AAKR8C,sBAAY,EAAE,CACZ,iEADY;AALN,S;AASe,Q;;;;;;;;;;;;;;;;;;ACfzB;AAAA;;;AAAA;AAAA;AAAA;;AAAO,QAAM+H,QAAQ,GAAG,CACtB;AAAEC,YAAM,EAAE,WAAV;AACEC,aAAO,EAAE,SADX;AAEEC,aAAO,EAAE;AACPC,UAAE,EAAE;AAACC,mBAAS,EAAE,qCAAZ;AACCC,kBAAQ,EAAE;AADX;AADG;AAFX,KADsB,EAQtB;AAAEL,YAAM,EAAE,WAAV;AACEC,aAAO,EAAE,sCADX;AAEEC,aAAO,EAAE;AACPC,UAAE,EAAE;AAACC,mBAAS,EAAE,uDAAZ;AACFC,kBAAQ,EAAE;AADR;AADG;AAFX,KARsB,EAetB;AAAEL,YAAM,EAAE,SAAV;AACEC,aAAO,EAAE,YADX;AAEEC,aAAO,EAAE;AACPC,UAAE,EAAE;AAACC,mBAAS,EAAE,oBAAZ;AACFC,kBAAQ,EAAE;AADR;AADG;AAFX,KAfsB,EAsBtB;AAAEL,YAAM,EAAE,SAAV;AACEC,aAAO,EAAE,iBADX;AAEEC,aAAO,EAAE;AACPC,UAAE,EAAE;AACFC,mBAAS,EAAE,6DADT;AAEFC,kBAAQ,EAAE;AAFR;AADG;AAFX,KAtBsB,EA+BtB;AAAEL,YAAM,EAAE,SAAV;AACEC,aAAO,EAAE,WADX;AAEEC,aAAO,EAAE;AACPC,UAAE,EAAE;AACFC,mBAAS,EAAE,6CADT;AAEFC,kBAAQ,EAAE;AAFR;AADG;AAFX,KA/BsB,EAwCtB;AAAEL,YAAM,EAAE,MAAV;AACEC,aAAO,EAAE,SADX;AAEEC,aAAO,EAAE;AACPC,UAAE,EAAE;AAACC,mBAAS,EAAE,gCAAZ;AACFC,kBAAQ,EAAE;AADR;AADG;AAFX,KAxCsB,EA+CtB;AAAEL,YAAM,EAAE,MAAV;AACEC,aAAO,EAAE,kBADX;AAEEC,aAAO,EAAE;AACPC,UAAE,EAAE;AAACC,mBAAS,EAAE,iCAAZ;AACCC,kBAAQ,EAAE;AADX;AADG;AAFX,KA/CsB,EAsDtB;AAAEL,YAAM,EAAE,MAAV;AACEC,aAAO,EAAE,gBADX;AAEEC,aAAO,EAAE;AACPC,UAAE,EAAE;AAACC,mBAAS,EAAE,+BAAZ;AACFC,kBAAQ,EAAE;AADR;AADG;AAFX,KAtDsB,EA6DtB;AAAEL,YAAM,EAAE,MAAV;AACEC,aAAO,EAAE,oBADX;AAEEC,aAAO,EAAE;AACPC,UAAE,EAAE;AACFC,mBAAS,EAAE,4CADT;AAEFC,kBAAQ,EAAE;AAFR;AADG;AAFX,KA7DsB,EAsEtB;AAAEL,YAAM,EAAE,MAAV;AACEC,aAAO,EAAE,YADX;AAEEC,aAAO,EAAE;AACPC,UAAE,EAAE;AACFC,mBAAS,EAAE,qBADT;AAEFC,kBAAQ,EAAE;AAFR;AADG;AAFX,KAtEsB,CAAjB;;;;;;;;;;;;;;;;ACAP;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAOaC,iB;;;AAEX,mCAAc;AAAA;AAAG;;;;mCAEN,CACV;;;;;;;uBALUA,iB;AAAiB,K;;;YAAjBA,iB;AAAiB,oC;AAAA,c;AAAA,a;AAAA;AAAA;ACP9B;;AAAI;;AAAe;;;;;;;;sEDONA,iB,EAAiB;cAL7B,uDAK6B;eALnB;AACT5I,kBAAQ,EAAE,eADD;AAETC,qBAAW,EAAE,4BAFJ;AAGTC,mBAAS,EAAE,CAAC,2BAAD;AAHF,S;AAKmB,Q;;;;;;;;;;;;;;;;;;;;AEP9B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAAa2I,I;;;;QAIAC,O;;;;QAYAC,G;;;;QAQAC,a;;;;;;;;;;;;;;;;;;;ACxBb;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAOaC,Y;;;AAHb;AAAA;;AAIE,aAAA1J,IAAA,GAAc,EAAd;AACA,aAAArB,WAAA,GAAc,KAAd;AACQ,aAAAgL,kBAAA,GAAqB,IAAI,4CAAJ,EAArB;AACR,aAAAC,YAAA,GAAe,KAAKD,kBAAL,CAAwB5E,YAAxB,EAAf;AAOD;;;;0CALmBoD,M,EAAe;AAC/B,eAAKxJ,WAAL,GAAmBwJ,MAAnB;AACA,eAAKwB,kBAAL,CAAwBrE,IAAxB,CAA6B,KAAK3G,WAAlC;AACD;;;;;;;uBATU+K,Y;AAAY,K;;;aAAZA,Y;AAAY,eAAZA,YAAY,K;AAAA,kBAFX;;;;;sEAEDA,Y,EAAY;cAHxB,wDAGwB;eAHb;AACVvH,oBAAU,EAAE;AADF,S;AAGa,Q;;;;;;;;;;;;;;;;;;ACPzB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;ACSQ;;;;;;AAAkD;;;;;;;;AAClD;;AACO;AAAA;;AAAA;;AAAA;;AAAA;AAAA,WAAoC,UAApC,EAAoC;AAAA;;AAAA;;AAAA;AAAA,SAApC;;AADP;;;;;;AAGE;;AACE;;AAAkC;;AAAY;;AAChD;;;;;;AADK;;AAAA;;AAA+B;;AAAA;;;;;;AAFtC;;AACE;;;;AAGF;;;;;;AAHM;;AAAA;;;;;;AAKN;;AACE;;AAA2D;;AAC7D;;;;;;AAFqE;;AAC7D;;AAAA;;AAAqD;;AAAA;;;;;;;;;;;;;AAI3D;;;;;;AACM;;;;;;;;AAHR;;AAA+B;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAC7B;;AAA2D;;AAC3D;;AAGF;;;;;;AAJQ;;AAAA;;AAAqD;;AAAA;;AACrD;;AAAA;;;;;;;;;;;;AAMN;;AACE;;AAAkC;;AAAY;;AAChD;;;;;;AAFsC;;AACjC;;AAAA;;AAA+B;;AAAA;;;;;;;;;;;;;AAHtC;;AAEE;;AAGF;;;;;;AAJI;;AACE;;AAAA;;;;;;;;;;;;;;;AAzBR;;AAKE;;AACA;;AAEA;;AAMA;;AAGA;;AAMA;;AAMF;;;;;;;;AA5BI;;AAII;;AAAA;;AACC;;AAAA;;AAEH;;AAAA;;AAMD;;AAAA;;AAGA;;AAAA;;AAMC;;AAAA;;;;;;AAxBR;;AACE;;AA8BF;;;;;;AA9BM;;AAAA;;;;;;AAmCF;;AACE;;AACF;;;;;;AADQ;;AAAA;;;;;;;;AAUF;;AACE;;AAAkC;AAAA;;AAAA;;AAAA;AAAA;;AAAwB;;AAAY;;AACxE;;;;;;AADK;;AAAA;;AAAuD;;AAAA;;;;;;;;;;;;;;AATlE;;AAIE;;AACE;;AAAI;;AACO;AAAA;;AAAA;;AAAA;;AAAA;AAAA,WAAoC,UAApC,EAAoC;AAAA;;AAAA;;AAAA;AAAA,SAApC;;AADP;;AAC2E;;AAC/E;;AACE;;;;AAGF;;AACF;;AACF;;;;;;;;AAVK;;AADA;;AAMK;;AAAA;;;;;;;;;;;;AAMV;;;;;;AAEM;;AADyB;;;;;;AAG/B;;AACE;;AACF;;;;;;AAF6E;;AACrE;;AAAA;;;;;;AAER;;AACE;;AACF;;;;;;AADQ;;AAAA;;;;;;;;AAWF;;AACE;;AAAkC;AAAA;;AAAA;;AAAA;AAAA;;AAAwB;;AAAY;;AACxE;;;;;;AAFsC;;AACjC;;AAAA;;AAAuD;;AAAA;;;;;;AATlE;;AAKE;;AACE;;AAAI;;AAAG;;AAAiB;;AAAI;;AAC5B;;AACE;;AAGF;;AACF;;AACF;;;;;;AAXK,kGAA8B,QAA9B,EAA8B,mBAA9B,EAA8B,KAA9B;;AAEA;;AAEM;;AAAA;;AAED;;AAAA;;;;;;AAMV;;;;;;AAEM;;AADyB;;;;;;;;AA7CjC;;AACI;AAAA;;AAAA;;AAAA;;AAAA;AAAA,WAA+B,YAA/B,EAA+B;AAAA;;AAAA;;AAAA;;AAAA;AAAA,SAA/B,EAA+B,OAA/B,EAA+B;AAAA;;AAAA;;AAAA;;AAAA;AAAA,SAA/B;;AACF;;AAGA;;AAcA;;AAIA;;AAGA;;AAIA;;AAcA;;AAGF;;;;;;AA/C6E;;AAExE;;AAAA;;AAGE;;AAAA;;AAcC;;AAAA;;AAIH;;AAAA;;AAGA;;AAAA;;AAIE;;AAAA;;AAcC;;AAAA;;;;;;AA7CV;;AACE;;AAgDF;;;;;;AAhDM;;AAAA;;;;;;AAsDN;;AACE;;AACE;;AACE;;AAAgE;;AAClE;;AACF;;AACA;;AACE;;AACE;;AAA8D;;AAChE;;AACF;;AACF;;;;;;;;AACA;;AACE;;AAAI;AAAA;;AAAA;;AAAA,uCAA4B,CAA5B;AAA6B,SAA7B,EAA+B,YAA/B,EAA+B;AAAA;;AAAA;;AAAA,uCAA6B,CAA7B;AAA8B,SAA7D,EAA+B,OAA/B,EAA+B;AAAA;;AAAA;;AAAA,kCAAmD,CAAnD;AAAoD,SAAnF;;AACF;;AACE;;AACF;;AACF;;AACA;;AAAI;AAAA;;AAAA;;AAAA,uCAA4B,CAA5B;AAA6B,SAA7B,EAA+B,YAA/B,EAA+B;AAAA;;AAAA;;AAAA,uCAA6B,CAA7B;AAA8B,SAA7D,EAA+B,OAA/B,EAA+B;AAAA;;AAAA;;AAAA,kCAAmD,CAAnD;AAAoD,SAAnF;;AACF;;AACE;;AACF;;AACF;;AACF;;;;QDjGS0H,iB;;;AAmBX,iCAAoBxL,eAApB,EACoBI,cADpB,EAEoBH,YAFpB,EAGoBH,MAHpB,EAGkC;AAAA;;AAHd,aAAAE,eAAA,GAAAA,eAAA;AACA,aAAAI,cAAA,GAAAA,cAAA;AACA,aAAAH,YAAA,GAAAA,YAAA;AACA,aAAAH,MAAA,GAAAA,MAAA;AArBZ,aAAA2L,SAAA,GAAY,IAAZ;AACA,aAAAC,SAAA,GAAY,EAAZ;AACA,aAAAC,YAAA,GAAe,IAAf;AACA,aAAAC,SAAA,GAAY,IAAZ;AACA,aAAAC,GAAA,GAAM,CAAN;AACA,aAAAC,WAAA,GAAc,IAAI,6DAAJ,EAAd;AACA,aAAAC,WAAA,GAAc,IAAd;AACS,aAAAC,SAAA,GAAY,EAAZ,CAciB,CAdA;;AACjB,aAAAC,KAAA,GAAQ,GAAR,CAaiB,CAbH;;AAE/B,aAAA3L,WAAA,GAAc,KAAd;AACA,aAAA4L,IAAA,GAAa,IAAI,0CAAJ,EAAb;AAWgB;;;;mCAEL;AAAA;;AACT,eAAKL,GAAL,GAAWM,QAAQ,CAACvI,MAAM,CAACwI,gBAAP,CAAwBlH,QAAQ,CAACmH,IAAjC,EAAuCC,gBAAvC,CAAwD,WAAxD,CAAD,EAAuE,EAAvE,CAAnB;AACA,eAAKtM,eAAL,CAAqBuM,aAArB,GAAqC5L,SAArC,CAA+C,UAAA6L,KAAK;AAAA,mBAAI,MAAI,CAACC,gBAAL,CAAsBD,KAAtB,CAAJ;AAAA,WAApD;AACA,eAAKvM,YAAL,CAAkByM,iBAAlB,CAAoC,KAAKpM,WAAzC;AACA,eAAKqM,KAAL,GAAa,KAAKb,WAAL,CAAiB5K,IAAjB,CACX,oEAAa,GAAb,CADW,EAEX,6EAFW,EAGX,iEAAU,UAAC0L,IAAD,EAAkB;AAC1B,gBAAMC,OAAO,GAAG,6CAAaD,IAAb,EAAmB,MAAI,CAAC3M,YAAL,CAAkB0B,IAArC,EAA2C;AAACmL,iBAAG,EAAE;AAAN,aAA3C,CAAhB;AACA,gBAAMC,YAAY,GAAG,EAArB;AACAF,mBAAO,CAACG,OAAR,CAAgB,UAAApD,MAAM;AAAA,qBAAImD,YAAY,CAAChG,IAAb,CAAkB6C,MAAM,CAACqD,GAAzB,CAAJ;AAAA,aAAtB;AACA,mBAAO,gDAAGF,YAAH,CAAP;AACD,WALD,CAHW,CAAb;AAUA,eAAKJ,KAAL,CAAWhM,SAAX,CAAqB,UAAAuM,YAAY;AAAA,mBAAI,MAAI,CAACA,YAAL,GAAoBA,YAAxB;AAAA,WAAjC;AACD;;;yCAEgBV,K,EAAK;AAAA;;AACpB,cAAI,CAACA,KAAL,EAAY;AAAC;AAAS;;AAEtB,eAAKN,IAAL,GAAYM,KAAK,CAAC,CAAD,CAAjB,CAHoB,CAGE;;AACtB,cAAI,KAAKN,IAAL,CAAU,QAAV,CAAJ,EAAyB;AACvB,iBAAK9L,cAAL,CAAoB+M,aAApB;AACAX,iBAAK,CAACQ,OAAN,CAAe,UAAAI,GAAG;AAAA,qBAAI,MAAI,CAAChN,cAAL,CAAoBiN,GAApB,CAAwBD,GAAxB,CAAJ;AAAA,aAAlB;AACA,iBAAKtN,MAAL,CAAY2E,QAAZ,CAAqB,CAAC,QAAD,CAArB;AACD,WAJD,MAIO;AACL,iBAAKyH,IAAL,CAAUoB,UAAV,CAAqBN,OAArB,CAA6B,UAAAO,QAAQ,EAAI;AACvCA,sBAAQ,CAACC,MAAT,GAAkBD,QAAQ,CAACE,cAAT,GAA0B,CAACF,QAAQ,CAAC5L,IAAT,CAAcF,MAAd,GAAuB,CAAxB,IAA6B,CAA7B,GAAiC,CAA7E;AACA8L,sBAAQ,CAACG,MAAT,GAAkB,KAAlB;AACAH,sBAAQ,CAACI,aAAT,GAAyB,KAAzB;AACAJ,sBAAQ,CAAC5L,IAAT,CAAcqL,OAAd,CAAuB,UAAAnL,GAAG,EAAI;AAC5B,oBAAIA,GAAG,CAAC+L,UAAR,EAAoB;AAClB/L,qBAAG,CAAC2C,iBAAJ,GAAwB3C,GAAG,CAACC,SAA5B;AACAD,qBAAG,CAACC,SAAJ,GAAgB,mBAAmBD,GAAG,CAACyC,KAAvC;AACD;;AACDzC,mBAAG,CAAC6L,MAAJ,GAAa,KAAb;;AACA,sBAAI,CAACzN,YAAL,CAAkB0B,IAAlB,CAAuBoF,IAAvB,CAA4BlF,GAA5B;AACD,eAPD;;AAQA,kBAAI0L,QAAQ,CAAC5L,IAAT,CAAcF,MAAd,KAAyB,CAA7B,EAAgC;AAC9B8L,wBAAQ,CAACzL,SAAT,GAAqByL,QAAQ,CAAC5L,IAAT,CAAc,CAAd,EAAiBG,SAAtC;AACAyL,wBAAQ,CAAC5L,IAAT,GAAgB,EAAhB;AACD;AACF,aAhBD;AAiBD;AACF;;;kCAESiL,I,EAAY;AACpB,eAAKd,WAAL,CAAiB7E,IAAjB,CAAsB2F,IAAtB;AACA,eAAKb,WAAL,GAAmB,CAACa,IAApB;AACD;;;iCAEQ/G,M,EAAM;AACb,cAAIA,MAAM,CAACgI,OAAP,KAAmB,EAAnB,IAAyB,KAAKX,YAAL,CAAkB,CAAlB,CAA7B,EAAmD;AACjD,iBAAKpN,MAAL,CAAY2E,QAAZ,CAAqB,CAAC,KAAKyI,YAAL,CAAkB,CAAlB,EAAqBpL,SAAtB,CAArB;AACD;AACF;;;mCAEO;AAAA;AAAA;AAAA;;AAAA;AACN,iCAAuB,KAAKoK,IAAL,CAAUoB,UAAjC,8HAA6C;AAAA,kBAAlCC,QAAkC;AAC3CA,sBAAQ,CAACI,aAAT,GAAyB,KAAzB;AACD;AAHK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAIN,eAAK5B,WAAL,GAAmB,IAAnB;AACA,eAAKzL,WAAL,GAAmB,CAAC,KAAKA,WAAzB;AACA,eAAKL,YAAL,CAAkByM,iBAAlB,CAAoC,KAAKpM,WAAzC;AACA,iBAAO,KAAKA,WAAZ;AACD;;;wCAEewN,G,EAAG;AACjB,cAAMC,UAAU,GAAG,KAAKhM,QAAL,CAAciM,aAAd,CAA4BC,YAA5B,GAA2C,KAAKpC,GAAnE;AACA,cAAMqC,aAAa,GAAG,KAAKnM,QAAL,CAAciM,aAAd,CAA4BG,sBAA5B,CAAmD,cAAnD,EAAmE,CAAnE,EAAsEC,SAAtE,GAAkF,KAAKvC,GAA7G;;AACA,cAAIkC,UAAU,GAAG,CAAb,GAAiB,IAAID,GAArB,GAA2BI,aAA3B,IAA4C,KAAKhC,IAAL,CAAUoB,UAAV,CAAqBQ,GAArB,EAA0BL,cAA1E,EAA0F;AACxF,iBAAKvB,IAAL,CAAUoB,UAAV,CAAqBQ,GAArB,EAA0BO,GAA1B,GAAgC,IAAhC;;AACA,gBAAKN,UAAU,GAAG,CAAb,IAAkB,KAAK7B,IAAL,CAAUoB,UAAV,CAAqBQ,GAArB,EAA0BL,cAAjD,EAAiE;AAC/D,mBAAKvB,IAAL,CAAUoB,UAAV,CAAqBQ,GAArB,EAA0BN,MAA1B,GAAmCO,UAAU,GAAG,CAAhD;AACD,aAFD,MAEO;AACL,mBAAK7B,IAAL,CAAUoB,UAAV,CAAqBQ,GAArB,EAA0BN,MAA1B,GAAmC,KAAKtB,IAAL,CAAUoB,UAAV,CAAqBQ,GAArB,EAA0BL,cAA7D;AACD;AACF,WAPD,MAOO;AACL,iBAAKvB,IAAL,CAAUoB,UAAV,CAAqBQ,GAArB,EAA0BO,GAA1B,GAAgC,IAAI,IAAIP,GAAR,GAAcI,aAA9C;AACD;;AACD,eAAKhC,IAAL,CAAUoB,UAAV,CAAqBQ,GAArB,EAA0BQ,QAA1B,GAAqC,IAAI,IAAIR,GAAR,GAAcI,aAAnD;AACA,eAAKhC,IAAL,CAAUoB,UAAV,CAAqBQ,GAArB,EAA0BH,aAA1B,GAA0C,IAA1C;AACD;;;0CAEiBG,G,EAAG;AACnB,eAAK5B,IAAL,CAAUoB,UAAV,CAAqBQ,GAArB,EAA0BH,aAA1B,GAA0C,KAA1C;AACD;AAED;;;;;;0CAIkBhP,C,EAAG+M,S,EAAS;AAC5BA,mBAAS,CAAC3E,IAAV,CAAe;AAACwH,aAAC,EAAE5P,CAAC,CAAC6P,KAAN;AAAaC,aAAC,EAAE9P,CAAC,CAAC+P;AAAlB,WAAf;;AAEA,cAAIhD,SAAS,CAACjK,MAAV,GAAmB,CAAvB,EAA0B;AAAE;AAC1BiK,qBAAS,CAAC1E,KAAV;AACD;AACF;AAED;;;;;;yCAGc;AACZ,cAAI,KAAK4E,SAAT,EAAoB;AAClB+C,wBAAY,CAAC,KAAK/C,SAAN,CAAZ;AACD,WAHW,CAKZ;AACA;;;AACA,cAAI,KAAKH,SAAL,IAAkB,CAAC,KAAKmD,iBAAL,EAAvB,EAAiD;AAC/C,iBAAKC,iBAAL,CAAuB,KAAKpD,SAA5B;AACD;;AAED,eAAKA,SAAL,GAAiB,IAAjB;AACD;AAED;;;;;;4CAGiB;AACf,cAAI,CAAC,KAAKA,SAAV,EAAqB;AAAE,mBAAO,KAAP;AAAe;;AAEtC,cAAMqD,IAAI,GAAG,KAAK/M,QAAL,CAAciM,aAA3B;AACA,cAAMe,MAAM,GAAG;AACbC,gBAAI,EAAEF,IAAI,CAACG,UADE;AAEbZ,eAAG,EAAES,IAAI,CAACI;AAFG,WAAf;AAIA,cAAMC,SAAS,GAAG;AAChBZ,aAAC,EAAEQ,MAAM,CAACC,IAAP,GAAcF,IAAI,CAACM,WADN;AAEhBX,aAAC,EAAE,KAAKvC,IAAL,CAAUoB,UAAV,CAAqB,KAAK7B,SAA1B,EAAqC4C,GAArC,GAA2C,KAAKxC;AAFnC,WAAlB;AAIA,cAAMwD,UAAU,GAAG;AACjBd,aAAC,EAAEY,SAAS,CAACZ,CAAV,GAAc,KAAK1C,GADL;AAEjB4C,aAAC,EAAEU,SAAS,CAACV;AAFI,WAAnB;AAIA,cAAMa,SAAS,GAAG;AAChBf,aAAC,EAAEQ,MAAM,CAACC,IAAP,GAAcF,IAAI,CAACM,WADN;AAEhBX,aAAC,EAAEU,SAAS,CAACV,CAAV,GAAc,KAAKvC,IAAL,CAAUoB,UAAV,CAAqB,KAAK7B,SAA1B,EAAqC+B,MAArC,GAA8C,KAAK3B;AAFpD,WAAlB;AAIA,cAAM0D,UAAU,GAAG;AACjBhB,aAAC,EAAEe,SAAS,CAACf,CAAV,GAAc,KAAK1C,GADL;AAEjB4C,aAAC,EAAEa,SAAS,CAACb;AAFI,WAAnB;AAIA,cAAMe,GAAG,GAAG,KAAK9D,SAAL,CAAe,KAAKA,SAAL,CAAejK,MAAf,GAAwB,CAAvC,CAAZ;AACA,iBAAQ+N,GAAG,KAAMA,GAAG,CAACjB,CAAJ,IAASc,UAAU,CAACd,CAApB,IAAyBiB,GAAG,CAACf,CAAJ,IAASc,UAAU,CAACd,CAA7C,IAAkDe,GAAG,CAACf,CAAJ,IAASY,UAAU,CAACZ,CAAvE,IACVe,GAAG,CAACjB,CAAJ,IAASY,SAAS,CAACZ,CAAnB,IAAwBiB,GAAG,CAACf,CAAJ,IAASM,MAAM,CAACV,GAAxC,IAA+CmB,GAAG,CAACf,CAAJ,IAASM,MAAM,CAACV,GAAP,GAAaS,IAAI,CAACb,YADrE,CAAX;AAED;AAED;;;;;;sCAGcH,G,EAAG;AACf,cAAI,KAAKlC,SAAT,EAAoB;AAClB;AACA+C,wBAAY,CAAC,KAAK/C,SAAN,CAAZ;AACD;;AACD,eAAK6D,gBAAL,CAAsB3B,GAAtB;AACD;AAED;;;;;;sCAGcA,G,EAAG;AACf,cAAI,CAAC,KAAKc,iBAAL,EAAL,EAA+B;AAC7B,iBAAKC,iBAAL,CAAuBf,GAAvB;AACD;AACF;AAED;;;;;;;oCAIYjM,G,EAAU;AACpB;AACA,cAAI6N,MAAM,GAAG,CAAC,CAAd;AACA,cAAIC,UAAU,GAAG,KAAKzD,IAAL,CAAUoB,UAAV,CAAqBsC,SAArB,CAA+B,UAAArC,QAAQ;AAAA,mBAAIA,QAAQ,CAACG,MAAT,KAAoB,IAAxB;AAAA,WAAvC,CAAjB;;AACA,cAAIiC,UAAU,GAAG,CAAC,CAAlB,EAAsB;AACpB,iBAAKzD,IAAL,CAAUoB,UAAV,CAAqBqC,UAArB,EAAiCjC,MAAjC,GAA0C,KAA1C;;AACA,gBAAI,CAAC,KAAKxB,IAAL,CAAUoB,UAAV,CAAqBqC,UAArB,EAAiC7N,SAAtC,EAAiD;AAC/C4N,oBAAM,GAAG,KAAKxD,IAAL,CAAUoB,UAAV,CAAqBqC,UAArB,EAAiChO,IAAjC,CAAsCiO,SAAtC,CAAgD,UAAAC,IAAI;AAAA,uBAAIA,IAAI,CAACnC,MAAL,KAAgB,IAApB;AAAA,eAApD,CAAT;;AACA,kBAAIgC,MAAM,GAAG,CAAC,CAAd,EAAiB;AACf,qBAAKxD,IAAL,CAAUoB,UAAV,CAAqBqC,UAArB,EAAiChO,IAAjC,CAAsC+N,MAAtC,EAA8ChC,MAA9C,GAAuD,KAAvD;AACD;AACF;AACF,WAZmB,CAapB;;;AACAiC,oBAAU,GAAG,KAAKzD,IAAL,CAAUoB,UAAV,CAAqBsC,SAArB,CAA+B,UAAArC,QAAQ,EAAI;AACtD,gBAAKA,QAAQ,CAACzL,SAAT,KAAuBD,GAAG,CAACC,SAAhC,EAA4C;AAC1C,qBAAO,IAAP;AACD,aAFD,MAEO;AACL4N,oBAAM,GAAGnC,QAAQ,CAAC5L,IAAT,CAAciO,SAAd,CAAyB,UAAAC,IAAI;AAAA,uBAAIA,IAAI,CAAC/N,SAAL,KAAmBD,GAAG,CAACC,SAA3B;AAAA,eAA7B,CAAT;AACA,qBAAO4N,MAAM,GAAG,CAAC,CAAjB;AACD;AAAC,WANS,CAAb;;AAOA,cAAIC,UAAU,GAAG,CAAC,CAAlB,EAAqB;AACnB,iBAAKzD,IAAL,CAAUoB,UAAV,CAAqBqC,UAArB,EAAiCjC,MAAjC,GAA0C,IAA1C;;AACA,gBAAIgC,MAAM,GAAG,CAAC,CAAd,EAAiB;AACf,mBAAKxD,IAAL,CAAUoB,UAAV,CAAqBqC,UAArB,EAAiChO,IAAjC,CAAsC+N,MAAtC,EAA8ChC,MAA9C,GAAuD,IAAvD;AACD;AACF;AACF;AAED;;;;;;iCAGSI,G,EAAG;AACV,cAAI,KAAKxN,WAAT,EAAsB;AACpB,iBAAKwP,QAAL,CAAchC,GAAd;AACD,WAFD,MAEO;AACL,iBAAK5B,IAAL,CAAUoB,UAAV,CAAqBQ,GAArB,EAA0BH,aAA1B,GAA0C,CAAC,KAAKzB,IAAL,CAAUoB,UAAV,CAAqBQ,GAArB,EAA0BH,aAArE;AACD;AACF;AAED;;;;;;sCAGW;AACT,eAAKzB,IAAL,CAAUoB,UAAV,CAAqB,KAAK7B,SAA1B,EAAqCkC,aAArC,GAAqD,KAArD;AACD;AAED;;;;;;iCAGSG,G,EAAG;AACV,cAAIA,GAAG,KAAK,KAAKrC,SAAjB,EAA4B;AAC1B;AACD;;AAED,cAAI,KAAKA,SAAT,EAAoB;AAClB,iBAAKoD,iBAAL,CAAuB,KAAKpD,SAA5B;AACD;;AAED,eAAKsE,eAAL,CAAqBjC,GAArB;AACA,eAAKrC,SAAL,GAAiBqC,GAAjB;AACD;AAED;;;;;;;;yCAKiBA,G,EAAG;AAAA;;AAClB,cAAMkC,KAAK,GAAG,KAAKC,eAAL,EAAd;;AAEA,cAAID,KAAJ,EAAW;AACT,iBAAKpE,SAAL,GAAiBsE,UAAU,CAAC;AAAA,qBAAM,MAAI,CAACT,gBAAL,CAAsB3B,GAAtB,CAAN;AAAA,aAAD,EAAmCkC,KAAnC,CAA3B;AACD,WAFD,MAEO;AACL,iBAAKF,QAAL,CAAchC,GAAd;AACD;AACF;AAED;;;;;;;;;;;0CAQe;AAEb,cAAI,CAAC,KAAKrC,SAAV,EAAqB;AACnB;AACA;AACA,mBAAO,CAAP;AACD;;AAED,cAAMqD,IAAI,GAAG,KAAK/M,QAAL,CAAciM,aAA3B;AACA,cAAMnC,GAAG,GAAGM,QAAQ,CAACvI,MAAM,CAACwI,gBAAP,CAAwBlH,QAAQ,CAACmH,IAAjC,EAAuCC,gBAAvC,CAAwD,WAAxD,CAAD,EAAuE,EAAvE,CAApB;AACA,cAAMyC,MAAM,GAAG;AACbC,gBAAI,EAAEF,IAAI,CAACG,UADE;AAEbZ,eAAG,EAAES,IAAI,CAACI;AAFG,WAAf;AAIA,cAAMC,SAAS,GAAG;AAChBZ,aAAC,EAAEQ,MAAM,CAACC,IADM;AAEhBP,aAAC,EAAE,KAAKvC,IAAL,CAAUoB,UAAV,CAAqB,KAAK7B,SAA1B,EAAqC4C,GAArC,GAA2CxC,GAA3C,GAAiD,KAAKG;AAFzC,WAAlB;AAIA,cAAMqD,UAAU,GAAG;AACjBd,aAAC,EAAEQ,MAAM,CAACC,IAAP,GAAcF,IAAI,CAACM,WAAnB,GAAiCvD,GADnB;AAEjB4C,aAAC,EAAEU,SAAS,CAACV;AAFI,WAAnB;AAIA,cAAMa,SAAS,GAAG;AAChBf,aAAC,EAAEQ,MAAM,CAACC,IADM;AAEhBP,aAAC,EAAEU,SAAS,CAACV,CAAV,GAAc,KAAKvC,IAAL,CAAUoB,UAAV,CAAqB,KAAK7B,SAA1B,EAAqC+B,MAArC,GAA8C3B;AAF/C,WAAlB;AAIA,cAAM0D,UAAU,GAAG;AACjBhB,aAAC,EAAEQ,MAAM,CAACC,IAAP,GAAcF,IAAI,CAACM,WAAnB,GAAiCvD,GADnB;AAEjB4C,aAAC,EAAEa,SAAS,CAACb;AAFI,WAAnB;AAIA,cAAMe,GAAG,GAAG,KAAK9D,SAAL,CAAe,KAAKA,SAAL,CAAejK,MAAf,GAAwB,CAAvC,CAAZ;AAEA,cAAI0O,OAAO,GAAG,KAAKzE,SAAL,CAAe,CAAf,CAAd;;AAEA,cAAI,CAAC8D,GAAL,EAAU;AACR,mBAAO,CAAP;AACD;;AAED,cAAI,CAACW,OAAL,EAAc;AACZA,mBAAO,GAAGX,GAAV;AACD;;AAED,cAAIW,OAAO,CAAC5B,CAAR,GAAYQ,MAAM,CAACC,IAAnB,IAA2BmB,OAAO,CAAC5B,CAAR,GAAYgB,UAAU,CAAChB,CAAlD,IACF4B,OAAO,CAAC1B,CAAR,GAAYM,MAAM,CAACV,GADjB,IACwB8B,OAAO,CAAC1B,CAAR,GAAYc,UAAU,CAACd,CADnD,EACsD;AACpD;AACA;AACA,mBAAO,CAAP;AACD;;AAED,cAAI,KAAK9C,YAAL,IACF6D,GAAG,CAACjB,CAAJ,KAAU,KAAK5C,YAAL,CAAkB4C,CAD1B,IAC+BiB,GAAG,CAACf,CAAJ,KAAU,KAAK9C,YAAL,CAAkB8C,CAD/D,EACkE;AAChE;AACA;AACA,mBAAO,CAAP;AACD,WAtDY,CAwDb;AACA;;;AACA,mBAAS2B,KAAT,CAAeC,CAAf,EAAkBC,CAAlB,EAAqB;AACnB,mBAAO,CAACA,CAAC,CAAC7B,CAAF,GAAM4B,CAAC,CAAC5B,CAAT,KAAe6B,CAAC,CAAC/B,CAAF,GAAM8B,CAAC,CAAC9B,CAAvB,CAAP;AACD;;AAED,cAAMgC,gBAAgB,GAAGlB,UAAzB;AAAA,cACEmB,gBAAgB,GAAGjB,UADrB;AAGA,cAAMkB,eAAe,GAAGL,KAAK,CAACZ,GAAD,EAAMe,gBAAN,CAA7B;AAAA,cACEG,eAAe,GAAGN,KAAK,CAACZ,GAAD,EAAMgB,gBAAN,CADzB;AAAA,cAEEG,mBAAmB,GAAGP,KAAK,CAACD,OAAD,EAAUI,gBAAV,CAF7B;AAAA,cAGEK,mBAAmB,GAAGR,KAAK,CAACD,OAAD,EAAUK,gBAAV,CAH7B;;AAKA,cAAIC,eAAe,GAAGE,mBAAlB,IACFD,eAAe,GAAGE,mBADpB,EACyC;AACvC;AACA;AACA;AACA,iBAAKjF,YAAL,GAAoB6D,GAApB;AACA,mBAAO,KAAKvD,KAAZ;AACD;;AAED,eAAKN,YAAL,GAAoB,IAApB;AACA,iBAAO,CAAP;AACD;;;;;;;uBA7WUH,iB,EAAiB,kI,EAAA,kI,EAAA,4H,EAAA,uH;AAAA,K;;;YAAjBA,iB;AAAiB,oC;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;ACjB9B;;AAAiF;AAAA,mBAAc,IAAAqF,cAAA,EAAd;AAA8B,WAA9B;;AAC/E;;AAEE;;AAiCA;;AAkDF;;AAEA;;AAEA;;AACE;;AAYA;;AAYF;;AAEF;;;;AArHoC;;AAG5B;;AAAA;;AAiCA;;AAAA;;AAuDA;;AAAA;;AAYA;;AAAA;;;;;;;;;;sEDtFKrF,iB,EAAiB;cAL7B,uDAK6B;eALnB;AACTpJ,kBAAQ,EAAE,eADD;AAETC,qBAAW,EAAE,4BAFJ;AAGTC,mBAAS,EAAE,CAAC,2BAAD;AAHF,S;AAKmB,Q;;;;;;;;;;;;gBAgB3B,uD;iBAAU,U,EAAY;AAAE,sBAAQ;AAAV,W;;;gBAoGtB,0D;iBAAa,oB,EAAsB,CAAC,QAAD,EAAW,WAAX,C;;;;;;;;;;;;;;;;;;;;AEnItC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAIO,aAASwO,yBAAT,CAAmC9Q,eAAnC,EACmCI,cADnC,EAEmC0H,MAFnC,EAEiD;AACtD,aAAO,UAACiJ,OAAD,EAAsG;AAC3G,eAAO,mDAAM,GAAN,EAAW7P,IAAX,CACL,iEAAW;AAAA,iBAAMlB,eAAe,CAACgR,iBAAhB,CAAkCD,OAAO,CAACE,KAA1C,EAAiD/P,IAAjD,CACf,2DAAI,UAAAN,IAAI,EAAI;AACV,gBAAIA,IAAI,CAAC,QAAD,CAAJ,IAAkBA,IAAI,CAAC,QAAD,CAAJ,CAAe,CAAf,EAAkB,SAAlB,MAAiCkH,MAAvD,EAA+D;AAC7D,qBAAO;AAACpE,uBAAO,EAAEtD,cAAc,CAAC8Q,eAAf,CAA+B,MAA/B,EAAuC,kBAAvC,EACb,GADa,EACRH,OAAO,CAACE,KADA,EACOE;AADjB,eAAP;AAED,aAHD,MAGO;AACL,qBAAO,IAAP;AACD;AACF,WAPD,CADe,CAAN;AAAA,SAAX,CADK,CAAP;AAWD,OAZD;AAaD;;AAEM,aAASC,uBAAT,CAAiCpR,eAAjC,EACmCI,cADnC,EACiE;AACtE,aAAO,UAAC2Q,OAAD,EAAsG;AAC3G,eAAO,mDAAM,GAAN,EAAW7P,IAAX,CACL,iEAAW;AAAA,iBAAMlB,eAAe,CAACqR,eAAhB,CAAgCN,OAAO,CAACE,KAAxC,EAA+C/P,IAA/C,CACf,2DAAI,UAAAN,IAAI,EAAI;AACV,gBAAIA,IAAI,CAAC,QAAD,CAAJ,IAAkBA,IAAI,CAAC,QAAD,CAAJ,CAAe,CAAf,EAAkB,SAAlB,MAAiCmQ,OAAO,CAACE,KAA/D,EAAsE;AACpE,qBAAO;AAACvN,uBAAO,EAAEtD,cAAc,CAAC8Q,eAAf,CAA+B,MAA/B,EAAuC,gBAAvC,EACb,GADa,EACRH,OAAO,CAACE,KADA,EACOE;AADjB,eAAP;AAED,aAHD,MAGO;AACL,qBAAO,IAAP;AACD;AACF,WAPD,CADe,CAAN;AAAA,SAAX,CADK,CAAP;AAWD,OAZD;AAaD;;;;;;;;;;;;;;;;;ACvCD;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;ACEI;;AACE;;AACQ;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AACN;;AAAyB;;AAAO;;AAClC;;AACA;;AACE;;AAKA;;AAKA;;AACE;;AAAiE;;AAAO;;AACxE;;AACF;;AACA;;AAKA;;AAKA;;AAKF;;AACF;;;;;;;;AA/B6B;;AAAA;;AAED;;AAAA,yHAA8C,WAA9C,EAA8C,oBAA9C,EAA8C,UAA9C,EAA8C,iBAA9C;;AAKA;;AAAA,kIAAuD,WAAvD,EAAuD,oBAAvD,EAAuD,UAAvD,EAAuD,iBAAvD;;AAMuC;;AAAA;;AAGvC;;AAAA,6HAAkD,WAAlD,EAAkD,oBAAlD,EAAkD,UAAlD,EAAkD,iBAAlD;;AAKA;;AAAA,yHAA8C,WAA9C,EAA8C,oBAA9C,EAA8C,UAA9C,EAA8C,iBAA9C;;AAKA;;AAAA,4HAAiD,WAAjD,EAAiD,oBAAjD,EAAiD,UAAjD,EAAiD,iBAAjD;;;;QDxBnBG,oB;;;AAOX,oCAAoBC,EAApB,EACoBC,uBADpB,EACsE;AAAA;;AADlD,aAAAD,EAAA,GAAAA,EAAA;AACA,aAAAC,uBAAA,GAAAA,uBAAA;AAAqD;;;;mCAE9D;AACT,eAAKC,oBAAL,GAA4B,KAAKC,QAAL,CAAcpO,GAAd,CAAkB,WAAlB,CAA5B;AACA,eAAKqO,SAAL,GAAiB,KAAKH,uBAAL,CAA6BI,kBAA7B,CACf,KAAKC,aAAL,CAAmBjQ,IAAnB,CAAyB,UAAAkQ,YAAY;AAAA,mBAAIA,YAAY,CAACtK,WAAb,KAA6B,WAAjC;AAAA,WAArC,EAAmFuK,UADpE,CAAjB;AAED;;;0CAEiBC,S,EAAiB;AACjC,iBAAO,KAAKL,SAAL,CAAe/P,IAAf,CAAqB,UAAAqQ,QAAQ;AAAA,mBAAIA,QAAQ,CAACzL,IAAT,KAAkBwL,SAAtB;AAAA,WAA7B,CAAP;AACD;;;qCAEY;AACX,cAAME,gBAAgB,GAAG,KAAKX,EAAL,CAAQY,KAAR,CAAc;AACrCC,sBAAU,EAAE,CAAC,EAAD,CADyB;AAErCC,gBAAI,EAAE,CAAC,EAAD,EAAK,CAAC,0DAAWC,QAAZ,CAAL,CAF+B;AAGrCC,yBAAa,EAAE,CAAC,EAAD,EAAK,CAAC,0DAAWD,QAAZ,CAAL,CAHsB;AAIrCE,oBAAQ,EAAE,CAAC,EAAD,CAJ2B;AAKrCC,gBAAI,EAAE,CAAC,EAAD,CAL+B;AAMrCC,mBAAO,EAAE,CAAC,EAAD,CAN4B;AAOrCC,mBAAO,EAAE;AAP4B,WAAd,CAAzB;;AASA,cAAI,KAAKlB,oBAAL,CAA0BhQ,MAA1B,KAAqC,CAAzC,EAA4C;AAC1CyQ,4BAAgB,CAAC5O,GAAjB,CAAqB,SAArB,EAAgCsP,QAAhC,CAAyC,CAAzC;AACAV,4BAAgB,CAAC5O,GAAjB,CAAqB,SAArB,EAAgCuP,WAAhC;AACD;;AACD,eAAKpB,oBAAL,CAA0B1K,IAA1B,CAA+BmL,gBAA/B;AACD;;;sCAEaY,K,EAAe;AAC3B,cAAI,KAAKrB,oBAAL,CAA0BhQ,MAA1B,GAAmC,CAAnC,IACA,KAAKgQ,oBAAL,CAA0BsB,EAA1B,CAA6BD,KAA7B,EAAoC7B,KAApC,CAA0C,SAA1C,CADJ,EAC0D;AACxD,gBAAM+B,eAAe,GAAGF,KAAK,KAAK,CAAV,GAAc,CAAd,GAAkB,CAA1C;AACA,iBAAKrB,oBAAL,CAA0BsB,EAA1B,CAA6BC,eAA7B,EAA8C1P,GAA9C,CAAkD,SAAlD,EAA6DsP,QAA7D,CAAsE,CAAtE;AACA,iBAAKnB,oBAAL,CAA0BsB,EAA1B,CAA6BC,eAA7B,EAA8C1P,GAA9C,CAAkD,SAAlD,EAA6DuP,WAA7D;AACD;;AACD,eAAKpB,oBAAL,CAA0BwB,QAA1B,CAAmCH,KAAnC;AACA,eAAKrB,oBAAL,CAA0BoB,WAA1B;AACD;;;;;;;uBA9CUvB,oB,EAAoB,2H,EAAA,oI;AAAA,K;;;YAApBA,oB;AAAoB,uC;AAAA;AAAA;AAAA;AAAA;AAAA,O;AAAA,c;AAAA,a;AAAA,k4B;AAAA;AAAA;ACTjC;;AACE;;AACE;;AAqCA;;AAAyF;AAAA,mBAAS,IAAA4B,UAAA,EAAT;AAAqB,WAArB;;AAAuB;;AAAG;;AACrH;;AACF;;;;AAvCS;;AAAA;;AAqC8D;;AAAA;;;;;;;;;sED9B1D5B,oB,EAAoB;cALhC,uDAKgC;eALtB;AACTlP,kBAAQ,EAAE,kBADD;AAETC,qBAAW,EAAE,+BAFJ;AAGTC,mBAAS,EAAE,CAAC,8BAAD;AAHF,S;AAKsB,Q;;;;;;;;gBAC9B;;;gBACA;;;gBACA;;;;;;;;;;;;;;;;;;;;AEZH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QASa6Q,kB;;;AAQX,kCAAoB3B,uBAApB,EAAsE;AAAA;;AAAlD,aAAAA,uBAAA,GAAAA,uBAAA;AAAqD;;;;mCAE9D;AACT,eAAK4B,kBAAL,GAA0B,KAAK1B,QAAL,CAAcpO,GAAd,CAAkB,iBAAlB,CAA1B;AACA,eAAK+P,qBAAL,GAA6B,KAAK3B,QAAL,CAAcpO,GAAd,CAAkB,oBAAlB,CAA7B;AACA,eAAKqO,SAAL,GAAiB,KAAKH,uBAAL,CAA6BI,kBAA7B,CACf,KAAKC,aAAL,CAAmBjQ,IAAnB,CAAyB,UAAAkQ,YAAY;AAAA,mBAAIA,YAAY,CAACtK,WAAb,KAA6B,YAAjC;AAAA,WAArC,EAAoFuK,UADrE,CAAjB;AAEA,eAAKJ,SAAL,GAAiB,KAAKA,SAAL,CAAe2B,MAAf,CAAsB,KAAK9B,uBAAL,CAA6BI,kBAA7B,CACrC,KAAKC,aAAL,CAAmBjQ,IAAnB,CAAyB,UAAAkQ,YAAY;AAAA,mBAAIA,YAAY,CAACtK,WAAb,KAA6B,QAAjC;AAAA,WAArC,EAAgFuK,UAD3C,CAAtB,CAAjB;AAED;;;0CAEiBC,S,EAAiB;AACjC,iBAAO,KAAKL,SAAL,CAAe/P,IAAf,CAAqB,UAAAqQ,QAAQ;AAAA,mBAAIA,QAAQ,CAACzL,IAAT,KAAkBwL,SAAtB;AAAA,WAA7B,CAAP;AACD;;;;;;;uBArBUmB,kB,EAAkB,oI;AAAA,K;;;YAAlBA,kB;AAAkB,qC;AAAA;AAAA;AAAA;AAAA;AAAA,O;AAAA,e;AAAA,c;AAAA,4M;AAAA;AAAA;ACT/B;;AACE;;AAAyB;;AAAI;;AAC7B;;AACE;;AACE;;AAKA;;AAKA;;AACA;;AAKA;;AAKA;;AAKF;;AACF;;AACF;;AAEA;;AACE;;AAAyB;;AAAQ;;AACjC;;AACE;;AACE;;AAKA;;AAKA;;AAKA;;AAKF;;AACF;;AACF;;;;AAvD8B;;AAAA,2HAAmD,WAAnD,EAAmD,sBAAnD,EAAmD,UAAnD,EAAmD,YAAnD;;AAKA;;AAAA,8HAAsD,WAAtD,EAAsD,sBAAtD,EAAsD,UAAtD,EAAsD,YAAtD;;AAMA;;AAAA,4HAAoD,WAApD,EAAoD,sBAApD,EAAoD,UAApD,EAAoD,YAApD;;AAKA;;AAAA,6HAAqD,WAArD,EAAqD,sBAArD,EAAqD,UAArD,EAAqD,YAArD;;AAKA;;AAAA,6HAAqD,WAArD,EAAqD,sBAArD,EAAqD,UAArD,EAAqD,YAArD;;AAaA;;AAAA,4HAAoD,WAApD,EAAoD,yBAApD,EAAoD,UAApD,EAAoD,YAApD;;AAKA;;AAAA,+HAAuD,WAAvD,EAAuD,yBAAvD,EAAuD,UAAvD,EAAuD,YAAvD;;AAKA;;AAAA,uHAA+C,WAA/C,EAA+C,yBAA/C,EAA+C,UAA/C,EAA+C,YAA/C;;AAKA;;AAAA,wHAAgD,WAAhD,EAAgD,yBAAhD,EAAgD,UAAhD,EAAgD,YAAhD;;;;;;;;;sED7CjBA,kB,EAAkB;cAL9B,uDAK8B;eALpB;AACT/Q,kBAAQ,EAAE,gBADD;AAETC,qBAAW,EAAE,6BAFJ;AAGTC,mBAAS,EAAE,CAAC,4BAAD;AAHF,S;AAKoB,Q;;;;;;gBAC5B;;;gBACA;;;gBACA;;;;;;;;;;;;;;;;;;;;AEZH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACOM;;AAA4C;;AAAI;;;;;;AAChD;;AAAgD;;AAAO;;;;;;AAsBrD;;AAA+D;;AAAM;;;;;;AACrE;;AAAoE;;AAAQ;;;;;;AAM5E;;AACE;;AAAkC;;AAAO;;AAC3C;;;;;;AACA;;AACE;;AAAkC;;AAAM;;AAC1C;;;;;;AACA;;AACE;;AAAkC;;AAAK;;AACzC;;;;;;AAwBJ;;;;;;AAAkC,+FAAqB,eAArB,EAAqB,qBAArB,EAAqB,UAArB,EAAqB,gBAArB;;;;;;AAClC;;;;;;AAAkC,+FAAqB,eAArB,EAAqB,qBAArB,EAAqB,UAArB,EAAqB,gBAArB;;;;;;AAClC;;;;;;AAAoC,+FAAqB,eAArB,EAAqB,qBAArB,EAAqB,UAArB,EAAqB,gBAArB;;;;;;AACpC;;;;;;AAA4C,+FAAqB,eAArB,EAAqB,qBAArB,EAAqB,UAArB,EAAqB,gBAArB;;;;;;AAC5C;;;;;;AAAiC,+FAAqB,UAArB,EAAqB,gBAArB;;;;;;;;AArDrC;;AACE;;AACE;;AAKA;;AACE;;AAA6D;;AAAY;;AACzE;;AACE;;AACA;;AACF;;AACF;;AACA;;AACE;;AAAiE;;AAAgB;;AACjF;;AACE;;AAGA;;AAGA;;AAGF;;AACF;;AACF;;AAEA;;AACE;;AACE;;AAA6E;AAAA;;AAAA;;AAAA,wCAAwB,CAAxB;AAAyB,SAAzB;;AAA4B;;AAAK;;AAChH;;AACA;;AACE;;AAA6E;AAAA;;AAAA;;AAAA,wCAAwB,CAAxB;AAAyB,SAAzB;;AAA4B;;AAAK;;AAChH;;AACA;;AACE;;AAA6E;AAAA;;AAAA;;AAAA,wCAAwB,CAAxB;AAAyB,SAAzB;;AAA4B;;AAAO;;AAClH;;AACA;;AACE;;AAA6E;AAAA;;AAAA;;AAAA,wCAAwB,CAAxB;AAAyB,SAAzB;;AAA4B;;AAAe;;AAC1H;;AACA;;AACE;;AAA6E;AAAA;;AAAA;;AAAA,yCAAwB,CAAxB;AAAyB,SAAzB;;AAA4B;;AAAI;;AAC/G;;AACF;;AAEA;;AACE;;AACA;;AACA;;AACA;;AACA;;AACF;;AACF;;;;;;AApD4B;;AAAA,2HAAiD,WAAjD,EAAiD,gBAAjD,EAAiD,UAAjD,EAAiD,kBAAjD;;AAI2B;;AAAA;;AAGzC;;AAAA;;AACA;;AAAA;;AAGyC;;AAAA;;AAEK;;AAAA;;AAI/C;;AAAA;;AAGA;;AAAA;;AASa;;AAAA;;AAGA;;AAAA;;AAGA;;AAAA;;AAGA;;AAAA;;AAGA;;AAAA;;AAIN;;AAAA;;AACA;;AAAA;;AACA;;AAAA;;AACE;;AAAA;;AACQ;;AAAA;;AACX;;AAAA;;;;QDlDNiR,mB;;;AAyBX,mCAAoBhC,EAApB,EACoBnQ,KADpB,EAEoBtB,MAFpB,EAGoB0T,aAHpB,EAIoBxT,eAJpB,EAKoBwR,uBALpB,EAMoBrR,aANpB,EAOoBsT,eAPpB,EAQoBrT,cARpB,EAQoD;AAAA;;AARhC,aAAAmR,EAAA,GAAAA,EAAA;AACA,aAAAnQ,KAAA,GAAAA,KAAA;AACA,aAAAtB,MAAA,GAAAA,MAAA;AACA,aAAA0T,aAAA,GAAAA,aAAA;AACA,aAAAxT,eAAA,GAAAA,eAAA;AACA,aAAAwR,uBAAA,GAAAA,uBAAA;AACA,aAAArR,aAAA,GAAAA,aAAA;AACA,aAAAsT,eAAA,GAAAA,eAAA;AACA,aAAArT,cAAA,GAAAA,cAAA;AA7BpB,aAAAsT,QAAA,GAAW,IAAX;AACA,aAAAC,SAAA,GAAY,KAAZ;AAGA,aAAAC,iBAAA,GAAoB,EAApB;AACA,aAAAC,WAAA,GAAc,EAAd;AACA,aAAAC,QAAA,GAAW,CAAX;AAwBC;;;;mCAEU;AAAA;;AACT,eAAK1S,KAAL,CAAWgD,QAAX,CAAoBlD,IAApB,CACE,iEAAU,UAACmD,MAAD,EAAsB;AAC9B,mBAAI,CAAC0P,MAAL,GAAc1P,MAAM,CAACf,GAAP,CAAW,QAAX,CAAd;;AACA,gBAAI,OAAI,CAACyQ,MAAL,KAAgB,KAApB,EAA2B;AACzB,qBAAI,CAACJ,SAAL,GAAiB,IAAjB;AACA,qBAAO,sDACL,CAAC,OAAI,CAACxT,aAAL,CAAmB6T,uBAAnB,CAA2C,QAA3C,CAAD,EAAuD,OAAI,CAACC,cAAL,EAAvD,CADK,CAAP;AAED,aAJD,MAIO;AACL,qBAAI,CAACN,SAAL,GAAiB,KAAjB;AACA,qBAAO,sDACL,CAAC,OAAI,CAACxT,aAAL,CAAmB6T,uBAAnB,CAA2C,QAA3C,CAAD,EACA,OAAI,CAAChU,eAAL,CAAqBkU,aAArB,CAAmC7P,MAAM,CAACf,GAAP,CAAW,QAAX,CAAnC,CADA,CADK,CAAP;AAGD;AACF,WAZD,CADF,EAcE3C,SAdF,CAca,UAAAC,IAAI,EAAI;AACnB,mBAAI,CAACiR,aAAL,GAAqBjR,IAAI,CAAC,CAAD,CAAzB;AACA,mBAAI,CAAC+Q,SAAL,GAAiB,OAAI,CAACH,uBAAL,CAA6BI,kBAA7B,CACf,OAAI,CAACC,aAAL,CAAmBjQ,IAAnB,CAAyB,UAAAkQ,YAAY;AAAA,qBAAIA,YAAY,CAACtK,WAAb,KAA6B,QAAjC;AAAA,aAArC,EAAgFuK,UADjE,CAAjB;;AAEA,gBAAI,eAAenR,IAAI,CAAC,CAAD,CAAvB,EAA4B;AAC1B,qBAAI,CAACuT,YAAL,GAAoBvT,IAAI,CAAC,CAAD,CAAJ,CAAQ,eAAR,CAApB;;AACA,qBAAI,CAACwT,iBAAL,CAA+BxT,IAAI,CAAC,CAAD,CAAnC;;AACA,kBAAI,OAAI,CAAC+S,SAAL,IAAkB,OAAI,CAACI,MAAL,KAAgB,QAAtC,EAAgD;AAC9C,uBAAI,CAACM,gBAAL;AACD,eAFD,MAEO;AACL,uBAAI,CAACC,mBAAL;AACD;AACF,aARD,MAQO;AACL,kBAAMC,aAAa,GAAc3T,IAAI,CAAC,CAAD,CAArC;AACA2T,2BAAa,CAACvH,OAAd,CAAuB,UAAAI,GAAG;AAAA,uBAAI,OAAI,CAAChN,cAAL,CAAoBiN,GAApB,CAAwBD,GAAxB,CAAJ;AAAA,eAA1B;AACD;AACF,WA9BD;AA+BD;;;0CAEiB4E,S,EAAiB;AACjC,iBAAO,KAAKL,SAAL,CAAe/P,IAAf,CAAqB,UAAAqQ,QAAQ;AAAA,mBAAIA,QAAQ,CAACzL,IAAT,KAAkBwL,SAAtB;AAAA,WAA7B,CAAP;AACD;;;uCAEcwC,U,EAAkB;AAC/B,eAAKV,QAAL,GAAgBU,UAAhB;AACD;;;4CAEgB;AAAA;;AACf,cAAI,KAAKd,QAAT,EAAoB;AAClB,iBAAKW,gBAAL;AACD,WAFD,MAEO;AACL,gBAAI,KAAK3C,QAAL,CAAc+C,KAAlB,EAAyB;AACvB,mBAAKjB,aAAL,CAAmB3P,OAAnB,CAA2B,kBAA3B,EAA+ClD,SAA/C,CAAyD,UAAAkD,OAAO,EAAI;AAClE,oBAAIA,OAAJ,EAAa;AACX,yBAAI,CAAC6N,QAAL,CAAcgD,KAAd,CAAoB,OAAI,CAACd,iBAAzB;;AACA,yBAAI,CAACU,mBAAL;AACD;AACF,eALD;AAMD,aAPD,MAOO;AACL,mBAAKA,mBAAL;AACD;AACF;;AACD,eAAKlU,cAAL,CAAoB+M,aAApB;AACD;;;8CAEkB;AACjB,eAAKuG,QAAL,GAAgB,IAAhB;;AACA,eAAKiB,iBAAL;;AAEA,cAAMC,UAAU,GAAG,KAAKlD,QAAL,CAAcpO,GAAd,CAAkB,SAAlB,CAAnB;AACAsR,oBAAU,CAACC,oBAAX;AACA,cAAMC,YAAY,GAAG,KAAKpD,QAAL,CAAcpO,GAAd,CAAkB,2BAAlB,CAArB;AACAwR,sBAAY,CAACD,oBAAb;AAEA,cAAME,UAAU,GAAG,KAAKrD,QAAL,CAAcpO,GAAd,CAAkB,QAAlB,CAAnB;AACA,cAAI0R,SAAS,GAAGD,UAAU,CAACtT,MAAX,GAAoB,CAApC;;AACA,iBAAOuT,SAAS,IAAI,CAApB,EAAuB;AACrB,gBAAMC,cAAc,GAAGF,UAAU,CAAChC,EAAX,CAAciC,SAAd,CAAvB;;AACA,gBAAIC,cAAc,CAACC,OAAf,IAA0B,CAACD,cAAc,CAAChE,KAAf,CAAqBkE,KAApD,EAA2D;AACzDJ,wBAAU,CAAC9B,QAAX,CAAoB+B,SAApB;AACD;;AACDA,qBAAS;AACV;;AAED,cAAMI,YAAY,GAAG,KAAK1D,QAAL,CAAcpO,GAAd,CAAkB,WAAlB,CAArB;AACA0R,mBAAS,GAAGI,YAAY,CAAC3T,MAAb,GAAsB,CAAlC;;AACA,iBAAOuT,SAAS,IAAI,CAApB,EAAuB;AACrB,gBAAM9C,gBAAgB,GAAGkD,YAAY,CAACrC,EAAb,CAAgBiC,SAAhB,CAAzB;;AACA,gBAAI9C,gBAAgB,CAACgD,OAAjB,IAA4B,CAAChD,gBAAgB,CAACjB,KAAjB,CAAuBsB,aAAxD,EAAuE;AACrE6C,0BAAY,CAACnC,QAAb,CAAsB+B,SAAtB;AACD;;AACDA,qBAAS;AACV;;AAED,cAAMK,SAAS,GAAG,KAAK3D,QAAL,CAAcpO,GAAd,CAAkB,UAAlB,CAAlB;AACA0R,mBAAS,GAAGK,SAAS,CAAC5T,MAAV,GAAmB,CAA/B;;AACA,iBAAOuT,SAAS,IAAI,CAApB,EAAuB;AACrB,gBAAMM,aAAa,GAAGD,SAAS,CAACtC,EAAV,CAAaiC,SAAb,CAAtB;;AACA,gBAAIM,aAAa,CAACJ,OAAd,IAAyB,CAACI,aAAa,CAACrE,KAAd,CAAoB7H,IAAlD,EAAwD;AACtDiM,uBAAS,CAACpC,QAAV,CAAmB+B,SAAnB;AACD;;AACDA,qBAAS;AACV;;AAED,eAAKtD,QAAL,CAAc6D,cAAd,GAvCiB,CAwCjB;;AACA3R,gBAAM,CAACuB,OAAP,CAAeqQ,YAAf,CAA4B,EAA5B,EAAgC,EAAhC,mBAA8CZ,UAAU,CAAC3D,KAAzD;AACD;;;2CAEe;AACd,eAAKyC,QAAL,GAAgB,KAAhB;;AACA,eAAKiB,iBAAL;;AAEA,cAAMC,UAAU,GAAG,KAAKlD,QAAL,CAAcpO,GAAd,CAAkB,SAAlB,CAAnB;;AACA,cAAI,KAAKqQ,SAAT,EAAoB;AAClBiB,sBAAU,CAACa,kBAAX,CACE,kFAAwB,KAAKzV,eAA7B,EAA8C,KAAKI,cAAnD,CADF;AAED;;AAED,cAAM0U,YAAY,GAAG,KAAKpD,QAAL,CAAcpO,GAAd,CAAkB,2BAAlB,CAArB;AACAwR,sBAAY,CAACW,kBAAb,CACE,oFAA0B,KAAKzV,eAA/B,EAAgD,KAAKI,cAArD,EAAqE,KAAKsR,QAAL,CAAcpO,GAAd,CAAkB,SAAlB,EAA6B2N,KAAlG,CADF;AAGA,cAAMoE,SAAS,GAAG,KAAK3D,QAAL,CAAcpO,GAAd,CAAkB,UAAlB,CAAlB;AACA+R,mBAAS,CAACtO,IAAV,CAAgB,KAAKwK,EAAL,CAAQY,KAAR,CAAc;AAC5B/I,gBAAI,EAAE,CAAC,EAAD,CADsB;AAE5BG,uBAAW,EAAE,CAAC,EAAD,CAFe;AAG5BmM,qCAAyB,EAAE,CAAC,EAAD,CAHC;AAI5BC,sCAA0B,EAAE,CAAC,EAAD;AAJA,WAAd,CAAhB,EAfc,CAsBd;;AACA,cAAI,KAAK5B,MAAL,KAAgB,SAApB,EAA+B;AAAC,iBAAKA,MAAL,GAAc,QAAd;AAAyB;;AACzDnQ,gBAAM,CAACuB,OAAP,CAAeqQ,YAAf,CAA4B,EAA5B,EAAgC,EAAhC,EAAoC,iBAAUZ,UAAU,CAAC3D,KAArB,gBAAuC,KAAK8C,MAAhF;AACD;;;yCAEa;AACZ,cAAM6B,UAAU,GAAG,IAAI,kDAAJ,EAAnB;AACAA,oBAAU,CAAC,WAAD,CAAV,GAA0B,QAA1B;AACAA,oBAAU,CAAC,QAAD,CAAV,GAAuB,CACrB;AAAEhN,mBAAO,EAAE,EAAX;AAAeiN,gBAAI,EAAE,CAArB;AAAwBC,sBAAU,EAAE,EAApC;AAAwC5M,qBAAS,EAAE,EAAnD;AAAuD6M,wBAAY,EAAE,EAArE;AACEC,sBAAU,EAAE,EADd;AACkBC,uBAAW,EAAE,EAD/B;AACmCC,uBAAW,EAAE;AADhD,WADqB,CAAvB;AAIAN,oBAAU,CAAC,YAAD,CAAV,GAA2B,CACzB;AAACO,iBAAK,EAAE,EAAR;AAAYC,yBAAa,EAAE,EAA3B;AAA+BC,sBAAU,EAAE,EAA3C;AAA+CC,kBAAM,EAAE;AAAvD,WADyB,CAA3B;AAGAV,oBAAU,CAAC,SAAD,CAAV,GAAwB,EAAxB;AACAA,oBAAU,CAAC,mBAAD,CAAV,GAAkC,CAChC;AAAChN,mBAAO,EAAE,EAAV;AAAc5H,oBAAQ,EAAE,EAAxB;AAA4BuV,oBAAQ,EAAE,EAAtC;AAA0CC,0BAAc,EAAE,EAA1D;AAA8DC,uBAAW,EAAE;AAA3E,WADgC,CAAlC;AAGAb,oBAAU,CAAC,eAAD,CAAV,GAA8B,EAA9B;AACA,iBAAO,gDAAGA,UAAH,CAAP;AACD;;;0CAEiBhV,I,EAAY;AAAA;;AAC5B,eAAK8Q,QAAL,GAAgB,KAAKH,EAAL,CAAQY,KAAR,CAAc;AAC5BvJ,mBAAO,EAAE,CAAChI,IAAI,CAAC,QAAD,CAAJ,CAAe,CAAf,EAAkB,SAAlB,CAAD,EAA+B,CAAC,0DAAW0R,QAAZ,CAA/B,CADmB;AAE5BuD,gBAAI,EAAE,CAACjV,IAAI,CAAC,QAAD,CAAJ,CAAe,CAAf,EAAkB,MAAlB,CAAD,CAFsB;AAG5BkV,sBAAU,EAAE,CAAClV,IAAI,CAAC,QAAD,CAAJ,CAAe,CAAf,EAAkB,YAAlB,CAAD,CAHgB;AAI5B8V,qBAAS,EAAE,KAAKnF,EAAL,CAAQY,KAAR,CAAc;AACvBwE,mBAAK,EAAE,KAAKpF,EAAL,CAAQY,KAAR,CAAc;AACnBjJ,yBAAS,EAAE,CAACtI,IAAI,CAAC,QAAD,CAAJ,CAAe,CAAf,EAAkB,WAAlB,CAAD,EAAiC,CAAC,0DAAW0R,QAAZ,CAAjC,CADQ;AAEnByD,4BAAY,EAAE,CAACnV,IAAI,CAAC,QAAD,CAAJ,CAAe,CAAf,EAAkB,cAAlB,CAAD,EAAoC,CAAC,0DAAW0R,QAAZ,CAApC,CAFK;AAGnB0D,0BAAU,EAAE,CAACpV,IAAI,CAAC,QAAD,CAAJ,CAAe,CAAf,EAAkB,YAAlB,CAAD,CAHO;AAInBqV,2BAAW,EAAE,CAACrV,IAAI,CAAC,QAAD,CAAJ,CAAe,CAAf,EAAkB,aAAlB,CAAD,CAJM;AAKnBsV,2BAAW,EAAE,CAACtV,IAAI,CAAC,QAAD,CAAJ,CAAe,CAAf,EAAkB,aAAlB,CAAD;AALM,eAAd,CADgB;AAQvBgW,sBAAQ,EAAE,KAAKrF,EAAL,CAAQY,KAAR,CAAc;AACtBgE,qBAAK,EAAE,CAACvV,IAAI,CAAC,YAAD,CAAJ,CAAmB,CAAnB,EAAsB,OAAtB,CAAD,CADe;AAEtBwV,6BAAa,EAAE,CAACxV,IAAI,CAAC,YAAD,CAAJ,CAAmB,CAAnB,EAAsB,eAAtB,CAAD,CAFO;AAGtByV,0BAAU,EAAE,CAACzV,IAAI,CAAC,YAAD,CAAJ,CAAmB,CAAnB,EAAsB,YAAtB,CAAD,EAAsC,CAAC,0DAAW0R,QAAZ,CAAtC,CAHU;AAItBgE,sBAAM,EAAE,CAAC1V,IAAI,CAAC,YAAD,CAAJ,CAAmB,CAAnB,EAAsB,QAAtB,CAAD;AAJc,eAAd;AARa,aAAd,CAJiB;AAmB5BiW,kBAAM,EAAG,KAAKtF,EAAL,CAAQuF,KAAR,CAAc,EAAd,CAnBmB;AAoB5BC,qBAAS,EAAE,KAAKxF,EAAL,CAAQuF,KAAR,CAAc,EAAd,CApBiB;AAqB5BE,+BAAmB,EAAE,KAAKzF,EAAL,CAAQY,KAAR,CAAc;AACjCvJ,qBAAO,EAAE,CAAChI,IAAI,CAAC,mBAAD,CAAJ,GAA4BA,IAAI,CAAC,mBAAD,CAAJ,CAA0B,CAA1B,EAA6B,SAA7B,CAA5B,GAAsE,EAAvE,CADwB;AAEjCI,sBAAQ,EAAE,CAACJ,IAAI,CAAC,mBAAD,CAAJ,GAA4BA,IAAI,CAAC,mBAAD,CAAJ,CAA0B,CAA1B,EAA6B,UAA7B,CAA5B,GAAuE,EAAxE,CAFuB;AAGjC2V,sBAAQ,EAAE,CAAC3V,IAAI,CAAC,mBAAD,CAAJ,GAA4BA,IAAI,CAAC,mBAAD,CAAJ,CAA0B,CAA1B,EAA6B,UAA7B,CAA5B,GAAuE,EAAxE,CAHuB;AAIjC4V,4BAAc,EAAE,CAAC5V,IAAI,CAAC,mBAAD,CAAJ,GAA4BA,IAAI,CAAC,mBAAD,CAAJ,CAA0B,CAA1B,EAA6B,gBAA7B,CAA5B,GAA6E,EAA9E,CAJiB;AAKjC6V,yBAAW,EAAE,CAAC7V,IAAI,CAAC,mBAAD,CAAJ,GAA4BA,IAAI,CAAC,mBAAD,CAAJ,CAA0B,CAA1B,EAA6B,aAA7B,CAA5B,GAA0E,EAA3E;AALoB,aAAd,CArBO;AA4B5BqW,oBAAQ,EAAE,KAAK1F,EAAL,CAAQuF,KAAR,CAAc,EAAd;AA5BkB,WAAd,CAAhB;AA+BA,cAAM/B,UAAU,GAAG,KAAKrD,QAAL,CAAcpO,GAAd,CAAkB,QAAlB,CAAnB;AACA1C,cAAI,CAAC,SAAD,CAAJ,CAAgBoM,OAAhB,CAAyB,UAAAkK,KAAK,EAAI;AAChCnC,sBAAU,CAAChO,IAAX,CACE,OAAI,CAACwK,EAAL,CAAQY,KAAR,CAAc;AACZgD,mBAAK,EAAE,CAAC+B,KAAK,CAAC,OAAD,CAAN,EAAiB,CAAC,0DAAW5E,QAAZ,CAAjB,CADK;AAEZD,kBAAI,EAAE,CAAC6E,KAAK,CAAC,MAAD,CAAN,EAAgB,CAAC,0DAAW5E,QAAZ,CAAhB,CAFM;AAGZK,qBAAO,EAAE,CAACuE,KAAK,CAAC,SAAD,CAAN;AAHG,aAAd,CADF;AAOD,WARD;AAUA,cAAM9B,YAAY,GAAG,KAAK1D,QAAL,CAAcpO,GAAd,CAAkB,WAAlB,CAArB;;AACA,cAAI1C,IAAI,CAAC,WAAD,CAAR,EAAuB;AACrBA,gBAAI,CAAC,WAAD,CAAJ,CAAkBoM,OAAlB,CAA2B,UAAAmK,OAAO,EAAI;AACpC/B,0BAAY,CAACrO,IAAb,CACE,OAAI,CAACwK,EAAL,CAAQY,KAAR,CAAc;AACZC,0BAAU,EAAE,CAAC+E,OAAO,CAAC,YAAD,CAAR,CADA;AAEZ9E,oBAAI,EAAE,CAAC8E,OAAO,CAAC,MAAD,CAAR,EAAkB,CAAC,0DAAW7E,QAAZ,CAAlB,CAFM;AAGZC,6BAAa,EAAE,CAAC4E,OAAO,CAAC,eAAD,CAAR,EAA2B,CAAC,0DAAW7E,QAAZ,CAA3B,CAHH;AAIZE,wBAAQ,EAAE,CAAC2E,OAAO,CAAC,UAAD,CAAR,CAJE;AAKZ1E,oBAAI,EAAE,CAAC0E,OAAO,CAAC,MAAD,CAAR,CALM;AAMZzE,uBAAO,EAAE,CAACyE,OAAO,CAAC,SAAD,CAAR,CANG;AAOZxE,uBAAO,EAAE,CAACwE,OAAO,CAAC,SAAD,CAAR;AAPG,eAAd,CADF;AAWD,aAZD;AAaD;;AAED,cAAM9B,SAAS,GAAG,KAAK3D,QAAL,CAAcpO,GAAd,CAAkB,UAAlB,CAAlB;AACA,cAAM8T,oBAAoB,GAAGxW,IAAI,CAAC,eAAD,CAAJ,CAAsB,CAAtB,CAA7B;;AACA,cAAIwW,oBAAJ,EAA0B;AACxBA,gCAAoB,CAACC,MAArB,CAA4BrK,OAA5B,CAAqC,UAAAiE,KAAK,EAAI;AAC5C,kBAAMqG,YAAY,GAAGrG,KAAK,CAACsG,iBAAN,CAAwB,CAAxB,CAArB;AACAlC,uBAAS,CAACtO,IAAV,CACE,OAAI,CAACwK,EAAL,CAAQY,KAAR,CAAc;AACZ/I,oBAAI,EAAE,CAACkO,YAAY,CAAC,QAAD,CAAZ,CAAuB,CAAvB,EAA0B,MAA1B,CAAD,CADM;AAEZ/N,2BAAW,EAAE,CAAC+N,YAAY,CAAC,QAAD,CAAZ,CAAuB,CAAvB,EAA0B,aAA1B,CAAD,CAFD;AAGZ5B,yCAAyB,EAAE,CAAC4B,YAAY,CAAC,eAAD,CAAb,CAHf;AAIZ3B,0CAA0B,EAAE,CAAC1E,KAAK,CAAC,4BAAD,CAAN;AAJhB,eAAd,CADF;AAQD,aAVD;AAWD;;AAED,eAAK2C,iBAAL,GAAyB,KAAKlC,QAAL,CAAc8F,WAAd,EAAzB;AACD;;;wCAEe5W,I,EAAY;AAAA;;AAC1B,eAAKgT,iBAAL,GAAyB;AACvBhL,mBAAO,EAAEhI,IAAI,CAAC,QAAD,CAAJ,CAAe,CAAf,EAAkB,SAAlB,CADc;AAEvBiV,gBAAI,EAAEjV,IAAI,CAAC,QAAD,CAAJ,CAAe,CAAf,EAAkB,MAAlB,CAFiB;AAGvBkV,sBAAU,EAAElV,IAAI,CAAC,QAAD,CAAJ,CAAe,CAAf,EAAkB,YAAlB,CAHW;AAIvB8V,qBAAS,EAAE;AACTC,mBAAK,EAAE;AACLzN,yBAAS,EAAEtI,IAAI,CAAC,QAAD,CAAJ,CAAe,CAAf,EAAkB,WAAlB,CADN;AAELmV,4BAAY,EAAEnV,IAAI,CAAC,QAAD,CAAJ,CAAe,CAAf,EAAkB,cAAlB,CAFT;AAGLoV,0BAAU,EAAEpV,IAAI,CAAC,QAAD,CAAJ,CAAe,CAAf,EAAkB,YAAlB,CAHP;AAILqV,2BAAW,EAAErV,IAAI,CAAC,QAAD,CAAJ,CAAe,CAAf,EAAkB,aAAlB,CAJR;AAKLsV,2BAAW,EAAEtV,IAAI,CAAC,QAAD,CAAJ,CAAe,CAAf,EAAkB,aAAlB;AALR,eADE;AAQTgW,sBAAQ,EAAE;AACRT,qBAAK,EAAEvV,IAAI,CAAC,YAAD,CAAJ,CAAmB,CAAnB,EAAsB,OAAtB,CADC;AAERwV,6BAAa,EAAExV,IAAI,CAAC,YAAD,CAAJ,CAAmB,CAAnB,EAAsB,eAAtB,CAFP;AAGRyV,0BAAU,EAAEzV,IAAI,CAAC,YAAD,CAAJ,CAAmB,CAAnB,EAAsB,YAAtB,CAHJ;AAIR0V,sBAAM,EAAE1V,IAAI,CAAC,YAAD,CAAJ,CAAmB,CAAnB,EAAsB,QAAtB;AAJA;AARD,aAJY;AAmBvBiW,kBAAM,EAAE,EAnBe;AAoBvBE,qBAAS,EAAE,EApBY;AAqBvBC,+BAAmB,EAAE;AACnBpO,qBAAO,EAAEhI,IAAI,CAAC,mBAAD,CAAJ,GAA4BA,IAAI,CAAC,mBAAD,CAAJ,CAA0B,CAA1B,EAA6B,SAA7B,CAA5B,GAAsE,EAD5D;AAEnBI,sBAAQ,EAAEJ,IAAI,CAAC,mBAAD,CAAJ,GAA4BA,IAAI,CAAC,mBAAD,CAAJ,CAA0B,CAA1B,EAA6B,UAA7B,CAA5B,GAAuE,EAF9D;AAGnB2V,sBAAQ,EAAE3V,IAAI,CAAC,mBAAD,CAAJ,GAA4BA,IAAI,CAAC,mBAAD,CAAJ,CAA0B,CAA1B,EAA6B,UAA7B,CAA5B,GAAuE,EAH9D;AAInB4V,4BAAc,EAAE5V,IAAI,CAAC,mBAAD,CAAJ,GAA4BA,IAAI,CAAC,mBAAD,CAAJ,CAA0B,CAA1B,EAA6B,gBAA7B,CAA5B,GAA6E,EAJ1E;AAKnB6V,yBAAW,EAAE7V,IAAI,CAAC,mBAAD,CAAJ,GAA4BA,IAAI,CAAC,mBAAD,CAAJ,CAA0B,CAA1B,EAA6B,aAA7B,CAA5B,GAA0E;AALpE,aArBE;AA4BvBqW,oBAAQ,EAAE;AA5Ba,WAAzB;AA+BArW,cAAI,CAAC,SAAD,CAAJ,CAAgBoM,OAAhB,CAAyB,UAAAkK,KAAK,EAAI;AAChC,mBAAI,CAACtD,iBAAL,CAAuB,QAAvB,EAAiC7M,IAAjC,CACE;AACEoO,mBAAK,EAAE+B,KAAK,CAAC,OAAD,CADd;AAEE7E,kBAAI,EAAE6E,KAAK,CAAC,MAAD,CAFb;AAGEvE,qBAAO,EAAEuE,KAAK,CAAC,SAAD;AAHhB,aADF;AAOD,WARD;;AAUA,cAAItW,IAAI,CAAC,WAAD,CAAR,EAAuB;AACrBA,gBAAI,CAAC,WAAD,CAAJ,CAAkBoM,OAAlB,CAA2B,UAAAmK,OAAO,EAAI;AACpC,qBAAI,CAACvD,iBAAL,CAAuB,WAAvB,EAAoC7M,IAApC,CACE;AACEqL,0BAAU,EAAE+E,OAAO,CAAC,YAAD,CADrB;AAEE9E,oBAAI,EAAE8E,OAAO,CAAC,MAAD,CAFf;AAGE5E,6BAAa,EAAE4E,OAAO,CAAC,eAAD,CAHxB;AAIE3E,wBAAQ,EAAE2E,OAAO,CAAC,UAAD,CAJnB;AAKE1E,oBAAI,EAAE0E,OAAO,CAAC,MAAD,CALf;AAMEzE,uBAAO,EAAEyE,OAAO,CAAC,SAAD,CANlB;AAOExE,uBAAO,EAAEwE,OAAO,CAAC,SAAD;AAPlB,eADF;AAWD,aAZD;AAaD;;AAED,cAAMC,oBAAoB,GAAGxW,IAAI,CAAC,eAAD,CAAJ,CAAsB,CAAtB,CAA7B;;AACA,cAAIwW,oBAAJ,EAA0B;AACxBA,gCAAoB,CAACC,MAArB,CAA4BrK,OAA5B,CAAqC,UAAAiE,KAAK,EAAI;AAC5C,kBAAMqG,YAAY,GAAGrG,KAAK,CAACsG,iBAAN,CAAwB,CAAxB,CAArB;;AACA,qBAAI,CAAC3D,iBAAL,CAAuB,UAAvB,EAAmC7M,IAAnC,CACE;AACEqC,oBAAI,EAAE,CAACkO,YAAY,CAAC,QAAD,CAAZ,CAAuB,CAAvB,EAA0B,MAA1B,CAAD,CADR;AAEE/N,2BAAW,EAAE,CAAC+N,YAAY,CAAC,QAAD,CAAZ,CAAuB,CAAvB,EAA0B,aAA1B,CAAD,CAFf;AAGE5B,yCAAyB,EAAE,CAAC4B,YAAY,CAAC,eAAD,CAAb,CAH7B;AAIE3B,0CAA0B,EAAE,CAAC1E,KAAK,CAAC,4BAAD,CAAN;AAJ9B,eADF;AAQD,aAVD;AAWD;;AAED,eAAKS,QAAL,CAAcgD,KAAd,CAAoB,KAAKd,iBAAzB;AACD;;;4CAEmB;AAClB,cAAM6D,kBAAkB,GAAG,KAAK/F,QAAL,CAAcpO,GAAd,CAAkB,QAAlB,CAA3B;AACA,cAAMmO,oBAAoB,GAAG,KAAKC,QAAL,CAAcpO,GAAd,CAAkB,WAAlB,CAA7B;AACA,cAAMoU,gBAAgB,GAAG,KAAKhG,QAAL,CAAcpO,GAAd,CAAkB,WAAlB,EAA+BA,GAA/B,CAAmC,UAAnC,CAAzB;AACA,cAAMqU,uBAAuB,GAAG,KAAKjG,QAAL,CAAcpO,GAAd,CAAkB,qBAAlB,CAAhC;;AACA,cAAI,KAAKoQ,QAAT,EAAmB;AACjB+D,8BAAkB,CAACG,QAAnB,CAA4B5K,OAA5B,CAAqC,UAAA6K,aAAa,EAAI;AACpDA,2BAAa,CAACvU,GAAd,CAAkB,SAAlB,EAA6BwU,OAA7B;AACAD,2BAAa,CAACvU,GAAd,CAAkB,MAAlB,EAA0BwU,OAA1B;AACD,aAHD;AAIArG,gCAAoB,CAACmG,QAArB,CAA8B5K,OAA9B,CAAuC,UAAA+K,eAAe,EAAI;AACxDA,6BAAe,CAACzU,GAAhB,CAAoB,SAApB,EAA+BwU,OAA/B;AACAC,6BAAe,CAACzU,GAAhB,CAAoB,MAApB,EAA4BwU,OAA5B;AACD,aAHD;AAIAJ,4BAAgB,CAACpU,GAAjB,CAAqB,QAArB,EAA+BwU,OAA/B;AACAH,mCAAuB,CAACrU,GAAxB,CAA4B,UAA5B,EAAwCwU,OAAxC;AACAH,mCAAuB,CAACrU,GAAxB,CAA4B,UAA5B,EAAwCwU,OAAxC;AACAH,mCAAuB,CAACrU,GAAxB,CAA4B,gBAA5B,EAA8CwU,OAA9C;AACAH,mCAAuB,CAACrU,GAAxB,CAA4B,aAA5B,EAA2CwU,OAA3C;AACD,WAdD,MAcO;AACLL,8BAAkB,CAACG,QAAnB,CAA4B5K,OAA5B,CAAqC,UAAA6K,aAAa,EAAI;AACpDA,2BAAa,CAACvU,GAAd,CAAkB,SAAlB,EAA6B0U,MAA7B;AACAH,2BAAa,CAACvU,GAAd,CAAkB,MAAlB,EAA0B0U,MAA1B;AACD,aAHD;AAIAvG,gCAAoB,CAACmG,QAArB,CAA8B5K,OAA9B,CAAuC,UAAA+K,eAAe,EAAI;AACxDA,6BAAe,CAACzU,GAAhB,CAAoB,SAApB,EAA+B0U,MAA/B;AACAD,6BAAe,CAACzU,GAAhB,CAAoB,MAApB,EAA4B0U,MAA5B;AACD,aAHD;AAIAN,4BAAgB,CAACpU,GAAjB,CAAqB,QAArB,EAA+B0U,MAA/B;AACAL,mCAAuB,CAACrU,GAAxB,CAA4B,UAA5B,EAAwC0U,MAAxC;AACAL,mCAAuB,CAACrU,GAAxB,CAA4B,UAA5B,EAAwC0U,MAAxC;AACAL,mCAAuB,CAACrU,GAAxB,CAA4B,gBAA5B,EAA8C0U,MAA9C;AACAL,mCAAuB,CAACrU,GAAxB,CAA4B,aAA5B,EAA2C0U,MAA3C;AACD;AACF;;;+BAEM;AAAA;;AACL,eAAK5X,cAAL,CAAoB+M,aAApB;;AACA,cAAI,KAAK8K,qBAAL,EAAJ,EAAkC;AAChC,iBAAKjY,eAAL,CAAqBkY,QAArB,CAAsC,KAAKrE,WAA3C,EAAwDlT,SAAxD,CAAmE,UAAAC,IAAI,EAAI;AACzE,qBAAI,CAACiT,WAAL,GAAmB,EAAnB;;AACA,kBAAI,mBAAmBjT,IAAvB,EAA6B;AAC3B,oBAAMkH,MAAM,GAAGlH,IAAI,CAAC,QAAD,CAAJ,CAAe,CAAf,EAAkB,SAAlB,CAAf;AACA,uBAAI,CAACuT,YAAL,GAAoBvT,IAAI,CAAC,eAAD,CAAxB;AACA,uBAAI,CAAC+S,SAAL,GAAiB,KAAjB;;AACA,uBAAI,CAAC3T,eAAL,CAAqBkU,aAArB,CAAmCpM,MAAnC,EAA2CnH,SAA3C,CAAqD,UAAAwX,QAAQ,EAAI;AAC/D,sBAAI,eAAeA,QAAnB,EAA6B;AAC3B,2BAAI,CAAC7D,mBAAL;;AACA,2BAAI,CAAC8D,eAAL,CAA6BD,QAA7B;AACD,mBAHD,MAGO;AACL,wBAAM5D,aAAa,GAAc4D,QAAjC;AACA5D,iCAAa,CAACvH,OAAd,CAAuB,UAAAI,GAAG;AAAA,6BAAI,OAAI,CAAChN,cAAL,CAAoBiN,GAApB,CAAwBD,GAAxB,CAAJ;AAAA,qBAA1B;AACD;AACF,iBARD;;AASA,uBAAI,CAAChN,cAAL,CAAoBiY,aAApB,CAAkC,MAAlC,EAA0C,YAA1C,EAAwD,GAAxD,EAA6DvQ,MAA7D;AACD,eAdD,MAcO;AACL,oBAAMyM,aAAa,GAAc3T,IAAjC;AACA2T,6BAAa,CAACvH,OAAd,CAAuB,UAAAI,GAAG;AAAA,yBAAI,OAAI,CAAChN,cAAL,CAAoBiN,GAApB,CAAwBD,GAAxB,CAAJ;AAAA,iBAA1B;AACD;AACF,aApBD;AAqBD;AACF;;;gDAEuB;AACtB,cAAI,KAAKsE,QAAL,CAAcwD,OAAlB,EAA2B;AACzB,iBAAK9U,cAAL,CAAoBiY,aAApB,CAAkC,MAAlC,EAA0C,SAA1C,EAAqD,GAArD;AACA,mBAAO,KAAP;AACD;;AAED,cAAI,KAAK3G,QAAL,CAAc+C,KAAd,KAAwB,KAA5B,EAAmC;AACjC,iBAAKrU,cAAL,CAAoBiY,aAApB,CAAkC,SAAlC,EAA6C,WAA7C,EAA0D,GAA1D;AACA,mBAAO,KAAP;AACD;;AAED,eAAKxE,WAAL,CAAiB,WAAjB,IAAgC,QAAhC;AACA,eAAKA,WAAL,CAAiB,eAAjB,IAAoC,KAAKM,YAAzC;;AACA,cAAI,KAAKR,SAAT,EAAoB;AAClB,iBAAKE,WAAL,CAAiB,QAAjB,IAA6B;AAACE,oBAAM,EAAE,KAAT;AAAgB1B,kBAAI,EAAE,UAAtB;AAAkCiG,2BAAa,EAAE;AAAjD,aAA7B;AACD;;AAED,cAAMC,kBAAkB,GAAG,KAAK7G,QAAL,CAAcpO,GAAd,CAAkB,WAAlB,CAA3B;AACA,cAAMwE,MAAM,GAAG,KAAK4J,QAAL,CAAcpO,GAAd,CAAkB,SAAlB,EAA6B2N,KAA5C;;AACA,cAAIsH,kBAAkB,CAAC9D,KAAvB,EAA8B;AAC5B,gBAAM+D,uBAAuB,GAAGD,kBAAkB,CAACjV,GAAnB,CAAuB,OAAvB,CAAhC;AACA,iBAAKuQ,WAAL,CAAiB,QAAjB,IAA6B,KAAKJ,eAAL,CAAqBgF,sBAArB,CAC3BD,uBAD2B,EACF;AAAC5P,qBAAO,EAAEd;AAAV,aADE,EACiB,KAAK6L,SADtB,CAA7B;AAGA,gBAAM+E,0BAA0B,GAAGH,kBAAkB,CAACjV,GAAnB,CAAuB,UAAvB,CAAnC;AACA,iBAAKuQ,WAAL,CAAiB,YAAjB,IAAiC,KAAKJ,eAAL,CAAqBgF,sBAArB,CAC/BC,0BAD+B,EACH;AAAC9P,qBAAO,EAAEd;AAAV,aADG,EACgB,KAAK6L,SADrB,CAAjC;AAED;;AAED,cAAM8D,kBAAkB,GAAG,KAAK/F,QAAL,CAAcpO,GAAd,CAAkB,QAAlB,CAA3B;AACA,eAAKuQ,WAAL,CAAiB,SAAjB,IAA8B,KAAKJ,eAAL,CAAqBkF,2BAArB,CAC5BlB,kBAD4B,EACR,KAAK7D,iBAAL,CAAuB,QAAvB,CADQ,EAC0B;AAACuB,iBAAK,EAAE;AAAR,WAD1B,CAA9B;AAGA,cAAM1D,oBAAoB,GAAG,KAAKC,QAAL,CAAcpO,GAAd,CAAkB,WAAlB,CAA7B;AACA,eAAKuQ,WAAL,CAAiB,WAAjB,IAAgC,KAAKJ,eAAL,CAAqBkF,2BAArB,CAC9BlH,oBAD8B,EACR,KAAKmC,iBAAL,CAAuB,WAAvB,CADQ,EAC6B;AAACxB,sBAAU,EAAE;AAAb,WAD7B,CAAhC;AAGA,cAAMwG,4BAA4B,GAAG,KAAKlH,QAAL,CAAcpO,GAAd,CAAkB,qBAAlB,CAArC;AACA,eAAKuQ,WAAL,CAAiB,mBAAjB,IAAwC,KAAKJ,eAAL,CAAqBgF,sBAArB,CACtCG,4BADsC,EACR;AAAChQ,mBAAO,EAAEd;AAAV,WADQ,EACW,CAAC8Q,4BAA4B,CAACtV,GAA7B,CAAiC,SAAjC,EAA4C2N,KADxD,CAAxC;AAGA,cAAM4H,iBAAiB,GAAG,KAAKnH,QAAL,CAAcpO,GAAd,CAAkB,UAAlB,CAA1B;AACA,cAAMwV,YAAY,GAAG,KAAKrF,eAAL,CAAqBsF,0BAArB,CACnB,cADmB,EAEnB,CAAC;AAAC9Q,qBAAS,EAAE,YAAZ;AAA0B+Q,mBAAO,EAAE;AAAnC,WAAD,CAFmB,EAGnBH,iBAHmB,EAGA,KAAKjF,iBAAL,CAAuB,UAAvB,CAHA,EAGoC,CAAC,MAAD,EAAS,aAAT,CAHpC,CAArB;;AAIA,cAAIkF,YAAJ,EAAkB;AAAC,iBAAKjF,WAAL,CAAiB,eAAjB,IAAoC,CAACiF,YAAD,CAApC;AAAqD;;AAExE,iBAAO,IAAP;AACD;;;wCAEY;AACX,cAAI,KAAKnF,SAAL,IAAmB,KAAKjC,QAAL,IAAiB,KAAKA,QAAL,CAAc+C,KAAtD,EAA8D;AAC5D,mBAAO,KAAKjB,aAAL,CAAmB3P,OAAnB,CAA2B,kBAA3B,CAAP;AACD,WAFD,MAEO;AACL,mBAAO,IAAP;AACD;AACF;;;4BAhcY;AACX,kBAAQ,KAAK6N,QAAL,CAAcpO,GAAd,CAAkB,YAAlB,EAAgC2N,KAAxC;AACE,iBAAK,EAAL;AACE,qBAAO,SAAP;;AACF,iBAAK,CAAL;AACE,qBAAO,QAAP;;AACF,iBAAK,CAAL;AACE,qBAAO,aAAP;;AACF;AACE,qBAAO,SAAP;AARJ;AAUD;;;;;;;uBAvBUsC,mB,EAAmB,2H,EAAA,+H,EAAA,uH,EAAA,8H,EAAA,kI,EAAA,oI,EAAA,0H,EAAA,4H,EAAA,kI;AAAA,K;;;YAAnBA,mB;AAAmB,sC;AAAA,e;AAAA,a;AAAA,qlD;AAAA;AAAA;ACvBhC;;AACE;;AACE;;AAAyC;;AAAoE;;AAC/G;;AAEA;;AACE;;AAAwG;AAAA,mBAAS,IAAA0F,iBAAA,EAAT;AAA4B,WAA5B;;AACtG;;AACA;;AACF;;AACA;;AAAyF;AAAA,mBAAS,IAAAC,IAAA,EAAT;AAAe,WAAf;;AACvF;;AAA2B;;AAAI;;AACjC;;AACF;;AACF;;AAEA;;AACE;;AACF;;AAEA;;;;AAlB6C;;AAAA;;AAKjC;;AAAA;;AACA;;AAAA;;AAEkG;;AAAA;;AAUzG;;AAAA;;;;;;;;;sEDGQ3F,mB,EAAmB;cAL/B,uDAK+B;eALrB;AACTnR,kBAAQ,EAAE,iBADD;AAETC,qBAAW,EAAE,8BAFJ;AAGTC,mBAAS,EAAE,CAAC,6BAAD;AAHF,S;AAKqB,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AEvBhC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;ACEI;;AACE;;AAAmH;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AACjH;;AAAyB;;AAAO;;AAClC;;AACA;;AACE;;AAKA;;AAKA;;AACE;;AAA+D;;AAAO;;AACtE;;AACF;;AACF;;AACF;;;;;;;;AAhB6B;;AAAA;;AAED;;AAAA,yHAA8C,WAA9C,EAA8C,kBAA9C,EAA8C,UAA9C,EAA8C,iBAA9C;;AAKA;;AAAA,0HAA+C,WAA/C,EAA+C,kBAA/C,EAA+C,UAA/C,EAA+C,iBAA/C;;AAMqC;;AAAA;;;;QDTxD6W,kB;;;AAOX,kCAAoB5H,EAApB,EACoBnR,cADpB,EAEoBoR,uBAFpB,EAEsE;AAAA;;AAFlD,aAAAD,EAAA,GAAAA,EAAA;AACA,aAAAnR,cAAA,GAAAA,cAAA;AACA,aAAAoR,uBAAA,GAAAA,uBAAA;AAAqD;;;;mCAE9D;AACT,eAAKiG,kBAAL,GAA0B,KAAK/F,QAAL,CAAcpO,GAAd,CAAkB,QAAlB,CAA1B;AACA,eAAKqO,SAAL,GAAiB,KAAKH,uBAAL,CAA6BI,kBAA7B,CACf,KAAKC,aAAL,CAAmBjQ,IAAnB,CAAyB,UAAAkQ,YAAY;AAAA,mBAAIA,YAAY,CAACtK,WAAb,KAA6B,SAAjC;AAAA,WAArC,EAAiFuK,UADlE,CAAjB;;AAEA,cAAI,CAAC,KAAK2B,QAAN,IAAkB,KAAK+D,kBAAL,CAAwBhW,MAAxB,KAAmC,CAAzD,EAA4D;AAC1D,iBAAK2X,QAAL;AACD;AACF;;;0CAEiBpH,S,EAAiB;AACjC,iBAAO,KAAKL,SAAL,CAAe/P,IAAf,CAAqB,UAAAqQ,QAAQ;AAAA,mBAAIA,QAAQ,CAACzL,IAAT,KAAkBwL,SAAtB;AAAA,WAA7B,CAAP;AACD;;;mCAEU;AACT,cAAMiD,cAAc,GAAG,KAAK1D,EAAL,CAAQY,KAAR,CAAc;AACnCgD,iBAAK,EAAE,CAAC,EAAD,EAAK,CAAC,0DAAW7C,QAAZ,CAAL,CAD4B;AAEnCD,gBAAI,EAAE,CAAC,EAAD,EAAK,CAAC,0DAAWC,QAAZ,CAAL,CAF6B;AAGnCK,mBAAO,EAAE,CAAC,EAAD;AAH0B,WAAd,CAAvB;;AAKA,cAAI,KAAK8E,kBAAL,CAAwBhW,MAAxB,KAAmC,CAAvC,EAA0C;AACxCwT,0BAAc,CAAC3R,GAAf,CAAmB,SAAnB,EAA8BsP,QAA9B,CAAuC,CAAvC;AACAqC,0BAAc,CAAC3R,GAAf,CAAmB,SAAnB,EAA8BuP,WAA9B;AACD;;AACD,eAAK4E,kBAAL,CAAwB1Q,IAAxB,CAA6BkO,cAA7B;AACD;;;oCAEWnC,K,EAAe;AACzB,cAAI,KAAK2E,kBAAL,CAAwBhW,MAAxB,KAAmC,CAAvC,EAA0C;AACxC,iBAAKrB,cAAL,CAAoBiY,aAApB,CAAkC,MAAlC,EAA0C,oBAA1C,EAAgE,GAAhE;AACD,WAFD,MAEO;AACL,gBAAI,KAAKZ,kBAAL,CAAwB1E,EAAxB,CAA2BD,KAA3B,EAAkC7B,KAAlC,CAAwC,SAAxC,CAAJ,EAAwD;AACtD,kBAAM+B,eAAe,GAAGF,KAAK,KAAK,CAAV,GAAc,CAAd,GAAkB,CAA1C;AACA,mBAAK2E,kBAAL,CAAwB1E,EAAxB,CAA2BC,eAA3B,EAA4C1P,GAA5C,CAAgD,SAAhD,EAA2DsP,QAA3D,CAAoE,CAApE;AACA,mBAAK6E,kBAAL,CAAwB1E,EAAxB,CAA2BC,eAA3B,EAA4C1P,GAA5C,CAAgD,SAAhD,EAA2DuP,WAA3D;AACD;;AACD,iBAAK4E,kBAAL,CAAwBxE,QAAxB,CAAiCH,KAAjC;AACA,iBAAK2E,kBAAL,CAAwB5E,WAAxB;AACD;AACF;;;;;;;uBAjDUsG,kB,EAAkB,2H,EAAA,kI,EAAA,oI;AAAA,K;;;YAAlBA,kB;AAAkB,qC;AAAA;AAAA;AAAA;AAAA;AAAA,O;AAAA,c;AAAA,a;AAAA,4uB;AAAA;AAAA;ACV/B;;AACE;;AACE;;AAqBA;;AAAyF;AAAA,mBAAS,IAAAC,QAAA,EAAT;AAAmB,WAAnB;;AAAqB;;AAAG;;AACnH;;AACF;;;;AAvBS;;AAAA;;AAqB8D;;AAAA;;;;;;;;;sEDb1DD,kB,EAAkB;cAL9B,uDAK8B;eALpB;AACT/W,kBAAQ,EAAE,gBADD;AAETC,qBAAW,EAAE,6BAFJ;AAGTC,mBAAS,EAAE,CAAC,4BAAD;AAHF,S;AAKoB,Q;;;;;;;;;;gBAC5B;;;gBACA;;;gBACA;;;;;;;;;;;;;;;;;;;;AEbH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QASa+W,4B;;;AAOX,4CAAoB7H,uBAApB,EAAsE;AAAA;;AAAlD,aAAAA,uBAAA,GAAAA,uBAAA;AAAqD;;;;mCAE9D;AACT,eAAKmG,uBAAL,GAA+B,KAAKjG,QAAL,CAAcpO,GAAd,CAAkB,qBAAlB,CAA/B;AACA,eAAKqO,SAAL,GAAiB,KAAKH,uBAAL,CAA6BI,kBAA7B,CACf,KAAKC,aAAL,CAAmBjQ,IAAnB,CAAyB,UAAAkQ,YAAY;AAAA,mBAAIA,YAAY,CAACtK,WAAb,KAA6B,mBAAjC;AAAA,WAArC,EAA2FuK,UAD5E,CAAjB;AAED;;;0CAEiBC,S,EAAiB;AACjC,iBAAO,KAAKL,SAAL,CAAe/P,IAAf,CAAqB,UAAAqQ,QAAQ;AAAA,mBAAIA,QAAQ,CAACzL,IAAT,KAAkBwL,SAAtB;AAAA,WAA7B,CAAP;AACD;;;;;;;uBAjBUqH,4B,EAA4B,oI;AAAA,K;;;YAA5BA,4B;AAA4B,+C;AAAA;AAAA;AAAA;AAAA;AAAA,O;AAAA,c;AAAA,c;AAAA,wI;AAAA;AAAA;ACTzC;;AACE;;AAKA;;AAKA;;AAKA;;AAKF;;;;AAnB0B;;AAAA,0HAAkD,WAAlD,EAAkD,2BAAlD,EAAkD,UAAlD,EAAkD,YAAlD;;AAKA;;AAAA,0HAAkD,WAAlD,EAAkD,2BAAlD,EAAkD,UAAlD,EAAkD,YAAlD;;AAKA;;AAAA,gIAAwD,WAAxD,EAAwD,2BAAxD,EAAwD,UAAxD,EAAwD,YAAxD;;AAKA;;AAAA,6HAAqD,WAArD,EAAqD,2BAArD,EAAqD,UAArD,EAAqD,YAArD;;;;;;;;;sEDRbA,4B,EAA4B;cALxC,uDAKwC;eAL9B;AACTjX,kBAAQ,EAAE,0BADD;AAETC,qBAAW,EAAE,uCAFJ;AAGTC,mBAAS,EAAE,CAAC,sCAAD;AAHF,S;AAK8B,Q;;;;;;gBACtC;;;gBACA;;;gBACA;;;;;;;;;;;;;;;;;;;;AEZH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;ACUI;;AACE;;AACE;;AACE;;AAC0E;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAD1E;;AAEA;;AACE;;AACF;;AACA;;AACE;;AACA;AAAA;;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AACE;;AACF;;AACF;;AACF;;AACF;;AACA;;AACE;;AACF;;AACA;;AACE;;AAAoE;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAClE;;AACF;;AACF;;AACF;;;;;;;;AAvBM;;AAAA;;AAGK;;AAAA;;AAEH;;AAAA;;AAUF;;AAAA;;AAI4C;;AAAA;;;;QDpBzCgX,iB;;;AAKX,iCAAoB/H,EAApB,EACoBvR,eADpB,EACsD;AAAA;;AADlC,aAAAuR,EAAA,GAAAA,EAAA;AACA,aAAAvR,eAAA,GAAAA,eAAA;AAAqC;;;;mCAK9C;AAAA;;AACT,eAAK6Y,iBAAL,GAAyB,KAAKnH,QAAL,CAAcpO,GAAd,CAAkB,UAAlB,CAAzB,CADS,CAET;;AACA,cAAI,CAAC,KAAKoQ,QAAV,EAAoB;AAClB,iBAAKmF,iBAAL,CAAuBjB,QAAvB,CAAgC5K,OAAhC,CAAyC,UAACuM,IAAD,EAAOzG,KAAP,EAAiB;AACxD,qBAAI,CAAC0G,cAAL,CAAoB1G,KAApB;AACD,aAFD;AAGD;AACF;;;mCAEUA,K,EAAa;AACtB,cAAIA,KAAK,KAAK,KAAK+F,iBAAL,CAAuBpX,MAAvB,GAAgC,CAA9C,EAAiD;AAC/C,iBAAKoX,iBAAL,CAAuB5F,QAAvB,CAAgCH,KAAhC;AACA,iBAAK+F,iBAAL,CAAuBhG,WAAvB;AACD;AACF;;;uCAEcC,K,EAAa;AAC1B,cAAM2G,WAAW,GAAG,KAAKZ,iBAAL,CAAuB9F,EAAvB,CAA0BD,KAA1B,CAApB;;AACA,cAAI,KAAK4G,OAAL,CAAaD,WAAb,CAAJ,EAA+B;AAC7BA,uBAAW,CAACnW,GAAZ,CAAgB,MAAhB,EAAwBqW,SAAxB,CAAkC;AAACjW,qBAAO,EAAE;AAAV,aAAlC;AACA;AACD;;AAED,cAAIoP,KAAK,KAAK,KAAK+F,iBAAL,CAAuBpX,MAAvB,GAAgC,CAA1C,IAA+CgY,WAAW,CAACxI,KAAZ,CAAkB7H,IAAlB,CAAuBwQ,IAAvB,OAAkC,EAArF,EAAyF;AACvF;AACA,iBAAKf,iBAAL,CAAuB9R,IAAvB,CACE,KAAKwK,EAAL,CAAQY,KAAR,CAAc;AACZ/I,kBAAI,EAAE,CAAC,EAAD,CADM;AAEZG,yBAAW,EAAE,CAAC,EAAD,CAFD;AAGZmM,uCAAyB,EAAE,CAAC,EAAD,CAHf;AAIZC,wCAA0B,EAAE,CAAC,EAAD;AAJhB,aAAd,CADF;AAQD;;AAED,cAAI8D,WAAW,CAACxI,KAAZ,CAAkB7H,IAAtB,EAA4B;AAC1B,iBAAKpJ,eAAL,CAAqB6Z,WAArB,CAAiCJ,WAAW,CAACxI,KAAZ,CAAkB7H,IAAnD,EAAyDzI,SAAzD,CAAmE,UAAAC,IAAI,EAAI;AACzE,kBAAIA,IAAI,CAAC,QAAD,CAAR,EAAoB;AAClB6Y,2BAAW,CAACnW,GAAZ,CAAgB,MAAhB,EAAwBqW,SAAxB,CAAkC;AAACjW,yBAAO,EAAE9C,IAAI,CAAC,cAAD;AAAd,iBAAlC;AACD,eAFD,MAEO;AACL6Y,2BAAW,CAACnW,GAAZ,CAAgB,aAAhB,EAA+BsP,QAA/B,CAAwChS,IAAI,CAAC,aAAD,CAA5C;AACA6Y,2BAAW,CAACnW,GAAZ,CAAgB,2BAAhB,EAA6CsP,QAA7C,CAAsDhS,IAAI,CAAC,eAAD,CAA1D;AACD;AACF,aAPD;AAQD;AACF;;;gCAEOkZ,Y,EAA6B;AACnC,cAAMC,UAAU,GAAG,KAAKlB,iBAAL,CAAuBjB,QAAvB,CAAgChI,SAAhC,CACjB,UAAA1D,IAAI;AAAA,mBAAIA,IAAI,CAAC+E,KAAL,CAAW7H,IAAX,KAAoB0Q,YAAY,CAAC7I,KAAb,CAAmB7H,IAAvC,IAA+C8C,IAAI,CAAC8N,QAApD,IAAgE9N,IAAI,CAAC+E,KAAL,CAAW7H,IAAX,KAAoB,EAAxF;AAAA,WADa,CAAnB;AAEA,iBAAO2Q,UAAU,KAAK,CAAC,CAAvB;AACD;;;qCAEYE,K,EAAeC,Y,EAA6B;AACvD,cAAMC,aAAa,GAAG,UAAUC,OAAV,EAAwBC,OAAxB,EAAyC;AAC7D,mBAAO;AAAA,qBAAMD,OAAO,CAACZ,cAAR,CAAuBa,OAAvB,CAAN;AAAA,aAAP;AACD,WAFqB,CAEpB,IAFoB,EAEdJ,KAFc,EAEPK,IAFO,CAEF,IAFE,CAAtB;;AAIA,eAAKC,mBAAL,CAAyBC,2BAAzB,CAAqD,YAArD,EAAmE,QAAnE,EACEN,YADF,EACgB,KAAKxG,QADrB,EAC+B,IAD/B,EACqC,IADrC,EAC2CyG,aAD3C;AAED;;;;;;;uBAxEUb,iB,EAAiB,2H,EAAA,kI;AAAA,K;;;YAAjBA,iB;AAAiB,oC;AAAA;AAAA;0EAQjB,+D,EAAqB,I;;;;;;;;;;;;;;;;;;AClBlC;;AACE;;AACE;;AACE;;AAAgB;;AAAI;;AACpB;;AAAgB;;AAAW;;AAC3B;;AAAgB;;AAAM;;AACxB;;AACF;;AAEA;;AACE;;AAyBF;;AACF;;AAEA;;;;AAtCuD;;AAU/C;;AAAA;;;;;;;;;sEDAKA,iB,EAAiB;cAL7B,uDAK6B;eALnB;AACTlX,kBAAQ,EAAE,eADD;AAETC,qBAAW,EAAE,4BAFJ;AAGTC,mBAAS,EAAE,CAAC,2BAAD;AAHF,S;AAKmB,Q;;;;;;;;gBAC3B;;;gBACA;;;gBAMA,uD;iBAAU,+D,EAAqB;AAAE,sBAAQ;AAAV,W;;;;;;;;;;;;;;;;;;;;AElBlC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACwCQ;;;;;;AACA;;;;;;AAGA;;AACE;;AAAkC;;AAAO;;AAC3C;;;;;;AACA;;AACE;;AAAkC;;AAAM;;AAC1C;;;;;;AACA;;AACE;;AAAkC;;AAAK;;AACzC;;;;;;;;;;;;;;;;;;AAjBJ;;AACE;;AAAI;;AAAgE;;AAAgB;;AAAI;;AACxF;;AAAI;;AAAkB;;AACtB;;AAAI;;AAAqB;;AACzB;;AACE;;AACA;;AACF;;AACA;;AACE;;AAGA;;AAGA;;AAGF;;AACA;;AACE;;AAA+D;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAC7D;;AACF;;AACA;;AAA6D;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAC3D;;AACF;;AACA;;AAA6D;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAC3D;;AACF;;AACF;;AACF;;;;;;AA7BS;;AAAA;;AAA6D;;AAAA;;AAChE;;AAAA;;AACA;;AAAA;;AAEI;;AAAA;;AACA;;AAAA;;AAEsB;;AAAA;;AAIvB;;AAAA;;AAGA;;AAAA;;;;;;;;;;QDvCAmY,iB;;;AASX,iCAAoBza,eAApB,EACoBI,cADpB,EAEoBN,MAFpB,EAEoC;AAAA;;AAFhB,aAAAE,eAAA,GAAAA,eAAA;AACA,aAAAI,cAAA,GAAAA,cAAA;AACA,aAAAN,MAAA,GAAAA,MAAA;AAPpB,aAAA4a,wBAAA,GAA2B,KAA3B;AAOuC;;;;mCAE5B,CACV;;;iCAEQ;AAAA;;AACP,eAAKta,cAAL,CAAoB+M,aAApB;AACA,eAAKwN,KAAL,GAAa,EAAb;AACA,eAAK7S,MAAL,GAAc,KAAKA,MAAL,GAAc,KAAKA,MAAL,CAAY8R,IAAZ,EAAd,GAAmC,EAAjD;AACA,eAAK7R,QAAL,GAAgB,KAAKA,QAAL,GAAgB,KAAKA,QAAL,CAAc6R,IAAd,EAAhB,GAAuC,EAAvD;AACA,eAAK5Z,eAAL,CAAqB4a,WAArB,CAAiC,KAAK9S,MAAtC,EAA8C,KAAKC,QAAnD,EAA6DpH,SAA7D,CACE,UAAAC,IAAI,EAAI;AACN,gBAAI,CAACA,IAAI,CAAC,CAAD,CAAT,EAAc;AACZ,qBAAI,CAACR,cAAL,CAAoBiY,aAApB,CAAkC,SAAlC,EAA6C,YAA7C,EAA2D,+DAAYwC,OAAvE;AACD,aAFD,MAEO,IAAIja,IAAI,CAAC,CAAD,CAAJ,CAAQ,QAAR,CAAJ,EAAuB;AAC5B,kBAAMka,QAAQ,GAAcla,IAA5B;AACAka,sBAAQ,CAAC9N,OAAT,CAAkB,UAAAI,GAAG;AAAA,uBAAI,OAAI,CAAChN,cAAL,CAAoBiN,GAApB,CAAwBD,GAAxB,CAAJ;AAAA,eAArB;AACD,aAHM,MAGA;AACL,qBAAI,CAACuN,KAAL,GAAyB/Z,IAAzB;AACD;AACF,WAVH;AAYD;;;oCAEWiF,M,EAAM;AAChB,cAAIA,MAAM,CAACgI,OAAP,KAAmB,EAAvB,EAA4B;AACzB,iBAAKkN,MAAL;AACF;AACF;;;kCAEM;AACL,eAAKjb,MAAL,CAAY2E,QAAZ,CAAqB,CAAC,OAAD,EAAU,GAAV,EAAe;AAACsP,kBAAM,EAAE;AAAT,WAAf,CAArB;AACD;;;oCAEWjM,M,EAAc;AACxB,eAAKhI,MAAL,CAAY2E,QAAZ,CAAqB,CAAC,OAAD,EAAUqD,MAAV,EAAkB;AAACiM,kBAAM,EAAE;AAAT,WAAlB,CAArB;AACD;;;mCAEUjM,M,EAAc;AACvB,eAAKhI,MAAL,CAAY2E,QAAZ,CAAqB,CAAC,OAAD,EAAUqD,MAAV,EAAkB;AAACiM,kBAAM,EAAE;AAAT,WAAlB,CAArB;AACD;;;mCAEUjM,M,EAAc;AACvB,eAAKkT,eAAL,GAAuBlT,MAAvB;AACA,eAAK4S,wBAAL,GAAgC,IAAhC;AACD;;;yCAEa;AACZ,eAAKA,wBAAL,GAAgC,KAAhC;AACD;;;0CAEc;AAAA;;AACb,cAAMO,mBAAmB,GAAG,KAAKN,KAAL,CAAW/Y,IAAX,CAAiB,UAAAiF,GAAG;AAAA,mBAAIA,GAAG,CAAC+B,OAAJ,KAAgB,OAAI,CAACoS,eAAzB;AAAA,WAApB,EAA8D1R,aAA1F;AACA,eAAKtJ,eAAL,CAAqBkb,UAArB,CAAgCD,mBAAhC,EAAqDta,SAArD,CAAgE,UAAAwa,QAAQ,EAAI;AAC1E,mBAAI,CAACT,wBAAL,GAAgC,KAAhC;;AACA,gBAAIS,QAAJ,EAAc;AACZ,kBAAML,QAAQ,GAAcK,QAA5B;AACAL,sBAAQ,CAAC9N,OAAT,CAAkB,UAAAI,GAAG;AAAA,uBAAI,OAAI,CAAChN,cAAL,CAAoBiN,GAApB,CAAwBD,GAAxB,CAAJ;AAAA,eAArB;AACD,aAHD,MAGO;AACL,qBAAI,CAAC2N,MAAL;AACD;AACF,WARD;AASD;;;4BAlEiC;AAAC,iBAAO,KAAKL,wBAAL,GAAgC,OAAhC,GAA0C,MAAjD;AAA0D;;;;;;;uBAPlFD,iB,EAAiB,kI,EAAA,kI,EAAA,uH;AAAA,K;;;YAAjBA,iB;AAAiB,oC;AAAA,e;AAAA,a;AAAA,gmE;AAAA;AAAA;ACX9B;;AACE;;AACE;;AACE;;AAAqD;;AAAQ;;AAC7D;;AAAmC;AAAA;AAAA,aAAoB,OAApB,EAAoB;AAAA,mBAAoD,IAAAW,WAAA,QAApD;AAAuE,WAA3F;;AAAnC;;AACF;;AACA;;AACE;;AAAuD;;AAAU;;AACjE;;AAAuC;AAAA;AAAA,aAAsB,OAAtB,EAAsB;AAAA,mBAAoD,IAAAA,WAAA,QAApD;AAAuE,WAA7F;;AAAvC;;AACF;;AACF;;AAEA;;AACE;;AAA2E;AAAA,mBAAS,IAAAL,MAAA,EAAT;AAAiB,WAAjB;;AAAmB;;AAAM;;AACtG;;AACF;;AAEA;;AACE;;AACA;;AACE;;AAAqD;AAAA,mBAAS,IAAAM,OAAA,EAAT;AAAkB,WAAlB;;AAAoB;;AAAkC;;AAAG;;AAChH;;AACA;;AACE;;AACA;;AACE;;AAAgB;;AAAO;;AACvB;;AAAgB;;AAAS;;AACzB;;AAAgB;;AAAY;;AAC5B;;AAAgB;;AAAO;;AACvB;;AAAgB;;AAAc;;AAC9B;;AAAgB;;AAAM;;AACxB;;AACA;;AAEA;;AACA;;AA+BA;;AACF;;AAEA;;AAEE;;AACE;;AACE;;AACE;;AAA6C;;AAAgB;;AAC7D;;AAAoC;AAAA,mBAAS,IAAAC,cAAA,EAAT;AAAyB,WAAzB;;AAClC;;AAAyB;;AAAO;;AAClC;;AACF;;AACA;;AACE;;AAAG;;AAAsD;;AAC3D;;AACA;;AACE;;AAA4D;AAAA,mBAAS,IAAAA,cAAA,EAAT;AAAyB,WAAzB;;AAA2B;;AAAM;;AAC7F;;AAA2D;AAAA,mBAAS,IAAAC,eAAA,EAAT;AAA0B,WAA1B;;AAA4B;;AAAO;;AAChG;;AACF;;AACF;;AACF;;AAEF;;;;AAtFyC;;AAAA;;AAII;;AAAA;;AA2BrC;;AAAA;;AAkCkB;;AAAA;;AACnB;;AAUM;;AAAA;;;;;;;;;sEDrEAd,iB,EAAiB;cAL7B,uDAK6B;eALnB;AACTrY,kBAAQ,EAAE,eADD;AAETC,qBAAW,EAAE,4BAFJ;AAGTC,mBAAS,EAAE,CAAC,2BAAD;AAHF,S;AAKmB,Q;;;;;;;;;;;;;;;;;;;;;;;;;;AEX9B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAWakZ,mB;;;;;;;;;sCAEGpc,S,EACAqc,Y,EACAC,Y,EACAC,S,EAA+B;AAC3C,iBAAOvc,SAAS,CAACC,aAAV,GAA0BD,SAAS,CAACC,aAAV,EAA1B,GAAsD,IAA7D;AACD;;;;;;;uBAPUmc,mB;AAAmB,K;;;aAAnBA,mB;AAAmB,eAAnBA,mBAAmB,K;AAAA,kBAFlB;;;;;sEAEDA,mB,EAAmB;cAH/B,wDAG+B;eAHpB;AACV1X,oBAAU,EAAE;AADF,S;AAGoB,Q;;;;;;;;;;;;;;;;;;ACXhC;AAAA;;;AAAA;AAAA;AAAA,O,CAAA;AACA;AACA;AACA;;;AAEO,QAAM8X,WAAW,GAAG;AACzBC,gBAAU,EAAE,KADa;AAEzBrb,kBAAY,EAAE;AAFW,KAApB;;;;;;;;;;;;;;;;ACLP;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAMA,QAAI,sEAAYqb,UAAhB,EAA4B;AAC1B;AACD;;AAED,gFAAyBC,eAAzB,CAAyC,yDAAzC,WACS,UAAAC,GAAG;AAAA,aAAI9R,OAAO,CAAC+R,GAAR,CAAYD,GAAZ,CAAJ;AAAA,KADZ","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport {NotFoundComponent} from \"./not-found/not-found.component\";\nimport {ErrorPageComponent} from \"./error-page/error-page.component\";\nimport {UserListComponent} from \"./user/user-list/user-list.component\";\nimport {UserDetailComponent} from \"./user/user-detail/user-detail.component\";\nimport {WorkProtectionGuard} from \"./work-protection.guard\";\n\nconst routes: Routes = [\n  // The dashboard app is lazy loading\n  // { path: 'users', loadChildren: 'app/user/user.module#UserModule'},\n  { path: 'users', component: UserListComponent},\n  { path: 'users/:userID', component: UserDetailComponent, canDeactivate: [WorkProtectionGuard]},\n  { path: 'dashboard', loadChildren: () => import('app/dashboard/dashboard.module').then(m => m.DashboardModule)},\n  { path: 'handsontable', loadChildren: () => import('app/handsontable/handsontable.module').then(m => m.HandsontableModule)},\n  { path: 'errors', component: ErrorPageComponent },\n  { path: 'pageNotFound', component: NotFoundComponent },\n  { path: '**', component: NotFoundComponent }\n];\n\n@NgModule({\n  exports: [ RouterModule ],\n  imports: [ RouterModule.forRoot(routes) ]\n})\nexport class AppRoutingModule {}\n","import {Component, OnInit, ViewChild} from '@angular/core';\nimport {SideMenuComponent} from \"./side-menu/side-menu.component\";\nimport {ActivatedRoute, NavigationEnd, Router} from \"@angular/router\";\nimport {HistoryService} from \"./history.service\";\nimport {filter, map, mergeMap} from \"rxjs/operators\";\nimport {IdentityService} from \"./identity.service\";\nimport {ShareService} from \"./share.service\";\nimport {of} from \"rxjs\";\nimport {EntityService} from \"jor-angular\";\nimport {environment} from \"../environments/environment\";\nimport {App} from \"./role\";\nimport {MessageService} from \"ui-message-angular\";\nimport {LogonService} from \"ui-logon-angular\";\nimport {msgStore} from './msgStore';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent implements OnInit {\n  @ViewChild(SideMenuComponent, { static: true })\n  private sideMenu: SideMenuComponent;\n\n  isCollapsed = false;\n  constructor(private router: Router,\n              private activatedRoute: ActivatedRoute,\n              private identityService: IdentityService,\n              private shareService: ShareService,\n              private historyService: HistoryService,\n              private entityService: EntityService,\n              private messageService: MessageService,\n              private logonService: LogonService\n  ) {\n    this.entityService.setOriginalHost(environment.originalHost);\n    this.logonService.setHost(environment.originalHost);\n    this.logonService.session().subscribe( data => {\n      this.identityService.setSession( data );\n      this.messageService.setMessageStore(msgStore, this.identityService.Session.LANGUAGE);\n    });\n  }\n\n  ngOnInit() {\n    this.router.events.pipe(\n      filter(event => event instanceof NavigationEnd),\n      map(() => this.activatedRoute),\n      filter(route => route.outlet === 'primary'),\n      map(route => {\n        let url = '';\n        while (route.firstChild) {\n          route = route.firstChild;\n          if ( route.snapshot.url.length > 0 ) {\n            url = url ? url + '/' + route.snapshot.url.join('/') : route.snapshot.url.join('/');\n          }\n        }\n        return url;\n      }),\n      mergeMap(url => {\n        if (this.shareService.apps.length === 0) {\n          // return this.identityService.getApp('/' + url);\n          return of(null);\n        } else {\n          return of(this.shareService.apps.find( app => app.routeLink === '/' + url ));\n        }\n      }))\n      .subscribe(app => {\n        if (app && app['routeLink']) {\n          this.sideMenu.activateApp(<App>app);\n          this.historyService.addHistory(<App>app);\n        }\n      });\n  }\n\n  onCollapse() {\n    this.isCollapsed = this.sideMenu.collapse();\n  }\n}\n","<div class=\"dk-frame-view\">\n  <!-- Head Bar Navigation -->\n  <app-head-bar (onCollapse)=\"onCollapse()\"></app-head-bar>\n\n  <div class=\"dk-frame-content\">\n    <!-- Side Bar Navigation -->\n    <app-side-menu></app-side-menu>\n\n    <!-- Content Area -->\n    <div class=\"dk-content-area\">\n      <router-outlet></router-outlet>\n    </div>\n  </div>\n</div>\n\n<!--<router-outlet></router-outlet>-->\n","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { AppComponent } from './app.component';\nimport { AppRoutingModule } from './app-routing.module';\nimport { SideMenuComponent } from './side-menu/side-menu.component';\nimport { HeadBarComponent } from './head-bar/head-bar.component';\nimport { MockupModule } from \"./mockup/mockup.module\";\nimport { HttpClientModule } from \"@angular/common/http\";\nimport { ExternalAppModule } from \"./external-app/external-app.module\";\nimport { NotFoundComponent } from './not-found/not-found.component';\nimport { ErrorPageComponent } from './error-page/error-page.component';\nimport {MessageModule} from \"ui-message-angular\";\nimport {RouteReuseStrategy} from \"@angular/router\";\nimport {CustomReuseStrategy} from \"./custom.reuse.strategy\";\nimport {UserListComponent} from \"./user/user-list/user-list.component\";\nimport {UserDetailComponent} from \"./user/user-detail/user-detail.component\";\nimport {UserBasicComponent} from \"./user/user-detail/user-basic/user-basic.component\";\nimport {UserPersonalizationComponent} from \"./user/user-detail/user-personalization/user-personalization.component\";\nimport {UserRoleComponent} from \"./user/user-detail/user-role/user-role.component\";\nimport {UserEmailComponent} from \"./user/user-detail/user-email/user-email.component\";\nimport {UserAddressComponent} from \"./user/user-detail/user-address/user-address.component\";\nimport {FormsModule, ReactiveFormsModule} from \"@angular/forms\";\nimport {JorAngularModule} from \"jor-angular\";\nimport {LogonModule} from \"ui-logon-angular\";\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    SideMenuComponent,\n    HeadBarComponent,\n    UserListComponent,\n    UserDetailComponent,\n    UserBasicComponent,\n    UserPersonalizationComponent,\n    UserRoleComponent,\n    UserEmailComponent,\n    UserAddressComponent,\n    NotFoundComponent,\n    ErrorPageComponent\n  ],\n  imports: [\n    BrowserModule,\n    FormsModule,\n    ReactiveFormsModule,\n    MessageModule,\n    MockupModule,\n    ExternalAppModule,\n    AppRoutingModule,\n    HttpClientModule,\n    JorAngularModule,\n    LogonModule\n  ],\n  bootstrap: [\n    AppComponent\n  ],\n  providers: [\n    {provide: RouteReuseStrategy, useClass: CustomReuseStrategy}\n  ]\n})\nexport class AppModule { }\n","/**\n * The custom route reuse strategy inherits the \"RouteReuseStrategy\" to achieve a very usual case,\n * which by default, Angular doesn't support.\n * 1. Search for items based on filter conditions.\n * 2. Navigate to one of the item to the detail page(component).\n * 3. Navigate back to searched item list without re-initializing the search&list component again.\n * This requires the Angular route to save the search&list component, and restore it whenever back.\n * The detail solution is described in following thread:\n * https://stackoverflow.com/questions/41280471/how-to-implement-routereusestrategy-shoulddetach-for-specific-routes-in-angular\n */\nimport {ActivatedRouteSnapshot, DetachedRouteHandle, RouteReuseStrategy} from '@angular/router';\nimport { Injectable } from \"@angular/core\";\n\n@Injectable()\nexport class CustomReuseStrategy implements RouteReuseStrategy {\n  routesToCache: string[] = ['users'];\n  storedRouteHandles = new Map<string, DetachedRouteHandle>();\n\n  /**\n   * When navigation from a reusable component, and if shouldReuseRoute return false,\n   * this method is invoked to decide whether the current route should be stored.\n   * @param route\n   */\n  shouldDetach(route: ActivatedRouteSnapshot): boolean {\n    // console.log('detaching', route);\n    return this.routesToCache.indexOf(route.routeConfig.path) > -1;\n  }\n\n  /**\n   * If the current route need to be stored, that is shouldDetach return true,\n   * then on this method, you can implement a way to store routes. Usually in a Map.\n   * @param route\n   * @param handle\n   */\n  store(route: ActivatedRouteSnapshot, handle: DetachedRouteHandle): void {\n    // console.log('store', route);\n    this.storedRouteHandles.set(route.routeConfig.path, handle);\n  }\n\n  /**\n   * When navigation to a reusable component, and if shouldReuseRoute return false,\n   * this method is invoked to decide whether the target component can be get from a reuse buffer.\n   * @param route\n   */\n  shouldAttach(route: ActivatedRouteSnapshot): boolean {\n    // console.log('shouldAttach', route);\n    return this.storedRouteHandles.has(route.routeConfig.path);\n  }\n\n  /**\n   * If shouldAttach return true, then this method is invoke to retrieve the component from the buffer.\n   * @param route\n   */\n  retrieve(route: ActivatedRouteSnapshot): DetachedRouteHandle {\n    return this.storedRouteHandles.get(route.routeConfig.path);\n  }\n\n  /**\n   * By default, Angular doesn't re-initializing the same component if the navigation is not to\n   * a different one. For example, you switch different entity ID in the same entity type detail page.\n   * In this way, shouldReuseRoute should return true to avoid executing other methods in this Class.\n   * However, if you navigate from search&list component to entity detail component, then the method should return false.\n   * So that other methods can be executed to decide whether the search&list component should be stored for future reuse.\n   * @param future\n   * @param curr\n   */\n  shouldReuseRoute(future: ActivatedRouteSnapshot, curr: ActivatedRouteSnapshot): boolean {\n    // console.log('shouldReuseRoute, future:', future, 'current:', curr);\n    return future.routeConfig === curr.routeConfig;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport {Observable, of} from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DialogService {\n\n  /**\n   * Ask user to confirm an action. `message` explains the action and choices.\n   * Returns observable resolving to `true`=confirm or `false`=cancel\n   */\n  confirm(message?: string): Observable<boolean> {\n    const confirmation = window.confirm(message || 'Is it OK?');\n\n    return of(confirmation);\n  }\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-error-page',\n  templateUrl: './error-page.component.html',\n  styleUrls: ['./error-page.component.css']\n})\nexport class ErrorPageComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","<dk-message></dk-message>\n\n","import { NgModule } from '@angular/core';\nimport {RouterModule, Routes} from \"@angular/router\";\nimport {ExternalAppComponent} from \"./external-app.component\";\n\nconst routes: Routes = [\n  {\n    path: 'external-app/:appID', component: ExternalAppComponent\n  }\n];\n\n@NgModule({\n  imports: [\n    RouterModule.forChild(routes)\n  ],\n  exports: [\n    RouterModule\n  ]\n})\nexport class ExternalAppRoutingModule { }\n","import {Component, OnInit} from '@angular/core';\nimport {ActivatedRoute, ParamMap, Router} from '@angular/router';\nimport {DomSanitizer} from \"@angular/platform-browser\";\nimport {switchMap} from \"rxjs/operators\";\nimport {ShareService} from \"../share.service\";\nimport {App} from \"../role\";\nimport {IdentityService} from \"../identity.service\";\nimport {of} from \"rxjs\";\n\n@Component({\n  selector: 'app-external-app',\n  templateUrl: './external-app.component.html',\n  styleUrls: ['./external-app.component.css']\n})\nexport class ExternalAppComponent implements OnInit {\n  appUrl;\n  // iFrameWidth: string;\n  apps: App[] = [];\n\n  constructor(\n    private route: ActivatedRoute,\n    private shareService: ShareService,\n    private identityService: IdentityService,\n    private sanitizer: DomSanitizer,\n    private router: Router\n  ) { }\n\n  ngOnInit() {\n    this.route.paramMap.pipe(\n      switchMap((params: ParamMap) => {\n          const appID = params.get('appID');\n          if (this.shareService.apps.length === 0) {\n            return this.identityService.getAppRouteLink(appID);\n          } else {\n            return of(this.shareService.apps.find( app => app.appID === appID).originalRouteLink);\n          }\n        }\n      )).subscribe(routeLink => {\n        if (routeLink === 'appNotFound') {\n          this.router.navigate(['pageNotFound']);\n        } else {\n          const appDangerousUrl = routeLink.substr(0, 4) === 'http' ? routeLink :\n            window.location.origin + routeLink;\n          this.appUrl = this.sanitizer.bypassSecurityTrustResourceUrl(appDangerousUrl);\n        }\n    });\n  }\n}\n","<iframe [src]=\"appUrl\" class=\"nav-content-iframe\">\n</iframe>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport {ExternalAppRoutingModule} from \"./external-app-routing.module\";\nimport {ExternalAppComponent} from \"./external-app.component\";\n\n@NgModule({\n  imports: [\n    CommonModule,\n    ExternalAppRoutingModule\n  ],\n  declarations: [\n    ExternalAppComponent\n  ]\n})\nexport class ExternalAppModule { }\n","import {Component, EventEmitter, HostListener, Inject, OnInit, Output} from '@angular/core';\nimport {App} from \"../role\";\nimport {HistoryService} from \"../history.service\";\nimport {DOCUMENT} from \"@angular/common\";\nimport {LogonService, Session} from \"ui-logon-angular\";\nimport {IdentityService} from \"../identity.service\";\n\n@Component({\n  selector: 'app-head-bar',\n  templateUrl: './head-bar.component.html',\n  styleUrls: ['./head-bar.component.css']\n})\nexport class HeadBarComponent implements OnInit {\n  @Output() onCollapse = new EventEmitter<boolean>();\n  navHistory: App[];\n  currentApp: App;\n  dropdown = {\n    historyOpen: false,\n    notificationOpen: false,\n    preferenceOpen: false\n  };\n  userBasicInfo: Session = new Session();\n\n  constructor(@Inject(DOCUMENT)\n              private document: any,\n              private history: HistoryService,\n              private logonService: LogonService,\n              private identityService: IdentityService) { }\n\n  ngOnInit() {\n    this.history.currentHistoryObserver.subscribe(history => this.navHistory = history );\n    this.history.currentAppObserver.subscribe(currentApp => this.currentApp = currentApp );\n    this.logonService.session().subscribe( session => this.userBasicInfo = session );\n    this.userBasicInfo = this.identityService.Session;\n  }\n\n  @HostListener('document:mouseup', ['$event', 'dropdown'])\n  mouseupDocument($event, dropdown): void {\n    if ($event.srcElement.className !== 'dk-nav-toggle') {\n      dropdown.historyOpen = false;\n      dropdown.notificationOpen = false;\n      dropdown.preferenceOpen = false;\n    }\n  }\n\n  collapse() {\n    this.onCollapse.emit();\n  }\n\n  toggleHistoryDropdown() {\n    this.dropdown.historyOpen = !this.dropdown.historyOpen;\n    this.dropdown.notificationOpen = false;\n    this.dropdown.preferenceOpen = false;\n  }\n\n  toggleNotificationDropdown() {\n    this.dropdown.notificationOpen = !this.dropdown.notificationOpen;\n    this.dropdown.historyOpen = false;\n    this.dropdown.preferenceOpen = false;\n  }\n\n  togglePreferenceOpen() {\n    this.dropdown.preferenceOpen = !this.dropdown.preferenceOpen;\n    this.dropdown.historyOpen = false;\n    this.dropdown.notificationOpen = false;\n  }\n\n  logout() {\n    this.logonService.logout().subscribe(() => this.document.location.href = window.location.origin);\n  }\n}\n","<nav class=\"dk-navbar-inverse\">\n  <div class=\"dk-navbar-header\">\n    <button type=\"button\" class=\"dk-navbar-toggle\" (click)=\"collapse()\">\n      <span class=\"dk-sr-only\">Toggle navigation</span>\n      <span class=\"dk-icon-bar\"></span>\n      <span class=\"dk-icon-bar\"></span>\n      <span class=\"dk-icon-bar\"></span>\n    </button>\n    <a class=\"dk-navbar-brand\" href=\"#\"><img alt=\"Brand\" src=\"assets/darkhouse.png\"></a>\n  </div>\n\n  <!-- Application Name or Title -->\n  <div class=\"dk-navbar-center\">\n    <ul class=\"dk-nav dk-navbar-nav dk-navbar-app-title\">\n      <li [ngClass]=\"{'open': dropdown.historyOpen}\">\n        <a (click)=\"toggleHistoryDropdown()\" class=\"dk-nav-toggle\">{{currentApp.name}} <b class=\"dk-caret\"></b></a>\n        <ul class=\"dk-dropdown-menu\">\n          <li *ngFor=\"let app of navHistory\"><a routerLink=\"{{app.routeLink}}\">\n            {{app.name}}</a>\n          </li>\n        </ul>\n      </li>\n    </ul>\n  </div>\n\n  <!-- Generic Functions in the header bar -->\n  <div class=\"dk-navbar-right\">\n    <ul class=\"dk-nav dk-navbar-nav\">\n      <li [ngClass]=\"{'open': dropdown.notificationOpen}\">\n        <a (click)=\"toggleNotificationDropdown()\" class=\"dk-nav-toggle\"><span\n          class=\"fas fa-bell\"></span><span class=\"dk-label dk-badge\">32</span>\n        </a>\n        <ul class=\"dk-dropdown-menu\">\n          <li><a href=\"#\"><span class=\"dk-label dk-label-warning\">4:00 AM</span>Favourites Snippet</a></li>\n          <li><a href=\"#\"><span class=\"dk-label dk-label-warning\">4:30 AM</span>Email marketing</a></li>\n          <li><a href=\"#\"><span class=\"dk-label dk-label-warning\">5:00 AM</span>Subscriber focused email\n            design</a></li>\n          <li class=\"dk-divider\"></li>\n          <li><a href=\"#\" class=\"dk-text-center\">View All</a></li>\n        </ul>\n      </li>\n      <li [ngClass]=\"{'open': dropdown.preferenceOpen}\">\n        <a (click)=\"togglePreferenceOpen()\" class=\"dk-nav-toggle\"><span\n          class=\"fas fa-user\"></span>{{userBasicInfo && userBasicInfo.DISPLAY_NAME}} <b class=\"dk-caret\"></b>\n        </a>\n        <ul class=\"dk-dropdown-menu\">\n          <li><a href=\"#\"><span class=\"fas fa-user\"></span>Profile</a></li>\n          <li><a href=\"#\"><span class=\"fas fa-cog\"></span>Settings</a></li>\n          <li class=\"dk-divider\"></li>\n          <li><a (click)=\"logout()\"><span class=\"fas fa-power-off\"></span>Logout</a></li>\n        </ul>\n      </li>\n    </ul>\n  </div>\n</nav>\n","import { Injectable } from '@angular/core';\nimport {App} from \"./role\";\nimport {BehaviorSubject} from \"rxjs/internal/BehaviorSubject\";\n\n@Injectable({providedIn: 'root'})\nexport class HistoryService {\n  private navHistory: App[] = [];\n  private historySource = new BehaviorSubject<App[]>([]);\n  private currentApp = new BehaviorSubject<App>(<App>{name: 'Home'});\n  private readonly NUM_OF_HISTORY = 10;\n  currentHistoryObserver = this.historySource.asObservable();\n  currentAppObserver = this.currentApp.asObservable();\n\n  constructor() { }\n\n  addHistory(app: App) {\n    const idx = this.navHistory.map(ele => ele.routeLink)\n                               .indexOf(app.routeLink);\n    if ( idx > -1 ) {\n      this.navHistory.splice(idx, 1);\n    }\n    this.navHistory.push(app);\n    if (this.navHistory.length > this.NUM_OF_HISTORY ) {\n      this.navHistory.shift();\n    }\n    this.historySource.next(this.navHistory);\n    this.currentApp.next(app);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport {HttpClient, HttpHeaders} from '@angular/common/http';\nimport {Observable, of} from 'rxjs';\nimport {catchError, map} from 'rxjs/operators';\nimport {App, Role} from \"./role\";\nimport {Entity, QueryObject} from \"jor-angular\";\nimport {Router} from \"@angular/router\";\nimport {environment} from \"../environments/environment\";\nimport {Message, MessageService, messageType} from \"ui-message-angular\";\nimport {Session} from 'ui-logon-angular';\nimport {UserList} from \"./user\";\nimport {formatDate} from \"@angular/common\";\n\nconst httpOptions = {\n  headers: new HttpHeaders({ 'Content-Type': 'application/json' })\n};\n\n@Injectable({providedIn: 'root'})\nexport class IdentityService {\n  private originalHost = environment.originalHost;\n  private session: Session;\n\n  constructor(private http: HttpClient,\n              private messageService: MessageService,\n              private router: Router) {\n  }\n\n  setSession( data: any ) {\n    this.session = <Session>data;\n  }\n\n  get Session(): Session {\n    if (this.session) { return this. session; }\n    const defaultSession = new Session();\n    defaultSession.USER_ID = 'DH001';\n    defaultSession.LANGUAGE = 'EN';\n    return defaultSession;\n  }\n\n  get CurrentTime(): string {\n    return formatDate( new Date(), 'yyyy-MM-dd hh:mm:ss', 'en-US' );\n  }\n\n  /**\n   * Get a role detail information from backend based on an authenticated user\n   * @returns {Observable<Role>}\n   */\n  getRoleDetail(): Observable<Role[]> {\n    return this.http.post<Role[]>(this.originalHost + `/api/function/getRoleDetail`, {}, httpOptions).pipe(\n      catchError(this.handleError<any>('getRoleDetail')));\n  }\n\n  /**\n   * Get an APP detail based on a routeLink\n   * @param {string} routeLink\n   * @returns {Observable<App>}\n   */\n  getApp(routeLink: string): Observable<App> {\n    if (routeLink.substr(0, 13) === '/external-app') {\n      return this.http.post<Entity>(this.originalHost + `/api/entity/instance`,\n        {RELATION_ID: 'app', APP_ID: routeLink.substr(14)}, httpOptions).pipe(\n        map(appEntity => {\n          const app: App = new App;\n          if (Array.isArray(appEntity)) { appEntity = appEntity[0]; } // Could return an array, like message or multiple entities\n          if (appEntity['ENTITY_ID']) { // It returns entity instance, rather than an error message;\n            app.name = appEntity['app'][0]['NAME'];\n            app.routeLink = routeLink;\n          }\n          return app;\n        }),\n        catchError(this.handleError<any>('getApp')));\n    } else {\n      return this.http.post<Entity>(this.originalHost + `/api/entity/instance`,\n        {RELATION_ID: 'app', ROUTE_LINK: routeLink}, httpOptions).pipe(\n        map(appEntity => {\n          const app: App = new App;\n          if (Array.isArray(appEntity)) { appEntity = appEntity[0]; }\n          if (appEntity['ENTITY_ID']) {\n            app.name = appEntity['app'][0]['NAME'];\n            app.routeLink = appEntity['app'][0]['ROUTE_LINK'];\n          }\n          return app;\n        }),\n        catchError(this.handleError<any>('getApp')));\n    }\n  }\n\n  /**\n   * Get an APP's routelink from its appID\n   * @param appID\n   */\n  getAppRouteLink(appID: string): Observable<string> {\n    return this.http.post<string>(this.originalHost + `/api/entity/instance`,\n      {RELATION_ID: 'app', APP_ID: appID}, httpOptions).pipe(\n      map(appEntity => {\n        if (Array.isArray(appEntity)) { appEntity = appEntity[0]; } // Could return an array, like message or multiple entities\n        if (appEntity['ENTITY_ID']) { // It returns entity instance, rather than an error message;\n          return appEntity['app'][0]['ROUTE_LINK'];\n        } else {\n          return 'appNotFound';\n        }\n      }),\n      catchError(this.handleError<any>('getAppRouteLink')));\n  }\n\n  /**\n   * Search Users by USER_ID and USER_NAME.\n   * Return a list with columns USER_ID, USER_NAME, DISPLAY_NAME, LOCK, and PWD_STATE\n   * Wildcard search is supported using '*' or '%'.\n   **/\n  searchUsers(userID: string, userName: string): Observable<UserList[] | Message[]> {\n    const queryObject = new QueryObject();\n    queryObject.ENTITY_ID = 'person';\n    queryObject.RELATION_ID = 'r_user';\n    queryObject.PROJECTION = ['USER_ID', 'USER_NAME', 'DISPLAY_NAME', 'LOCK', 'PWD_STATE'];\n    queryObject.FILTER = [];\n    if (userID) {\n      if (userID.includes('*') || userID.includes('%')) {\n        queryObject.FILTER.push({FIELD_NAME: 'USER_ID', OPERATOR: 'CN', LOW: userID});\n      } else {\n        queryObject.FILTER.push({FIELD_NAME: 'USER_ID', OPERATOR: 'EQ', LOW: userID});\n      }\n    }\n    if (userName) {\n      if (userName.includes('*')) {\n        userName = userName.replace(/\\*/gi, '%');\n        queryObject.FILTER.push({FIELD_NAME: 'USER_NAME', OPERATOR: 'CN', LOW: userName});\n      } else {\n        queryObject.FILTER.push({FIELD_NAME: 'USER_NAME', OPERATOR: 'EQ', LOW: userName});\n      }\n    }\n    queryObject.SORT = ['USER_ID'];\n    return this.http.post<any>(this.originalHost + `/api/query`, queryObject, httpOptions).pipe(\n      catchError(this.handleError<any>('searchObjects')));\n  }\n\n  /**\n   * Get detail information of a user from USER_ID\n   * Return information in Relations: r_user, r_employee, r_email, r_address, and r_personalization.\n   * The relationship to user role is also inquired with information in Relation: r_role\n   **/\n  getUserDetail(userID: string): Observable<Entity | Message[]> {\n    const pieceObject = {\n      ID: { RELATION_ID: 'r_user', USER_ID: userID},\n      piece: {RELATIONS: ['r_user', 'r_employee', 'r_email', 'r_address', 'r_personalization'],\n              RELATIONSHIPS: [\n                {\n                  RELATIONSHIP_ID: 'rs_user_role',\n                  PARTNER_ENTITY_PIECES: { RELATIONS: ['r_role'] }\n                }]\n      }\n    };\n    return this.http.post<Entity | Message[]>(\n      this.originalHost + `/api/entity/instance/piece`, pieceObject, httpOptions).pipe(\n      catchError(this.handleError<any>('getUserDetail')));\n  }\n\n  /**\n   * Get user by User ID, only return information in Relations: r_user\n   * This service call is mainly used to check whether the given USER_ID already exists\n   **/\n  getUserByUserID(userID: string): Observable<Entity | Message[]> {\n    const pieceObject = {\n      ID: { RELATION_ID: 'r_user', USER_ID: userID},\n      piece: {RELATIONS: ['r_user']}\n    };\n    return this.http.post<Entity | Message[]>(\n      this.originalHost + `/api/entity/instance/piece`, pieceObject, httpOptions).pipe(\n      catchError(this.handleError<any>('getUserByUserID')));\n  }\n\n  getUserByUserName(userName: string): Observable<Entity | Message[]> {\n    const pieceObject = {\n      ID: { RELATION_ID: 'r_user', USER_NAME: userName},\n      piece: {RELATIONS: ['r_user']}\n    };\n    return this.http.post<Entity | Message[]>(\n      this.originalHost + `/api/entity/instance/piece`, pieceObject, httpOptions).pipe(\n      catchError(this.handleError<any>('getUserByUserName')));\n  }\n\n  getRoleDesc(roleID: string): Observable<{}> {\n    const pieceObject = {\n      ID: { RELATION_ID: 'r_role', NAME: roleID},\n      piece: {RELATIONS: ['r_role']}\n    };\n    return this.http.post<{}>(\n      this.originalHost + `/api/entity/instance/piece`, pieceObject, httpOptions).pipe(\n       map(instance => {\n         return 'INSTANCE_GUID' in instance ?\n         {\n           INSTANCE_GUID: instance['INSTANCE_GUID'],\n           DESCRIPTION: instance['r_role'] ? instance['r_role'][0]['DESCRIPTION'] : ''\n         } : instance[0];\n       }),\n       catchError(this.handleError<any>('getRoleDesc')));\n  }\n\n  /**\n   * Save an entity to DB\n   * A generic entity in JSON is given. If the JSON has attribute INSTANCE_GUID, it calls PUT, otherwise, POST\n   **/\n  saveUser(user: Entity): Observable<Entity | Message[]> {\n    if (user['INSTANCE_GUID']) {\n      return this.http.put<Entity | Message[]>(\n        this.originalHost + `/api/entity`, user, httpOptions).pipe(\n        catchError(this.handleError<any>('saveUser')));\n    } else {\n      return this.http.post<Entity | Message[]>(\n        this.originalHost + `/api/entity`, user, httpOptions).pipe(\n        catchError(this.handleError<any>('saveUser')));\n    }\n  }\n\n  /**\n   * Delete an entity from DB\n   * A GUID of entity instance is given. After the call, the instance will be deleted permanently\n   **/\n  deleteUser(userGUID: string): Observable<null | Message[]> {\n    return this.http.delete<null | Message[]>(this.originalHost + `/api/entity/instance/` + userGUID, httpOptions).pipe(\n      catchError(this.handleError<any>('deleteUser'))\n    );\n  }\n\n  private handleError<T> (operation = 'operation', result?: T) {\n    return (error: any): Observable<T> => {\n      if (error.status === 401) {\n        this.messageService.addMessage('EXCEPTION', 'NOT_AUTHENTICATED_OR_SESSION_EXPIRED', messageType.Exception);\n      } else {\n        this.messageService.addMessage('EXCEPTION', 'GENERIC', messageType.Exception, operation, error.message);\n      }\n\n      this.router.navigate(['errors']);\n      console.error(operation, error); // log to console instead\n\n      // Let the app keep running by returning an empty result.\n      return of(result as T);\n    };\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule  } from '@angular/router';\nimport {MockupComponent} from \"./mockup.component\";\n\nconst routes: Routes = [\n  {\n    path: 'mockup/:UI', component: MockupComponent\n  }\n];\n\n@NgModule({\n  imports: [\n    RouterModule.forChild(routes)\n  ],\n  exports: [\n    RouterModule\n  ]\n})\nexport class MockupRoutingModule { }\n","import {Component, DoCheck, OnInit} from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\n\n@Component({\n  selector: 'app-mockup',\n  template: '<img [src]=\"mockupUI\" style=\"max-width: 100%\">',\n  styleUrls: ['./mockup.component.css']\n})\nexport class MockupComponent implements OnInit, DoCheck {\n\n  constructor(private route: ActivatedRoute) { }\n\n  mockupUI: String;\n\n  ngOnInit() { }\n\n  ngDoCheck() {\n    this.mockupUI = 'assets/' + this.route.snapshot.paramMap.get('UI') + '.png';\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport {MockupComponent} from \"./mockup.component\";\nimport {MockupRoutingModule} from \"./mockup-routing.module\";\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    MockupRoutingModule\n  ],\n  declarations: [\n    MockupComponent\n  ]\n})\nexport class MockupModule { }\n","export const msgStore = [\n  { msgCat: \"EXCEPTION\",\n    msgName: \"GENERIC\",\n    msgText: {\n      EN: {shortText: \"Exception Occurs in Operation: '%s'\",\n           longText: \"%s1\"}\n    }\n  },\n  { msgCat: \"EXCEPTION\",\n    msgName: \"NOT_AUTHENTICATED_OR_SESSION_EXPIRED\",\n    msgText: {\n      EN: {shortText: \"You are not authenticated or your session is expired!\",\n        longText: \"You are not authenticated or your session is expired, please <a href='/logon'>re-logon</a>.\"}\n    }\n  },\n  { msgCat: \"GENERAL\",\n    msgName: \"EMPTY_LIST\",\n    msgText: {\n      EN: {shortText: \"No result is found\",\n        longText: \"The system cannot find any items meet the search criteria.\"}\n    }\n  },\n  { msgCat: \"GENERAL\",\n    msgName: \"UNSAVED_CHANGES\",\n    msgText: {\n      EN: {\n        shortText: \"There are unsaved changes. Do you want to save the changes?\",\n        longText: \"\"\n      }\n    }\n  },\n  { msgCat: \"GENERAL\",\n    msgName: \"NO_CHANGE\",\n    msgText: {\n      EN: {\n        shortText: \"No change is made, saving is not necessary.\",\n        longText: \"The data is not changed, thus there is no need to save changes\"\n      }\n    }\n  },\n  { msgCat: \"USER\",\n    msgName: \"INVALID\",\n    msgText: {\n      EN: {shortText: \"Data is invalid, please check.\",\n        longText: \"The data still contains some errors, please make sure all mandatory fields are filled!\"}\n    }\n  },\n  { msgCat: \"USER\",\n    msgName: \"USER_NAME_EXISTS\",\n    msgText: {\n      EN: {shortText: \"User name: '%s' already exists!\",\n           longText: \"\"}\n    }\n  },\n  { msgCat: \"USER\",\n    msgName: \"USER_ID_EXISTS\",\n    msgText: {\n      EN: {shortText: \"User ID: '%s' already exists!\",\n        longText: \"\"}\n    }\n  },\n  { msgCat: \"USER\",\n    msgName: \"AT_LEAST_ONE_EMAIL\",\n    msgText: {\n      EN: {\n        shortText: \"At least one email needs to be maintained!\",\n        longText: \"\"\n      }\n    }\n  },\n  { msgCat: \"USER\",\n    msgName: \"USER_SAVED\",\n    msgText: {\n      EN: {\n        shortText: \"User '%s' is saved!\",\n        longText: \"\"\n      }\n    }\n  }\n];\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-not-found',\n  templateUrl: './not-found.component.html',\n  styleUrls: ['./not-found.component.css']\n})\nexport class NotFoundComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","<h2>Page not found!</h2>\n","export class Role {\n  name: string;\n  categories: Catalog[]; // Containing Catalogs\n}\nexport class Catalog {\n  name: string;\n  icon: string;  // Catalog Icon using Font Awesome, like: \"fas fa-search\"\n  routeLink?: string; // routeLink in Angular navigation and route system\n  top?: number; // hover submenu position to the page top\n  height?: number; // hover submenu height dynamically calculated based on the page height\n  originalHeight?: number; // the original hover submenu height based on the number of APPs contained\n  arrowTop?: number; // arrow position to the page top\n  active?: boolean; // Indicates current catalog is in active status, that is one of the APPs contained is in shown.\n  isSubMenuShow?: boolean; // Indicates the submenu is in shown (hovered)\n  apps?: App[]; // Containing APPs\n}\nexport class App {\n  name: string;\n  appID: string;\n  routeLink: string; // RouteLink in Angular navigation and route system\n  isExternal: boolean; // Whether it is an external app or internal app\n  originalRouteLink?: string; // original route link for external apps\n  active?: boolean; // Indicates current APP is in active status, that is the APP is in shown.\n}\nexport class UserBasicInfo {\n  userID: string;\n  userName?: string;\n  displayName?: string;\n  email?: string;\n}\n","import { Injectable } from '@angular/core';\nimport {Subject} from \"rxjs\";\nimport {App} from \"./role\";\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ShareService {\n  apps: App[] = [];\n  isCollapsed = false;\n  private isCollapsedSubject = new Subject<boolean>();\n  isCollapsed$ = this.isCollapsedSubject.asObservable();\n\n  updateIsCollapsed(status: boolean): void {\n    this.isCollapsed = status;\n    this.isCollapsedSubject.next(this.isCollapsed);\n  }\n\n}\n","import {Component, ElementRef, HostListener, OnInit, ViewChild} from '@angular/core';\nimport { Role, App } from '../role';\nimport { debounceTime, distinctUntilChanged, switchMap} from 'rxjs/operators';\nimport {Router} from \"@angular/router\";\nimport {Subject} from \"rxjs/internal/Subject\";\nimport {Observable} from \"rxjs/internal/Observable\";\nimport * as fuzzySort from \"fuzzysort\";\nimport {of} from \"rxjs\";\nimport {IdentityService} from \"../identity.service\";\nimport {MessageService} from \"ui-message-angular\";\nimport {ShareService} from \"../share.service\";\n\n@Component({\n  selector: 'app-side-menu',\n  templateUrl: './side-menu.component.html',\n  styleUrls: ['./side-menu.component.css']\n})\nexport class SideMenuComponent implements OnInit {\n  private activeRow = null;\n  private mouseLocs = [];\n  private lastDelayLoc = null;\n  private timeoutId = null;\n  private rem = 0;\n  private searchTerms = new Subject<string>();\n  private menuDisplay = true;\n  private readonly TOLERANCE = 75;  // bigger = more forgive when entering submenu\n  private readonly DELAY = 600;  // ms delay when user appears to be entering submenu\n\n  isCollapsed = false;\n  role: Role = new Role;\n  apps$: Observable<App[]>;\n  searchedApps: App[];\n\n  @ViewChild('sideMenu', { static: true })\n  sideMenu: ElementRef;\n\n  constructor(private identityService: IdentityService,\n              private messageService: MessageService,\n              private shareService: ShareService,\n              private router: Router\n              ) {}\n\n  ngOnInit() {\n    this.rem = parseInt(window.getComputedStyle(document.head).getPropertyValue('font-size'), 10);\n    this.identityService.getRoleDetail().subscribe(roles => this._processRoleData(roles));\n    this.shareService.updateIsCollapsed(this.isCollapsed);\n    this.apps$ = this.searchTerms.pipe (\n      debounceTime(300),\n      distinctUntilChanged(),\n      switchMap((term: string) => {\n        const results = fuzzySort.go(term, this.shareService.apps, {key: 'name'});\n        const returnedApps = [];\n        results.forEach(result => returnedApps.push(result.obj));\n        return of(returnedApps as App[]);\n      })\n    );\n    this.apps$.subscribe(searchedApps => this.searchedApps = searchedApps );\n  }\n\n  _processRoleData(roles): void {\n    if (!roles) {return; }\n\n    this.role = roles[0]; // Currently, only support one role per user logon\n    if (this.role['msgCat']) {\n      this.messageService.clearMessages();\n      roles.forEach( msg => this.messageService.add(msg));\n      this.router.navigate(['errors']);\n    } else {\n      this.role.categories.forEach(category => {\n        category.height = category.originalHeight = (category.apps.length + 1) * 3 + 2;\n        category.active = false;\n        category.isSubMenuShow = false;\n        category.apps.forEach( app => {\n          if (app.isExternal) {\n            app.originalRouteLink = app.routeLink;\n            app.routeLink = '/external-app/' + app.appID;\n          }\n          app.active = false;\n          this.shareService.apps.push(app);\n        });\n        if (category.apps.length === 1) {\n          category.routeLink = category.apps[0].routeLink;\n          category.apps = [];\n        }\n      });\n    }\n  }\n\n  searchApp(term: string): void {\n    this.searchTerms.next(term);\n    this.menuDisplay = !term;\n  }\n\n  enterApp($event): void {\n    if ($event.keyCode === 13 && this.searchedApps[0]) {\n      this.router.navigate([this.searchedApps[0].routeLink]);\n    }\n  }\n\n  collapse(): boolean {\n    for (const category of this.role.categories) {\n      category.isSubMenuShow = false;\n    }\n    this.menuDisplay = true;\n    this.isCollapsed = !this.isCollapsed;\n    this.shareService.updateIsCollapsed(this.isCollapsed);\n    return this.isCollapsed;\n  }\n\n  activateSubMenu(row): void {\n    const menuHeight = this.sideMenu.nativeElement.offsetHeight / this.rem;\n    const menuScrollTop = this.sideMenu.nativeElement.getElementsByClassName('dk-menu-list')[0].scrollTop / this.rem;\n    if (menuHeight + 1 - 4 * row + menuScrollTop <= this.role.categories[row].originalHeight) {\n      this.role.categories[row].top = null;\n      if ( menuHeight + 3 <= this.role.categories[row].originalHeight) {\n        this.role.categories[row].height = menuHeight + 3;\n      } else {\n        this.role.categories[row].height = this.role.categories[row].originalHeight;\n      }\n    } else {\n      this.role.categories[row].top = 5 + 4 * row - menuScrollTop;\n    }\n    this.role.categories[row].arrowTop = 6 + 4 * row - menuScrollTop;\n    this.role.categories[row].isSubMenuShow = true;\n  }\n\n  deactivateSubMenu(row): void {\n    this.role.categories[row].isSubMenuShow = false;\n  }\n\n  /**\n   * Keep track of the last few locations of the mouse.\n   */\n  @HostListener('document:mousemove', ['$event', 'mouseLocs'])\n  mousemoveDocument(e, mouseLocs): void {\n    mouseLocs.push({x: e.pageX, y: e.pageY});\n\n    if (mouseLocs.length > 3) { // '30' of the past mouse locations to track\n      mouseLocs.shift();\n    }\n  }\n\n  /**\n   * Cancel possible row activations when leaving the menu entirely\n   */\n  mouseleaveMenu(): void {\n    if (this.timeoutId) {\n      clearTimeout(this.timeoutId);\n    }\n\n    // If exitMenu is supplied and returns true, deactivate the\n    // currently active row on menu exit.\n    if (this.activeRow && !this.isMouseInMenuArea()) {\n      this.deactivateSubMenu(this.activeRow);\n    }\n\n    this.activeRow = null;\n  }\n\n  /**\n   * Check if the mouse is in the area of main menu and sub-menu.\n   */\n  isMouseInMenuArea(): boolean {\n    if (!this.activeRow) { return false; }\n\n    const menu = this.sideMenu.nativeElement;\n    const offset = {\n      left: menu.offsetLeft,\n      top: menu.offsetTop\n    };\n    const upperLeft = {\n      x: offset.left + menu.offsetWidth,\n      y: this.role.categories[this.activeRow].top * this.rem\n    };\n    const upperRight = {\n      x: upperLeft.x + this.rem,\n      y: upperLeft.y\n    };\n    const lowerLeft = {\n      x: offset.left + menu.offsetWidth,\n      y: upperLeft.y + this.role.categories[this.activeRow].height * this.rem\n    };\n    const lowerRight = {\n      x: lowerLeft.x + this.rem,\n      y: lowerLeft.y\n    };\n    const loc = this.mouseLocs[this.mouseLocs.length - 1];\n    return (loc && ((loc.x <= upperRight.x && loc.y <= lowerRight.y && loc.y >= upperRight.y)\n      || (loc.x <= upperLeft.x && loc.y >= offset.top && loc.y <= offset.top + menu.offsetHeight)));\n  }\n\n  /**\n   * Trigger a possible row activation whenever entering a new row.\n   */\n  mouseenterRow(row): void {\n    if (this.timeoutId) {\n      // Cancel any previous activation delays\n      clearTimeout(this.timeoutId);\n    }\n    this.possiblyActivate(row);\n  }\n\n  /**\n   * Trigger a row deactivation whenever leaving a row.\n   */\n  mouseleaveRow(row): void {\n    if (!this.isMouseInMenuArea()) {\n      this.deactivateSubMenu(row);\n    }\n  }\n\n  /**\n   * Set the current opened app to be active\n   * @param {App} app\n   */\n  activateApp(app: App) {\n    // Clear the existing active app\n    let appIdx = -1;\n    let catalogIdx = this.role.categories.findIndex(category => category.active === true );\n    if (catalogIdx > -1 ) {\n      this.role.categories[catalogIdx].active = false;\n      if (!this.role.categories[catalogIdx].routeLink) {\n        appIdx = this.role.categories[catalogIdx].apps.findIndex(app1 => app1.active === true );\n        if (appIdx > -1) {\n          this.role.categories[catalogIdx].apps[appIdx].active = false;\n        }\n      }\n    }\n    // Set the new active app\n    catalogIdx = this.role.categories.findIndex(category => {\n      if ( category.routeLink === app.routeLink ) {\n        return true;\n      } else {\n        appIdx = category.apps.findIndex( app1 => app1.routeLink === app.routeLink);\n        return appIdx > -1;\n      }});\n    if (catalogIdx > -1) {\n      this.role.categories[catalogIdx].active = true;\n      if (appIdx > -1) {\n        this.role.categories[catalogIdx].apps[appIdx].active = true;\n      }\n    }\n  }\n\n  /**\n   * Immediately activate a row if the user clicks on it.\n   */\n  clickRow(row): void {\n    if (this.isCollapsed) {\n      this.activate(row);\n    } else {\n      this.role.categories[row].isSubMenuShow = !this.role.categories[row].isSubMenuShow;\n    }\n  }\n\n  /**\n   * Hide the sub-menu\n   */\n  hideSubMenu(): void {\n    this.role.categories[this.activeRow].isSubMenuShow = false;\n  }\n\n  /**\n   * Activate a menu row.\n   */\n  activate(row): void {\n    if (row === this.activeRow) {\n      return;\n    }\n\n    if (this.activeRow) {\n      this.deactivateSubMenu(this.activeRow);\n    }\n\n    this.activateSubMenu(row);\n    this.activeRow = row;\n  }\n\n  /**\n   * Possibly activate a menu row. If mouse movement indicates that we\n   * shouldn't activate yet because user may be trying to enter\n   * a submenu's content, then delay and check again later.\n   */\n  possiblyActivate(row): void {\n    const delay = this.activationDelay();\n\n    if (delay) {\n      this.timeoutId = setTimeout(() => this.possiblyActivate(row), delay);\n    } else {\n      this.activate(row);\n    }\n  }\n\n  /**\n   * Return the amount of time that should be used as a delay before the\n   * currently hovered row is activated.\n   *\n   * Returns 0 if the activation should happen immediately. Otherwise,\n   * returns the number of milliseconds that should be delayed before\n   * checking again to see if the row should be activated.\n   */\n  activationDelay(): number {\n\n    if (!this.activeRow) {\n      // If there is no other submenu row already active, then\n      // go ahead and activate immediately.\n      return 0;\n    }\n\n    const menu = this.sideMenu.nativeElement;\n    const rem = parseInt(window.getComputedStyle(document.head).getPropertyValue('font-size'), 10);\n    const offset = {\n      left: menu.offsetLeft,\n      top: menu.offsetTop\n    };\n    const upperLeft = {\n      x: offset.left,\n      y: this.role.categories[this.activeRow].top * rem + this.TOLERANCE\n    };\n    const upperRight = {\n      x: offset.left + menu.offsetWidth + rem,\n      y: upperLeft.y\n    };\n    const lowerLeft = {\n      x: offset.left,\n      y: upperLeft.y + this.role.categories[this.activeRow].height * rem\n    };\n    const lowerRight = {\n      x: offset.left + menu.offsetWidth + rem,\n      y: lowerLeft.y\n    };\n    const loc = this.mouseLocs[this.mouseLocs.length - 1];\n\n    let prevLoc = this.mouseLocs[0];\n\n    if (!loc) {\n      return 0;\n    }\n\n    if (!prevLoc) {\n      prevLoc = loc;\n    }\n\n    if (prevLoc.x < offset.left || prevLoc.x > lowerRight.x ||\n      prevLoc.y < offset.top || prevLoc.y > lowerRight.y) {\n      // If the previous mouse location was outside of the entire\n      // menu's bounds, immediately activate.\n      return 0;\n    }\n\n    if (this.lastDelayLoc &&\n      loc.x === this.lastDelayLoc.x && loc.y === this.lastDelayLoc.y) {\n      // If the mouse hasn't moved since the last time we checked\n      // for activation status, immediately activate.\n      return 0;\n    }\n\n    // Detect if the user is moving towards the currently activated\n    // submenu.\n    function slope(a, b) {\n      return (b.y - a.y) / (b.x - a.x);\n    }\n\n    const decreasingCorner = upperRight,\n      increasingCorner = lowerRight;\n\n    const decreasingSlope = slope(loc, decreasingCorner),\n      increasingSlope = slope(loc, increasingCorner),\n      prevDecreasingSlope = slope(prevLoc, decreasingCorner),\n      prevIncreasingSlope = slope(prevLoc, increasingCorner);\n\n    if (decreasingSlope < prevDecreasingSlope &&\n      increasingSlope > prevIncreasingSlope) {\n      // Mouse is moving from previous location towards the\n      // currently activated submenu. Delay before activating a\n      // new menu row, because user may be moving into submenu.\n      this.lastDelayLoc = loc;\n      return this.DELAY;\n    }\n\n    this.lastDelayLoc = null;\n    return 0;\n  }\n}\n","<div #sideMenu class=\"dk-side-menu\" [class.dk-side-menu-collapsed]=\"isCollapsed\" (mouseleave)=\"mouseleaveMenu()\" >\n  <div class=\"dk-menu-list\">\n    <!-- side menu in expended mode -->\n    <ul *ngIf=\"!isCollapsed\" class=\"dk-menu-content\">\n      <li *ngFor=\"let category of role.categories; index as i;\"\n          [ngClass]=\"{'active':category.active,\n                      'collapsed':!category.isSubMenuShow,\n                      'dk-menu-search': category.routeLink === '/appSearch',\n                      'menuDisplay': category.routeLink === '/appSearch' || menuDisplay}\">\n        <span *ngIf=\"category.routeLink === '/appSearch'\" [ngClass]=\"category.icon\" aria-hidden=\"true\"></span>\n        <input *ngIf=\"category.routeLink === '/appSearch'\" #searchBox class=\"dk-search-box\" placeholder=\"Search\"\n               (keyup)=\"searchApp(searchBox.value)\" (keypress)=\"enterApp($event)\"/>\n        <ul *ngIf=\"category.routeLink === '/appSearch'\" class=\"dk-sub-menu\">\n          <li *ngFor=\"let app of apps$ | async\" >\n            <a routerLink=\"{{app.routeLink}}\">{{app.name}}</a>\n          </li>\n        </ul>\n\n        <a *ngIf=\"category.routeLink && category.routeLink !== '/appSearch'\" routerLink=\"{{category.routeLink}}\">\n          <span [ngClass]=\"category.icon\" aria-hidden=\"true\"></span> {{category.name}}\n        </a>\n        <a *ngIf=\"!category.routeLink\" (click)=\"clickRow(i)\">\n          <span [ngClass]=\"category.icon\" aria-hidden=\"true\"></span> {{category.name}}\n          <span *ngIf=\"category.apps && category.apps.length > 0\" class=\"fas arrow\"\n                [ngClass]=\"{'fa-angle-right': !category.isSubMenuShow, 'fa-angle-down': category.isSubMenuShow}\">\n          </span>\n        </a>\n        <ul *ngIf=\"!category.routeLink\" class=\"dk-sub-menu\"\n            [ngClass]=\"{'expended':category.isSubMenuShow, 'collapsed':!category.isSubMenuShow}\">\n          <li *ngFor=\"let app of category.apps\" [ngClass]=\"{'active':app.active}\">\n            <a routerLink=\"{{app.routeLink}}\">{{app.name}}</a>\n          </li>\n        </ul>\n      </li>\n    </ul>\n    <!-- side menu in collapsed mode -->\n    <ul *ngIf=\"isCollapsed\" class=\"dk-menu-content\">\n      <li *ngFor=\"let category of role.categories; index as i\" class=\"menuDisplay\" [ngClass]=\"{'active':category.active}\"\n          (mouseenter)=\"mouseenterRow(i)\" (mouseleave)=\"mouseleaveRow(i)\" (click)=\"clickRow(i)\">\n        <a *ngIf=\"category.routeLink === '/appSearch'\">\n          <span [ngClass]=\"category.icon\" aria-hidden=\"true\"></span>\n        </a>\n        <div *ngIf=\"category.routeLink === '/appSearch'\"\n             class=\"dk-side-menu dk-side-menu-hover dk-menu-search-hover\"\n             [ngClass]=\"{'dk-side-menu-hover-show':category.isSubMenuShow}\"\n             [style.top.rem]=\"category.top\">\n          <ul class=\"dk-menu-content-hover\">\n            <li><input #searchBox class=\"dk-search-box\" placeholder=\"Search\" class=\"dk-search-box\"\n                       (keyup)=\"searchApp(searchBox.value)\" (keypress)=\"enterApp($event)\"/></li>\n            <ul class=\"dk-sub-menu dk-sub-menu-collapsed\">\n              <li *ngFor=\"let app of apps$ | async\" >\n                <a routerLink=\"{{app.routeLink}}\" (click)=\"hideSubMenu()\">{{app.name}}</a>\n              </li>\n            </ul>\n          </ul>\n        </div>\n        <span *ngIf=\"category.routeLink === '/appSearch'\"\n              class=\"dk-popover-arrow\" [ngClass]=\"{'dk-popover-arrow-show':category.isSubMenuShow}\"\n              [style.top.rem]=\"category.arrowTop\"></span>\n\n        <a *ngIf=\"category.routeLink !== '/appSearch' && category.apps.length === 0\" routerLink=\"{{category.routeLink}}\">\n          <span [ngClass]=\"category.icon\" aria-hidden=\"true\"></span>\n        </a>\n        <a *ngIf=\"category.routeLink !== '/appSearch' && category.apps.length > 0\">\n          <span [ngClass]=\"category.icon\" aria-hidden=\"true\"></span>\n        </a>\n\n        <div *ngIf=\"category.routeLink !== '/appSearch' && category.apps.length > 0\"\n             class=\"dk-side-menu dk-side-menu-hover\"\n             [style.top.rem]=\"category.top\"\n             [style.height.rem]=\"category.height\"\n             [ngClass]=\"{'dk-side-menu-hover-show':category.isSubMenuShow}\">\n          <ul class=\"dk-menu-content-hover\">\n            <li><a>{{category.name}}</a></li>\n            <ul class=\"dk-sub-menu dk-sub-menu-collapsed\">\n              <li *ngFor=\"let app of category.apps\" [ngClass]=\"{'active':app.active}\">\n                <a routerLink=\"{{app.routeLink}}\" (click)=\"hideSubMenu()\">{{app.name}}</a>\n              </li>\n            </ul>\n          </ul>\n        </div>\n        <span *ngIf=\"category.routeLink !== '/appSearch' && category.apps.length > 0\"\n              class=\"dk-popover-arrow\" [ngClass]=\"{'dk-popover-arrow-show':category.isSubMenuShow}\"\n              [style.top.rem]=\"category.arrowTop\"></span>\n      </li>\n    </ul>\n  </div>\n\n  <div class=\"dk-separator\"></div>\n\n  <div class=\"dk-menu-bottom\">\n    <ul *ngIf=\"!isCollapsed\" class=\"dk-menu-content\">\n      <li >\n        <a href=\"#\">\n          <span class=\"fas fa-question-circle\" aria-hidden=\"true\"></span> Useful Links\n        </a>\n      </li>\n      <li>\n        <a href=\"#\">\n          <span class=\"fas fa-balance-scale\" aria-hidden=\"true\"></span> Legal Information\n        </a>\n      </li>\n    </ul>\n    <ul *ngIf=\"isCollapsed\" class=\"dk-menu-content\">\n      <li (mouseenter)=\"mouseenterRow(0)\" (mouseleave)=\"mouseleaveRow(0)\" (click)=\"clickRow(0)\" >\n        <a href=\"#\">\n          <span class=\"fas fa-question-circle\" aria-hidden=\"true\"></span>\n        </a>\n      </li>\n      <li (mouseenter)=\"mouseenterRow(0)\" (mouseleave)=\"mouseleaveRow(0)\" (click)=\"clickRow(0)\">\n        <a href=\"#\">\n          <span class=\"fas fa-balance-scale\" aria-hidden=\"true\"></span>\n        </a>\n      </li>\n    </ul>\n  </div>\n\n</div>\n\n","import {IdentityService} from \"../../identity.service\";\nimport {AbstractControl, AsyncValidatorFn, ValidationErrors} from \"@angular/forms\";\nimport {Observable, timer} from \"rxjs\";\nimport {map, switchMap} from \"rxjs/operators\";\nimport {MessageService} from \"ui-message-angular\";\n\nexport function existingUserNameValidator(identityService: IdentityService,\n                                          messageService: MessageService,\n                                          userID: string): AsyncValidatorFn {\n  return (control: AbstractControl): Promise<ValidationErrors | null> | Observable<ValidationErrors | null> => {\n    return timer(500).pipe(\n      switchMap( () => identityService.getUserByUserName(control.value).pipe(\n        map(data => {\n          if (data['r_user'] && data['r_user'][0]['USER_ID'] !== userID) {\n            return {message: messageService.generateMessage('USER', 'USER_NAME_EXISTS',\n                'E', control.value).msgShortText};\n          } else {\n            return null;\n          }\n        })\n      )));\n  };\n}\n\nexport function existingUserIDValidator(identityService: IdentityService,\n                                          messageService: MessageService): AsyncValidatorFn {\n  return (control: AbstractControl): Promise<ValidationErrors | null> | Observable<ValidationErrors | null> => {\n    return timer(500).pipe(\n      switchMap( () => identityService.getUserByUserID(control.value).pipe(\n        map(data => {\n          if (data['r_user'] && data['r_user'][0]['USER_ID'] === control.value) {\n            return {message: messageService.generateMessage('USER', 'USER_ID_EXISTS',\n                'E', control.value).msgShortText};\n          } else {\n            return null;\n          }\n        })\n      )));\n  };\n}\n","import {Component, Input, OnInit} from '@angular/core';\nimport {FormArray, FormBuilder, FormGroup, Validators} from \"@angular/forms\";\nimport {AttributeBase, AttributeControlService, RelationMeta} from \"jor-angular\";\n\n@Component({\n  selector: 'app-user-address',\n  templateUrl: './user-address.component.html',\n  styleUrls: ['./user-address.component.css']\n})\nexport class UserAddressComponent implements OnInit {\n  @Input() readonly: boolean;\n  @Input() userForm: FormGroup;\n  @Input() relationMetas: RelationMeta[];\n  private attrCtrls: AttributeBase[];\n  userAddressFormArray: FormArray;\n\n  constructor(private fb: FormBuilder,\n              private attributeControlService: AttributeControlService) { }\n\n  ngOnInit() {\n    this.userAddressFormArray = this.userForm.get('addresses') as FormArray;\n    this.attrCtrls = this.attributeControlService.toAttributeControl(\n      this.relationMetas.find( relationMeta => relationMeta.RELATION_ID === 'r_address').ATTRIBUTES);\n  }\n\n  getAttrCtrlFromID(fieldName: string): AttributeBase {\n    return this.attrCtrls.find( attrCtrl => attrCtrl.name === fieldName);\n  }\n\n  addAddress() {\n    const addressFormGroup = this.fb.group({\n      ADDRESS_ID: [''],\n      TYPE: ['', [Validators.required]],\n      ADDRESS_VALUE: ['', [Validators.required]],\n      POSTCODE: [''],\n      CITY: [''],\n      COUNTRY: [''],\n      PRIMARY: []\n    });\n    if (this.userAddressFormArray.length === 0) {\n      addressFormGroup.get('PRIMARY').setValue(1);\n      addressFormGroup.get('PRIMARY').markAsDirty();\n    }\n    this.userAddressFormArray.push(addressFormGroup);\n  }\n\n  deleteAddress(index: number) {\n    if (this.userAddressFormArray.length > 1 &&\n        this.userAddressFormArray.at(index).value['PRIMARY']) {\n      const newPrimaryIndex = index === 0 ? 1 : 0;\n      this.userAddressFormArray.at(newPrimaryIndex).get('PRIMARY').setValue(1);\n      this.userAddressFormArray.at(newPrimaryIndex).get('PRIMARY').markAsDirty();\n    }\n    this.userAddressFormArray.removeAt(index);\n    this.userAddressFormArray.markAsDirty();\n  }\n}\n","<div class=\"card mt-4\">\n  <div class=\"card-body\">\n    <div *ngFor=\"let userAddressForm of userAddressFormArray.controls; let i = index\" class=\"card mb-4\">\n      <button type=\"button\" id=\"remove\" class=\"dk-close-button close d-flex justify-content-end mr-2\" aria-label=\"Close\"\n              (click)=\"deleteAddress(i)\">\n        <span aria-hidden=\"true\">&times;</span>\n      </button>\n      <div class=\"card-body row\" [formGroup]=\"userAddressForm\">\n        <dk-app-attribute-form2 class=\"col-3 dk-form-label\"\n                                [attributeControl]=\"getAttrCtrlFromID('TYPE')\"\n                                [formGroup]=\"userAddressForm\"\n                                [readonly]=\"readonly\">\n        </dk-app-attribute-form2>\n        <dk-app-attribute-form2 class=\"col-6 dk-form-label\"\n                                [attributeControl]=\"getAttrCtrlFromID('ADDRESS_VALUE')\"\n                                [formGroup]=\"userAddressForm\"\n                                [readonly]=\"readonly\">\n        </dk-app-attribute-form2>\n        <div class=\"col-1 row form-group mr-2\">\n          <label for=\"primaryAddress\" class=\"col-form-label dk-form-label\">Primary</label>\n          <input type=\"radio\" class=\"form-control\" id=\"primaryAddress\" [value]=\"1\" name=\"PRIMARY\" formControlName=\"PRIMARY\">\n        </div>\n        <dk-app-attribute-form2 class=\"col-md-3 dk-form-label\"\n                                [attributeControl]=\"getAttrCtrlFromID('POSTCODE')\"\n                                [formGroup]=\"userAddressForm\"\n                                [readonly]=\"readonly\">\n        </dk-app-attribute-form2>\n        <dk-app-attribute-form2 class=\"col-md-3 dk-form-label\"\n                                [attributeControl]=\"getAttrCtrlFromID('CITY')\"\n                                [formGroup]=\"userAddressForm\"\n                                [readonly]=\"readonly\">\n        </dk-app-attribute-form2>\n        <dk-app-attribute-form2 class=\"col-md-3 dk-form-label\"\n                                [attributeControl]=\"getAttrCtrlFromID('COUNTRY')\"\n                                [formGroup]=\"userAddressForm\"\n                                [readonly]=\"readonly\">\n        </dk-app-attribute-form2>\n      </div>\n    </div>\n    <button type=\"button\" id=\"add\" class=\"btn btn-primary float-right\" [disabled]=\"readonly\" (click)=\"addAddress()\">Add</button>\n  </div>\n</div>\n","import {Component, Input, OnInit } from '@angular/core';\nimport {FormGroup} from \"@angular/forms\";\nimport {AttributeBase, AttributeControlService, RelationMeta} from \"jor-angular\";\n\n@Component({\n  selector: 'app-user-basic',\n  templateUrl: './user-basic.component.html',\n  styleUrls: ['./user-basic.component.css']\n})\nexport class UserBasicComponent implements OnInit {\n  @Input() readonly: boolean;\n  @Input() userForm: FormGroup;\n  @Input() relationMetas: RelationMeta[];\n  private attrCtrls: AttributeBase[];\n  userBasicNamesForm: FormGroup;\n  userBasicEmployeeForm: FormGroup;\n\n  constructor(private attributeControlService: AttributeControlService) { }\n\n  ngOnInit() {\n    this.userBasicNamesForm = this.userForm.get('userBasic.names') as FormGroup;\n    this.userBasicEmployeeForm = this.userForm.get('userBasic.employee') as FormGroup;\n    this.attrCtrls = this.attributeControlService.toAttributeControl(\n      this.relationMetas.find( relationMeta => relationMeta.RELATION_ID === 'r_employee').ATTRIBUTES);\n    this.attrCtrls = this.attrCtrls.concat(this.attributeControlService.toAttributeControl(\n      this.relationMetas.find( relationMeta => relationMeta.RELATION_ID === 'r_user').ATTRIBUTES));\n  }\n\n  getAttrCtrlFromID(fieldName: string): AttributeBase {\n    return this.attrCtrls.find( attrCtrl => attrCtrl.name === fieldName);\n  }\n}\n","<div class=\"card mt-4\">\n  <div class=\"card-header\">Name</div>\n  <div class=\"card-body\">\n    <form class=\"mt-2 row\">\n      <dk-app-attribute-form2 class=\"col-md-6 col-lg-4 dk-form-label\"\n                              [attributeControl]=\"getAttrCtrlFromID('USER_NAME')\"\n                              [formGroup]=\"userBasicNamesForm\"\n                              [readonly]=\"readonly\">\n      </dk-app-attribute-form2>\n      <dk-app-attribute-form2 class=\"col-md-6 col-lg-4 dk-form-label\"\n                              [attributeControl]=\"getAttrCtrlFromID('DISPLAY_NAME')\"\n                              [formGroup]=\"userBasicNamesForm\"\n                              [readonly]=\"readonly\">\n      </dk-app-attribute-form2>\n      <div class=\"col-md-4\"></div>\n      <dk-app-attribute-form2 class=\"col-md-6 col-lg-4 dk-form-label\"\n                              [attributeControl]=\"getAttrCtrlFromID('GIVEN_NAME')\"\n                              [formGroup]=\"userBasicNamesForm\"\n                              [readonly]=\"readonly\">\n      </dk-app-attribute-form2>\n      <dk-app-attribute-form2 class=\"col-md-6 col-lg-4 dk-form-label\"\n                              [attributeControl]=\"getAttrCtrlFromID('MIDDLE_NAME')\"\n                              [formGroup]=\"userBasicNamesForm\"\n                              [readonly]=\"readonly\">\n      </dk-app-attribute-form2>\n      <dk-app-attribute-form2 class=\"col-md-6 col-lg-4 dk-form-label\"\n                              [attributeControl]=\"getAttrCtrlFromID('FAMILY_NAME')\"\n                              [formGroup]=\"userBasicNamesForm\"\n                              [readonly]=\"readonly\">\n      </dk-app-attribute-form2>\n    </form>\n  </div>\n</div>\n\n<div class=\"card mt-4\">\n  <div class=\"card-header\">Employee</div>\n  <div class=\"card-body\">\n    <form class=\"mt-2 row\">\n      <dk-app-attribute-form2 class=\"col-md-6 col-lg-4 dk-form-label\"\n                              [attributeControl]=\"getAttrCtrlFromID('COMPANY_ID')\"\n                              [formGroup]=\"userBasicEmployeeForm\"\n                              [readonly]=\"readonly\">\n      </dk-app-attribute-form2>\n      <dk-app-attribute-form2 class=\"col-md-6 col-lg-4 dk-form-label\"\n                              [attributeControl]=\"getAttrCtrlFromID('DEPARTMENT_ID')\"\n                              [formGroup]=\"userBasicEmployeeForm\"\n                              [readonly]=\"readonly\">\n      </dk-app-attribute-form2>\n      <dk-app-attribute-form2 class=\"col-md-6 col-lg-4 dk-form-label\"\n                              [attributeControl]=\"getAttrCtrlFromID('TITLE')\"\n                              [formGroup]=\"userBasicEmployeeForm\"\n                              [readonly]=\"readonly\">\n      </dk-app-attribute-form2>\n      <dk-app-attribute-form2 class=\"col-md-6 col-lg-4 dk-form-label\"\n                              [attributeControl]=\"getAttrCtrlFromID('GENDER')\"\n                              [formGroup]=\"userBasicEmployeeForm\"\n                              [readonly]=\"readonly\">\n      </dk-app-attribute-form2>\n    </form>\n  </div>\n</div>\n","import {Component, OnInit} from '@angular/core';\nimport {FormArray, FormBuilder, FormControl, FormGroup, Validators} from \"@angular/forms\";\nimport {ActivatedRoute, ParamMap, Router} from \"@angular/router\";\nimport {Message, MessageService} from \"ui-message-angular\";\nimport {switchMap} from \"rxjs/operators\";\nimport {IdentityService} from \"../../identity.service\";\nimport {forkJoin, Observable, of} from \"rxjs\";\nimport {\n  AttributeBase,\n  AttributeControlService,\n  Entity,\n  EntityService,\n  RelationMeta,\n  UiMapperService\n} from \"jor-angular\";\nimport {existingUserIDValidator, existingUserNameValidator} from \"./async-validators\";\nimport {DialogService} from \"../../dialog.service\";\n\n@Component({\n  selector: 'app-user-detail',\n  templateUrl: './user-detail.component.html',\n  styleUrls: ['./user-detail.component.css']\n})\nexport class UserDetailComponent implements OnInit {\n  userForm: FormGroup;\n  relationMetas: RelationMeta[];\n  attrCtrls: AttributeBase[];\n  readonly = true;\n  isNewMode = false;\n  action: string;\n  instanceGUID: string;\n  originalUserValue = {};\n  changedUser = {};\n  tabStrip = 1;\n\n  get pwdStatus(): string {\n    switch (this.userForm.get('PWD_STATUS').value) {\n      case '':\n        return 'Initial';\n      case 1:\n        return 'Active';\n      case 3:\n        return 'Need Change';\n      default:\n        return 'Initial';\n    }\n  }\n\n  constructor(private fb: FormBuilder,\n              private route: ActivatedRoute,\n              private router: Router,\n              private dialogService: DialogService,\n              private identityService: IdentityService,\n              private attributeControlService: AttributeControlService,\n              private entityService: EntityService,\n              private uiMapperService: UiMapperService,\n              private messageService: MessageService) {\n  }\n\n  ngOnInit() {\n    this.route.paramMap.pipe(\n      switchMap((params: ParamMap) => {\n        this.action = params.get('action');\n        if (this.action === 'new') {\n          this.isNewMode = true;\n          return forkJoin(\n            [this.entityService.getRelationMetaOfEntity('person'), this._createNewUser()]);\n        } else {\n          this.isNewMode = false;\n          return forkJoin(\n            [this.entityService.getRelationMetaOfEntity('person'),\n            this.identityService.getUserDetail(params.get('userID'))]);\n        }\n      })\n    ).subscribe( data => {\n      this.relationMetas = data[0] as RelationMeta[];\n      this.attrCtrls = this.attributeControlService.toAttributeControl(\n        this.relationMetas.find( relationMeta => relationMeta.RELATION_ID === 'r_user').ATTRIBUTES);\n      if ('ENTITY_ID' in data[1]) {\n        this.instanceGUID = data[1]['INSTANCE_GUID'];\n        this._generateUserForm(<Entity>data[1]);\n        if (this.isNewMode || this.action === 'change') {\n          this._switch2EditMode();\n        } else {\n          this._switch2DisplayMode();\n        }\n      } else {\n        const errorMessages = <Message[]>data[1];\n        errorMessages.forEach( msg => this.messageService.add(msg));\n      }\n    });\n  }\n\n  getAttrCtrlFromID(fieldName: string): AttributeBase {\n    return this.attrCtrls.find( attrCtrl => attrCtrl.name === fieldName);\n  }\n\n  switchTabStrip(tabStripID: number): void {\n    this.tabStrip = tabStripID;\n  }\n\n  switchEditDisplay(): void {\n    if (this.readonly ) {\n      this._switch2EditMode();\n    } else {\n      if (this.userForm.dirty) {\n        this.dialogService.confirm('Discard changes?').subscribe(confirm => {\n          if (confirm) {\n            this.userForm.reset(this.originalUserValue);\n            this._switch2DisplayMode();\n          }\n        });\n      } else {\n        this._switch2DisplayMode();\n      }\n    }\n    this.messageService.clearMessages();\n  }\n\n  _switch2DisplayMode(): void {\n    this.readonly = true;\n    this._setCheckBoxState();\n\n    const userIDCtrl = this.userForm.get('USER_ID') as FormControl;\n    userIDCtrl.clearAsyncValidators();\n    const userNameCtrl = this.userForm.get('userBasic.names.USER_NAME') as FormControl;\n    userNameCtrl.clearAsyncValidators();\n\n    const emailArray = this.userForm.get('emails') as FormArray;\n    let lastIndex = emailArray.length - 1;\n    while (lastIndex >= 0) {\n      const emailFormGroup = emailArray.at(lastIndex);\n      if (emailFormGroup.invalid || !emailFormGroup.value.EMAIL) {\n        emailArray.removeAt(lastIndex);\n      }\n      lastIndex--;\n    }\n\n    const addressArray = this.userForm.get('addresses') as FormArray;\n    lastIndex = addressArray.length - 1;\n    while (lastIndex >= 0) {\n      const addressFormGroup = addressArray.at(lastIndex);\n      if (addressFormGroup.invalid || !addressFormGroup.value.ADDRESS_VALUE) {\n        addressArray.removeAt(lastIndex);\n      }\n      lastIndex--;\n    }\n\n    const roleArray = this.userForm.get('userRole') as FormArray;\n    lastIndex = roleArray.length - 1;\n    while (lastIndex >= 0) {\n      const roleFormGroup = roleArray.at(lastIndex);\n      if (roleFormGroup.invalid || !roleFormGroup.value.NAME) {\n        roleArray.removeAt(lastIndex);\n      }\n      lastIndex--;\n    }\n\n    this.userForm.markAsPristine();\n    // Replace the URL from change to display\n    window.history.replaceState({}, '', `/users/${userIDCtrl.value};action=display`);\n  }\n\n  _switch2EditMode(): void {\n    this.readonly = false;\n    this._setCheckBoxState();\n\n    const userIDCtrl = this.userForm.get('USER_ID') as FormControl;\n    if (this.isNewMode) {\n      userIDCtrl.setAsyncValidators(\n        existingUserIDValidator(this.identityService, this.messageService));\n    }\n\n    const userNameCtrl = this.userForm.get('userBasic.names.USER_NAME') as FormControl;\n    userNameCtrl.setAsyncValidators(\n      existingUserNameValidator(this.identityService, this.messageService, this.userForm.get('USER_ID').value));\n\n    const roleArray = this.userForm.get('userRole') as FormArray;\n    roleArray.push( this.fb.group({\n      NAME: [''],\n      DESCRIPTION: [''],\n      system_role_INSTANCE_GUID: [''],\n      RELATIONSHIP_INSTANCE_GUID: [''],\n    }));\n\n    // Replace the URL from to display\n    if (this.action === 'display') {this.action = 'change'; }\n    window.history.replaceState({}, '', `/users/${userIDCtrl.value};action=` + this.action);\n  }\n\n  _createNewUser(): Observable<Entity> {\n    const userDetail = new Entity();\n    userDetail['ENTITY_ID'] = 'person';\n    userDetail['r_user'] = [\n      { USER_ID: '', LOCK: 0, PWD_STATUS: '', USER_NAME: '', DISPLAY_NAME: '',\n        GIVEN_NAME: '', MIDDLE_NAME: '', FAMILY_NAME: ''}\n    ];\n    userDetail['r_employee'] = [\n      {TITLE: '', DEPARTMENT_ID: '', COMPANY_ID: '', GENDER: ''}\n    ];\n    userDetail['r_email'] = [];\n    userDetail['r_personalization'] = [\n      {USER_ID: '', LANGUAGE: '', TIMEZONE: '', DECIMAL_FORMAT: '', DATE_FORMAT: ''}\n    ];\n    userDetail['relationships'] = [];\n    return of(userDetail);\n  }\n\n  _generateUserForm(data: Entity): void {\n    this.userForm = this.fb.group({\n      USER_ID: [data['r_user'][0]['USER_ID'], [Validators.required]],\n      LOCK: [data['r_user'][0]['LOCK']],\n      PWD_STATUS: [data['r_user'][0]['PWD_STATUS']],\n      userBasic: this.fb.group({\n        names: this.fb.group({\n          USER_NAME: [data['r_user'][0]['USER_NAME'], [Validators.required]],\n          DISPLAY_NAME: [data['r_user'][0]['DISPLAY_NAME'], [Validators.required]],\n          GIVEN_NAME: [data['r_user'][0]['GIVEN_NAME']],\n          MIDDLE_NAME: [data['r_user'][0]['MIDDLE_NAME']],\n          FAMILY_NAME: [data['r_user'][0]['FAMILY_NAME']]\n        }),\n        employee: this.fb.group({\n          TITLE: [data['r_employee'][0]['TITLE']],\n          DEPARTMENT_ID: [data['r_employee'][0]['DEPARTMENT_ID']],\n          COMPANY_ID: [data['r_employee'][0]['COMPANY_ID'], [Validators.required]],\n          GENDER: [data['r_employee'][0]['GENDER']]\n        })\n      }),\n      emails:  this.fb.array([]),\n      addresses: this.fb.array([]),\n      userPersonalization: this.fb.group({\n        USER_ID: [data['r_personalization'] ? data['r_personalization'][0]['USER_ID'] : ''],\n        LANGUAGE: [data['r_personalization'] ? data['r_personalization'][0]['LANGUAGE'] : ''],\n        TIMEZONE: [data['r_personalization'] ? data['r_personalization'][0]['TIMEZONE'] : ''],\n        DECIMAL_FORMAT: [data['r_personalization'] ? data['r_personalization'][0]['DECIMAL_FORMAT'] : ''],\n        DATE_FORMAT: [data['r_personalization'] ? data['r_personalization'][0]['DATE_FORMAT'] : '']\n      }),\n      userRole: this.fb.array([])\n    });\n\n    const emailArray = this.userForm.get('emails') as FormArray;\n    data['r_email'].forEach( email => {\n      emailArray.push(\n        this.fb.group({\n          EMAIL: [email['EMAIL'], [Validators.required]],\n          TYPE: [email['TYPE'], [Validators.required]],\n          PRIMARY: [email['PRIMARY']]\n        })\n      );\n    });\n\n    const addressArray = this.userForm.get('addresses') as FormArray;\n    if (data['r_address']) {\n      data['r_address'].forEach( address => {\n        addressArray.push(\n          this.fb.group({\n            ADDRESS_ID: [address['ADDRESS_ID']],\n            TYPE: [address['TYPE'], [Validators.required]],\n            ADDRESS_VALUE: [address['ADDRESS_VALUE'], [Validators.required]],\n            POSTCODE: [address['POSTCODE']],\n            CITY: [address['CITY']],\n            COUNTRY: [address['COUNTRY']],\n            PRIMARY: [address['PRIMARY']]\n          })\n        );\n      });\n    }\n\n    const roleArray = this.userForm.get('userRole') as FormArray;\n    const userRoleRelationship = data['relationships'][0];\n    if (userRoleRelationship) {\n      userRoleRelationship.values.forEach( value => {\n        const roleInstance = value.PARTNER_INSTANCES[0];\n        roleArray.push(\n          this.fb.group({\n            NAME: [roleInstance['r_role'][0]['NAME']],\n            DESCRIPTION: [roleInstance['r_role'][0]['DESCRIPTION']],\n            system_role_INSTANCE_GUID: [roleInstance['INSTANCE_GUID']],\n            RELATIONSHIP_INSTANCE_GUID: [value['RELATIONSHIP_INSTANCE_GUID']]\n          })\n        );\n      });\n    }\n\n    this.originalUserValue = this.userForm.getRawValue();\n  }\n\n  _resetUserValue(data: Entity): void {\n    this.originalUserValue = {\n      USER_ID: data['r_user'][0]['USER_ID'],\n      LOCK: data['r_user'][0]['LOCK'],\n      PWD_STATUS: data['r_user'][0]['PWD_STATUS'],\n      userBasic: {\n        names: {\n          USER_NAME: data['r_user'][0]['USER_NAME'],\n          DISPLAY_NAME: data['r_user'][0]['DISPLAY_NAME'],\n          GIVEN_NAME: data['r_user'][0]['GIVEN_NAME'],\n          MIDDLE_NAME: data['r_user'][0]['MIDDLE_NAME'],\n          FAMILY_NAME: data['r_user'][0]['FAMILY_NAME']\n        },\n        employee: {\n          TITLE: data['r_employee'][0]['TITLE'],\n          DEPARTMENT_ID: data['r_employee'][0]['DEPARTMENT_ID'],\n          COMPANY_ID: data['r_employee'][0]['COMPANY_ID'],\n          GENDER: data['r_employee'][0]['GENDER']\n        }\n      },\n      emails: [],\n      addresses: [],\n      userPersonalization: {\n        USER_ID: data['r_personalization'] ? data['r_personalization'][0]['USER_ID'] : '',\n        LANGUAGE: data['r_personalization'] ? data['r_personalization'][0]['LANGUAGE'] : '',\n        TIMEZONE: data['r_personalization'] ? data['r_personalization'][0]['TIMEZONE'] : '',\n        DECIMAL_FORMAT: data['r_personalization'] ? data['r_personalization'][0]['DECIMAL_FORMAT'] : '',\n        DATE_FORMAT: data['r_personalization'] ? data['r_personalization'][0]['DATE_FORMAT'] : ''\n      },\n      userRole: []\n    };\n\n    data['r_email'].forEach( email => {\n      this.originalUserValue['emails'].push(\n        {\n          EMAIL: email['EMAIL'],\n          TYPE: email['TYPE'],\n          PRIMARY: email['PRIMARY']\n        }\n      );\n    });\n\n    if (data['r_address']) {\n      data['r_address'].forEach( address => {\n        this.originalUserValue['addresses'].push(\n          {\n            ADDRESS_ID: address['ADDRESS_ID'],\n            TYPE: address['TYPE'],\n            ADDRESS_VALUE: address['ADDRESS_VALUE'],\n            POSTCODE: address['POSTCODE'],\n            CITY: address['CITY'],\n            COUNTRY: address['COUNTRY'],\n            PRIMARY: address['PRIMARY']\n          }\n        );\n      });\n    }\n\n    const userRoleRelationship = data['relationships'][0];\n    if (userRoleRelationship) {\n      userRoleRelationship.values.forEach( value => {\n        const roleInstance = value.PARTNER_INSTANCES[0];\n        this.originalUserValue['userRole'].push(\n          {\n            NAME: [roleInstance['r_role'][0]['NAME']],\n            DESCRIPTION: [roleInstance['r_role'][0]['DESCRIPTION']],\n            system_role_INSTANCE_GUID: [roleInstance['INSTANCE_GUID']],\n            RELATIONSHIP_INSTANCE_GUID: [value['RELATIONSHIP_INSTANCE_GUID']]\n          }\n        );\n      });\n    }\n\n    this.userForm.reset(this.originalUserValue);\n  }\n\n  _setCheckBoxState() {\n    const userEmailFormArray = this.userForm.get('emails') as FormArray;\n    const userAddressFormArray = this.userForm.get('addresses') as FormArray;\n    const userEmployeeForm = this.userForm.get('userBasic').get('employee') as FormGroup;\n    const userPersonalizationForm = this.userForm.get('userPersonalization') as FormGroup;\n    if (this.readonly) {\n      userEmailFormArray.controls.forEach( userEmailForm => {\n        userEmailForm.get('PRIMARY').disable();\n        userEmailForm.get('TYPE').disable();\n      });\n      userAddressFormArray.controls.forEach( userAddressForm => {\n        userAddressForm.get('PRIMARY').disable();\n        userAddressForm.get('TYPE').disable();\n      });\n      userEmployeeForm.get('GENDER').disable();\n      userPersonalizationForm.get('LANGUAGE').disable();\n      userPersonalizationForm.get('TIMEZONE').disable();\n      userPersonalizationForm.get('DECIMAL_FORMAT').disable();\n      userPersonalizationForm.get('DATE_FORMAT').disable();\n    } else {\n      userEmailFormArray.controls.forEach( userEmailForm => {\n        userEmailForm.get('PRIMARY').enable();\n        userEmailForm.get('TYPE').enable();\n      });\n      userAddressFormArray.controls.forEach( userAddressForm => {\n        userAddressForm.get('PRIMARY').enable();\n        userAddressForm.get('TYPE').enable();\n      });\n      userEmployeeForm.get('GENDER').enable();\n      userPersonalizationForm.get('LANGUAGE').enable();\n      userPersonalizationForm.get('TIMEZONE').enable();\n      userPersonalizationForm.get('DECIMAL_FORMAT').enable();\n      userPersonalizationForm.get('DATE_FORMAT').enable();\n    }\n  }\n\n  save() {\n    this.messageService.clearMessages();\n    if (this._composeChangesToUser()) {\n      this.identityService.saveUser(<Entity>this.changedUser).subscribe( data => {\n        this.changedUser = {};\n        if ('INSTANCE_GUID' in data) {\n          const userID = data['r_user'][0]['USER_ID'];\n          this.instanceGUID = data['INSTANCE_GUID'];\n          this.isNewMode = false;\n          this.identityService.getUserDetail(userID).subscribe(userData => {\n            if ('ENTITY_ID' in userData) {\n              this._switch2DisplayMode();\n              this._resetUserValue(<Entity>userData);\n            } else {\n              const errorMessages = <Message[]>userData;\n              errorMessages.forEach( msg => this.messageService.add(msg));\n            }\n          });\n          this.messageService.reportMessage('USER', 'USER_SAVED', 'S', userID);\n        } else {\n          const errorMessages = <Message[]>data;\n          errorMessages.forEach( msg => this.messageService.add(msg));\n        }\n      });\n    }\n  }\n\n  _composeChangesToUser() {\n    if (this.userForm.invalid) {\n      this.messageService.reportMessage('USER', 'INVALID', 'E');\n      return false;\n    }\n\n    if (this.userForm.dirty === false) {\n      this.messageService.reportMessage('GENERAL', 'NO_CHANGE', 'W');\n      return false;\n    }\n\n    this.changedUser['ENTITY_ID'] = 'person';\n    this.changedUser['INSTANCE_GUID'] = this.instanceGUID;\n    if (this.isNewMode) {\n      this.changedUser['person'] = {action: 'add', TYPE: 'employee', SYSTEM_ACCESS: 'PORTAL'};\n    }\n\n    const userBasicFormGroup = this.userForm.get('userBasic');\n    const userID = this.userForm.get('USER_ID').value;\n    if (userBasicFormGroup.dirty) {\n      const userBasicNamesFormGroup = userBasicFormGroup.get('names') as FormGroup;\n      this.changedUser['r_user'] = this.uiMapperService.composeChangedRelation(\n        userBasicNamesFormGroup, {USER_ID: userID}, this.isNewMode);\n\n      const userBasicEmployeeFormGroup = userBasicFormGroup.get('employee') as FormGroup;\n      this.changedUser['r_employee'] = this.uiMapperService.composeChangedRelation(\n        userBasicEmployeeFormGroup, {USER_ID: userID}, this.isNewMode);\n    }\n\n    const userEmailFormArray = this.userForm.get('emails') as FormArray;\n    this.changedUser['r_email'] = this.uiMapperService.composeChangedRelationArray(\n      userEmailFormArray, this.originalUserValue['emails'], {EMAIL: null});\n\n    const userAddressFormArray = this.userForm.get('addresses') as FormArray;\n    this.changedUser['r_address'] = this.uiMapperService.composeChangedRelationArray(\n      userAddressFormArray, this.originalUserValue['addresses'], {ADDRESS_ID: null});\n\n    const userPersonalizationFormGroup = this.userForm.get('userPersonalization') as FormGroup;\n    this.changedUser['r_personalization'] = this.uiMapperService.composeChangedRelation(\n      userPersonalizationFormGroup, {USER_ID: userID}, !userPersonalizationFormGroup.get('USER_ID').value);\n\n    const userRoleFormArray = this.userForm.get('userRole') as FormArray;\n    const relationship = this.uiMapperService.composeChangedRelationship(\n      'rs_user_role',\n      [{ENTITY_ID: 'permission', ROLE_ID: 'system_role'}],\n      userRoleFormArray, this.originalUserValue['userRole'], ['NAME', 'DESCRIPTION']);\n    if (relationship) {this.changedUser['relationships'] = [relationship]; }\n\n    return true;\n  }\n\n  canDeactivate(): Observable<boolean> | boolean {\n    if (this.isNewMode || (this.userForm && this.userForm.dirty)) {\n      return this.dialogService.confirm('Discard changes?');\n    } else {\n      return true;\n    }\n  }\n}\n\n","<nav class=\"navbar dk-fixed-top navbar-light bg-light\">\n  <div>\n    <span class=\"font-weight-bold mb-0 mx-1\">{{isNewMode? 'New User' : readonly? 'Display User' : 'Change User'}}</span>\n  </div>\n\n  <div class=\"flex-row-reverse\">\n    <button class=\"btn btn-lg btn-outline-primary mr-2\" type=\"button\" title=\"Edit/Display\" id=\"editDisplay\" (click)=\"switchEditDisplay()\">\n      <span *ngIf=\"readonly\" class=\"fas fa-edit\"> Edit</span>\n      <span *ngIf=\"!readonly\" class=\"fas fa-glasses\"> Display</span>\n    </button>\n    <button class=\"btn btn-lg btn-outline-primary mr-2\" type=\"button\" title=\"Save\" id=\"save\" (click)=\"save()\" [disabled]=\"readonly\">\n      <span class=\"fas fa-save\"> Save</span>\n    </button>\n  </div>\n</nav>\n\n<div class=\"mt-2 mb-2\">\n  <dk-message></dk-message>\n</div>\n\n<div *ngIf=\"userForm\" class=\"ml-2\">\n  <div class=\"mt-2 ml-1 row\">\n    <dk-app-attribute-form2 class=\"col-md-6 col-lg-4 dk-form-label\"\n                            [attributeControl]=\"getAttrCtrlFromID('USER_ID')\"\n                            [formGroup]=\"userForm\"\n                            [readonly]=\"!isNewMode\">\n    </dk-app-attribute-form2>\n    <div class=\"col-md-6 col-lg-4 row form-group mr-2\" [formGroup]=\"userForm\">\n      <label for=\"lockStatus\" class=\"col-form-label dk-form-label\">Lock Status:</label>\n      <div id=\"lockStatus\" class=\"form-control dk-icon\">\n        <span *ngIf=\"userForm.get('LOCK').value\" class=\"fas fa-lock\" > Locked</span>\n        <span *ngIf=\"!userForm.get('LOCK').value\" class=\"fas fa-lock-open\"> Unlocked</span>\n      </div>\n    </div>\n    <div class=\"col-md-6 col-lg-4 row form-group mr-2\" [formGroup]=\"userForm\">\n      <label for=\"passwordStatus\" class=\"col-form-label dk-form-label\">Password Status:</label>\n      <div id=\"passwordStatus\" class=\"form-control dk-icon\" [ngSwitch]=\"userForm.get('PWD_STATUS').value\">\n        <div *ngSwitchCase=\"\">\n          <span class=\"badge badge-primary\">Initial</span>\n        </div>\n        <div *ngSwitchCase=\"1\">\n          <span class=\"badge badge-success\">Active</span>\n        </div>\n        <div *ngSwitchCase=\"2\">\n          <span class=\"badge badge-warning\">Renew</span>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <ul class=\"nav nav-tabs mt-1\">\n    <li class=\"nav-item\">\n      <a class=\"nav-link\" [class.active]=\"tabStrip===1\" href=\"javascript:void(0);\" (click)=\"switchTabStrip(1)\">Basic</a>\n    </li>\n    <li class=\"nav-item\">\n      <a class=\"nav-link\" [class.active]=\"tabStrip===2\" href=\"javascript:void(0);\" (click)=\"switchTabStrip(2)\">Email</a>\n    </li>\n    <li class=\"nav-item\">\n      <a class=\"nav-link\" [class.active]=\"tabStrip===3\" href=\"javascript:void(0);\" (click)=\"switchTabStrip(3)\">Address</a>\n    </li>\n    <li class=\"nav-item\">\n      <a class=\"nav-link\" [class.active]=\"tabStrip===4\" href=\"javascript:void(0);\" (click)=\"switchTabStrip(4)\">Personalization</a>\n    </li>\n    <li class=\"nav-item\">\n      <a class=\"nav-link\" [class.active]=\"tabStrip===5\" href=\"javascript:void(0);\" (click)=\"switchTabStrip(5)\">Role</a>\n    </li>\n  </ul>\n\n  <div class=\"mt-2\" [ngSwitch]=\"tabStrip\">\n    <app-user-basic *ngSwitchCase=\"1\" [userForm]=\"userForm\" [relationMetas]=\"relationMetas\" [readonly]=\"readonly\"></app-user-basic>\n    <app-user-email *ngSwitchCase=\"2\" [userForm]=\"userForm\" [relationMetas]=\"relationMetas\" [readonly]=\"readonly\"></app-user-email>\n    <app-user-address *ngSwitchCase=\"3\" [userForm]=\"userForm\" [relationMetas]=\"relationMetas\"  [readonly]=\"readonly\"></app-user-address>\n    <app-user-personalization *ngSwitchCase=\"4\" [userForm]=\"userForm\" [relationMetas]=\"relationMetas\" [readonly]=\"readonly\"></app-user-personalization>\n    <app-user-role *ngSwitchCase=\"5\" [userForm]=\"userForm\" [readonly]=\"readonly\"></app-user-role>\n  </div>\n</div>\n","import {Component, Input, OnInit} from '@angular/core';\nimport {FormArray, FormBuilder, FormGroup, Validators} from \"@angular/forms\";\nimport {MessageService} from \"ui-message-angular\";\nimport {AttributeBase, AttributeControlService, RelationMeta} from \"jor-angular\";\n\n@Component({\n  selector: 'app-user-email',\n  templateUrl: './user-email.component.html',\n  styleUrls: ['./user-email.component.css']\n})\nexport class UserEmailComponent implements OnInit {\n  @Input() readonly: boolean;\n  @Input() userForm: FormGroup;\n  @Input() relationMetas: RelationMeta[];\n  private attrCtrls: AttributeBase[];\n  userEmailFormArray: FormArray;\n\n  constructor(private fb: FormBuilder,\n              private messageService: MessageService,\n              private attributeControlService: AttributeControlService) { }\n\n  ngOnInit() {\n    this.userEmailFormArray = this.userForm.get('emails') as FormArray;\n    this.attrCtrls = this.attributeControlService.toAttributeControl(\n      this.relationMetas.find( relationMeta => relationMeta.RELATION_ID === 'r_email').ATTRIBUTES);\n    if (!this.readonly && this.userEmailFormArray.length === 0) {\n      this.addEmail();\n    }\n  }\n\n  getAttrCtrlFromID(fieldName: string): AttributeBase {\n    return this.attrCtrls.find( attrCtrl => attrCtrl.name === fieldName);\n  }\n\n  addEmail() {\n    const emailFormGroup = this.fb.group({\n      EMAIL: ['', [Validators.required]],\n      TYPE: ['', [Validators.required]],\n      PRIMARY: ['']\n    });\n    if (this.userEmailFormArray.length === 0) {\n      emailFormGroup.get('PRIMARY').setValue(1);\n      emailFormGroup.get('PRIMARY').markAsDirty();\n    }\n    this.userEmailFormArray.push(emailFormGroup);\n  }\n\n  deleteEmail(index: number) {\n    if (this.userEmailFormArray.length === 1) {\n      this.messageService.reportMessage('USER', 'AT_LEAST_ONE_EMAIL', 'E');\n    } else {\n      if (this.userEmailFormArray.at(index).value['PRIMARY']) {\n        const newPrimaryIndex = index === 0 ? 1 : 0;\n        this.userEmailFormArray.at(newPrimaryIndex).get('PRIMARY').setValue(1);\n        this.userEmailFormArray.at(newPrimaryIndex).get('PRIMARY').markAsDirty();\n      }\n      this.userEmailFormArray.removeAt(index);\n      this.userEmailFormArray.markAsDirty();\n    }\n  }\n}\n","<div class=\"card mt-4\">\n  <div class=\"card-body\">\n    <div *ngFor=\"let userEmailForm of userEmailFormArray.controls; let i = index\" class=\"card mb-4\">\n      <button type=\"button\" id=\"remove\" class=\"dk-close-button close d-flex justify-content-end mr-2\" aria-label=\"Close\" (click)=\"deleteEmail(i)\">\n        <span aria-hidden=\"true\">&times;</span>\n      </button>\n      <div class=\"card-body row\" [formGroup]=\"userEmailForm\">\n        <dk-app-attribute-form2 class=\"col-md-6 col-lg-4 dk-form-label\"\n                                [attributeControl]=\"getAttrCtrlFromID('TYPE')\"\n                                [formGroup]=\"userEmailForm\"\n                                [readonly]=\"readonly\">\n        </dk-app-attribute-form2>\n        <dk-app-attribute-form2 class=\"col-md-6 col-lg-4 dk-form-label\"\n                                [attributeControl]=\"getAttrCtrlFromID('EMAIL')\"\n                                [formGroup]=\"userEmailForm\"\n                                [readonly]=\"readonly\">\n        </dk-app-attribute-form2>\n        <div class=\"col-1 row form-group mr-2\">\n          <label for=\"primaryEmail\" class=\"col-form-label dk-form-label\">Primary</label>\n          <input type=\"radio\" class=\"form-control\" id=\"primaryEmail\" [value]=\"1\" name=\"PRIMARY\" formControlName=\"PRIMARY\">\n        </div>\n      </div>\n    </div>\n    <button type=\"button\" id=\"add\" class=\"btn btn-primary float-right\" [disabled]=\"readonly\" (click)=\"addEmail()\">Add</button>\n  </div>\n</div>\n","import {Component, Input, OnInit} from '@angular/core';\nimport {FormGroup} from \"@angular/forms\";\nimport {AttributeBase, AttributeControlService, RelationMeta} from \"jor-angular\";\n\n@Component({\n  selector: 'app-user-personalization',\n  templateUrl: './user-personalization.component.html',\n  styleUrls: ['./user-personalization.component.css']\n})\nexport class UserPersonalizationComponent implements OnInit {\n  @Input() readonly: boolean;\n  @Input() userForm: FormGroup;\n  @Input() relationMetas: RelationMeta[];\n  private attrCtrls: AttributeBase[];\n  userPersonalizationForm: FormGroup;\n\n  constructor(private attributeControlService: AttributeControlService) { }\n\n  ngOnInit() {\n    this.userPersonalizationForm = this.userForm.get('userPersonalization') as FormGroup;\n    this.attrCtrls = this.attributeControlService.toAttributeControl(\n      this.relationMetas.find( relationMeta => relationMeta.RELATION_ID === 'r_personalization').ATTRIBUTES);\n  }\n\n  getAttrCtrlFromID(fieldName: string): AttributeBase {\n    return this.attrCtrls.find( attrCtrl => attrCtrl.name === fieldName);\n  }\n}\n","<form class=\"mt-4 ml-2 row\">\n  <dk-app-attribute-form2 class=\"col-md-6 col-lg-4 dk-form-label\"\n                          [attributeControl]=\"getAttrCtrlFromID('LANGUAGE')\"\n                          [formGroup]=\"userPersonalizationForm\"\n                          [readonly]=\"readonly\">\n  </dk-app-attribute-form2>\n  <dk-app-attribute-form2 class=\"col-md-6 col-lg-4 dk-form-label\"\n                          [attributeControl]=\"getAttrCtrlFromID('TIMEZONE')\"\n                          [formGroup]=\"userPersonalizationForm\"\n                          [readonly]=\"readonly\">\n  </dk-app-attribute-form2>\n  <dk-app-attribute-form2 class=\"col-md-6 col-lg-4 dk-form-label\"\n                          [attributeControl]=\"getAttrCtrlFromID('DECIMAL_FORMAT')\"\n                          [formGroup]=\"userPersonalizationForm\"\n                          [readonly]=\"readonly\">\n  </dk-app-attribute-form2>\n  <dk-app-attribute-form2 class=\"col-md-6 col-lg-4 dk-form-label\"\n                          [attributeControl]=\"getAttrCtrlFromID('DATE_FORMAT')\"\n                          [formGroup]=\"userPersonalizationForm\"\n                          [readonly]=\"readonly\">\n  </dk-app-attribute-form2>\n</form>\n","import {Component, Input, OnInit, ViewChild} from '@angular/core';\nimport {AbstractControl, FormArray, FormBuilder, FormGroup} from \"@angular/forms\";\nimport {IdentityService} from \"../../../identity.service\";\nimport {SearchHelpComponent} from \"jor-angular\";\n\n@Component({\n  selector: 'app-user-role',\n  templateUrl: './user-role.component.html',\n  styleUrls: ['./user-role.component.css']\n})\nexport class UserRoleComponent implements OnInit {\n  @Input() readonly: boolean;\n  @Input() userForm: FormGroup;\n  userRoleFormArray: FormArray;\n\n  constructor(private fb: FormBuilder,\n              private identityService: IdentityService) { }\n\n  @ViewChild(SearchHelpComponent, { static: true })\n  private searchHelpComponent: SearchHelpComponent;\n\n  ngOnInit() {\n    this.userRoleFormArray = this.userForm.get('userRole') as FormArray;\n    // Recheck each role since every time the template is initialized, Angular clears the error status.\n    if (!this.readonly) {\n      this.userRoleFormArray.controls.forEach( (ctrl, index) => {\n        this.onChangeRoleID(index);\n      });\n    }\n  }\n\n  deleteRole(index: number): void {\n    if (index !== this.userRoleFormArray.length - 1) {\n      this.userRoleFormArray.removeAt(index);\n      this.userRoleFormArray.markAsDirty();\n    }\n  }\n\n  onChangeRoleID(index: number): void {\n    const currentRole = this.userRoleFormArray.at(index);\n    if (this.oldRole(currentRole)) {\n      currentRole.get('NAME').setErrors({message: 'Duplicate Role'});\n      return;\n    }\n\n    if (index === this.userRoleFormArray.length - 1 && currentRole.value.NAME.trim() !== '') {\n      // Only work if the last line is not new and empty\n      this.userRoleFormArray.push(\n        this.fb.group({\n          NAME: [''],\n          DESCRIPTION: [''],\n          system_role_INSTANCE_GUID: [''],\n          RELATIONSHIP_INSTANCE_GUID: ['']\n        })\n      );\n    }\n\n    if (currentRole.value.NAME) {\n      this.identityService.getRoleDesc(currentRole.value.NAME).subscribe(data => {\n        if (data['msgCat']) {\n          currentRole.get('NAME').setErrors({message: data['msgShortText']});\n        } else {\n          currentRole.get('DESCRIPTION').setValue(data['DESCRIPTION']);\n          currentRole.get('system_role_INSTANCE_GUID').setValue(data['INSTANCE_GUID']);\n        }\n      });\n    }\n  }\n\n  oldRole(userRoleForm: AbstractControl): boolean {\n    const existIndex = this.userRoleFormArray.controls.findIndex(\n      role => role.value.NAME === userRoleForm.value.NAME && role.pristine && role.value.NAME !== '');\n    return existIndex !== -1 ;\n  }\n\n  onSearchHelp(rowID: number, exportObject: AbstractControl): void {\n    const afterExportFn = function (context: any, ruleIdx: number) {\n      return () => context.onChangeRoleID(ruleIdx);\n    }(this, rowID).bind(this);\n\n    this.searchHelpComponent.openSearchHelpModalByEntity('permission', 'r_role',\n      exportObject, this.readonly, null, null, afterExportFn);\n  }\n\n}\n","<table class=\"table table-bordered dk-table ml-3 mt-4\" [formGroup]=\"userForm\">\n  <thead class=\"thead-light dk-form-label\">\n    <tr>\n      <th scope=\"col\">Role</th>\n      <th scope=\"col\">Description</th>\n      <th scope=\"col\">Action</th>\n    </tr>\n  </thead>\n\n  <tbody formArrayName=\"userRole\" class=\"mb-4\">\n    <tr *ngFor=\"let userRoleForm of userRoleFormArray.controls; let i = index\">\n      <td [formGroup]=\"userRoleForm\">\n        <div class=\"input-group dk-name\">\n          <input class=\"form-control\" type=\"text\" formControlName=\"NAME\"\n               [readonly]=\"readonly || oldRole(userRoleForm) && userRoleForm.valid\" (change)=\"onChangeRoleID(i)\">\n          <div class=\"invalid-tooltip\">\n            {{userRoleForm.get('NAME').errors?.message}}\n          </div>\n          <div class=\"input-group-append\">\n            <button class=\"btn btn-outline-secondary btn-light\" type=\"button\" id=\"searchPermission\"\n            (click)=\"onSearchHelp(i, userRoleForm)\">\n              <span class=\"fas fa-search\"></span>\n            </button>\n          </div>\n        </div>\n      </td>\n      <td [formGroup]=\"userRoleForm\" class=\"dk-description\">\n        <input type=\"text\" formControlName=\"DESCRIPTION\" readonly class=\"form-control\">\n      </td>\n      <td class=\"dk-actions\">\n        <button class=\"btn\" type=\"button\" id=\"delete\" [disabled]=\"readonly\" (click)=\"deleteRole(i)\" title=\"Delete\">\n          <span class=\"far fa-trash-alt\"></span>\n        </button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<dk-app-search-help></dk-app-search-help>\n","import { Component, OnInit } from '@angular/core';\nimport {UserList} from \"../../user\";\nimport {Message, MessageService, messageType} from \"ui-message-angular\";\nimport {Router} from \"@angular/router\";\nimport {IdentityService} from \"../../identity.service\";\n\n@Component({\n  selector: 'app-user-list',\n  templateUrl: './user-list.component.html',\n  styleUrls: ['./user-list.component.css']\n})\nexport class UserListComponent implements OnInit {\n  userID: string;\n  userName: string;\n  users: UserList[];\n  showDeletionConfirmation = false;\n  toBeDeletedUser: string;\n\n  get displayDeletionConfirmation() {return this.showDeletionConfirmation ? 'block' : 'none'; }\n\n  constructor(private identityService: IdentityService,\n              private messageService: MessageService,\n              private router: Router) { }\n\n  ngOnInit() {\n  }\n\n  search() {\n    this.messageService.clearMessages();\n    this.users = [];\n    this.userID = this.userID ? this.userID.trim() : '';\n    this.userName = this.userName ? this.userName.trim() : '';\n    this.identityService.searchUsers(this.userID, this.userName).subscribe(\n      data => {\n        if (!data[0]) {\n          this.messageService.reportMessage('GENERAL', 'EMPTY_LIST', messageType.Warning);\n        } else if (data[0]['msgCat']) {\n          const messages = <Message[]>data;\n          messages.forEach( msg => this.messageService.add(msg));\n        } else {\n          this.users = <UserList[]>data;\n        }\n      }\n    );\n  }\n\n  enterSearch($event): void {\n    if ($event.keyCode === 13 ) {\n       this.search();\n    }\n  }\n\n  newUser(): void {\n    this.router.navigate(['users', '/', {action: 'new'}]);\n  }\n\n  displayUser(userID: string): void {\n    this.router.navigate(['users', userID, {action: 'display'}]);\n  }\n\n  changeUser(userID: string): void {\n    this.router.navigate(['users', userID, {action: 'change'}]);\n  }\n\n  deleteUser(userID: string): void {\n    this.toBeDeletedUser = userID;\n    this.showDeletionConfirmation = true;\n  }\n\n  cancelDeletion(): void {\n    this.showDeletionConfirmation = false;\n  }\n\n  confirmDeletion(): void {\n    const toBeDeletedUserGUID = this.users.find( ele => ele.USER_ID === this.toBeDeletedUser).INSTANCE_GUID;\n    this.identityService.deleteUser(toBeDeletedUserGUID).subscribe( errorMsg => {\n      this.showDeletionConfirmation = false;\n      if (errorMsg) {\n        const messages = <Message[]>errorMsg;\n        messages.forEach( msg => this.messageService.add(msg));\n      } else {\n        this.search();\n      }\n    });\n  }\n\n}\n","<div class=\"card mb-3 pt-3\">\n  <div class=\"mt-2 pl-4 row\">\n    <div class=\"col-6 form-group row\">\n      <label for=\"user_id\" class=\"col-sm-3 col-form-label\">User ID:</label>\n      <input id=\"user_id\" name=\"user_id\" [(ngModel)]=\"userID\" type=\"text\" class=\"col-sm-6 form-control\" (keyup)=\"enterSearch($event)\" autofocus>\n    </div>\n    <div class=\"col-6 form-group row\">\n      <label for=\"user_name\" class=\"col-sm-3 col-form-label\">User Name:</label>\n      <input id=\"user_name\" name=\"user_name\" [(ngModel)]=\"userName\" type=\"text\" class=\"col-sm-6 form-control\" (keyup)=\"enterSearch($event)\">\n    </div>\n  </div>\n\n  <div class=\"mb-4\">\n    <button type=\"button\" id=\"search\" class=\"btn btn-primary float-right mr-4\" (click)=\"search()\">Search</button>\n  </div>\n</div>\n\n<div class=\"mt-2 mb-4 mx-4\">\n  <dk-message></dk-message>\n  <div class=\"btn-toolbar justify-content-end my-2\" role=\"toolbar\">\n    <button type=\"button\" id=\"new\" class=\"btn btn-light\" (click)=\"newUser()\"><span class=\"fas fa-plus\"></span> New</button>\n  </div>\n  <table class=\"table table-bordered table-sm\">\n    <thead class=\"thead-light\">\n    <tr>\n      <th scope=\"col\">User ID</th>\n      <th scope=\"col\">User Name</th>\n      <th scope=\"col\">Display Name</th>\n      <th scope=\"col\">Locked?</th>\n      <th scope=\"col\">Password State</th>\n      <th scope=\"col\">Action</th>\n    </tr>\n    </thead>\n\n    <tbody>\n    <tr *ngFor=\"let user of users\">\n      <td><a [routerLink]=\"['/users', user.USER_ID, {action: 'display'}]\">{{user.USER_ID}}</a></td>\n      <td>{{user.USER_NAME}}</td>\n      <td>{{user.DISPLAY_NAME}}</td>\n      <td class=\"dk-lock\">\n        <span *ngIf=\"user.LOCK\" class=\"fas fa-lock\" title=\"Locked\"></span>\n        <span *ngIf=\"!user.LOCK\" class=\"fas fa-lock-open\" title=\"Unlocked\"></span>\n      </td>\n      <td class=\"dk-password-state\" [ngSwitch]=\"user.PWD_STATE\">\n        <div *ngSwitchCase=\"\">\n          <span class=\"badge badge-primary\">Initial</span>\n        </div>\n        <div *ngSwitchCase=\"1\">\n          <span class=\"badge badge-success\">Active</span>\n        </div>\n        <div *ngSwitchCase=\"2\">\n          <span class=\"badge badge-warning\">Renew</span>\n        </div>\n      </td>\n      <td class=\"dk-actions\">\n        <button title=\"Display\" id=\"display\" class=\"btn\" type=\"button\" (click)=\"displayUser(user.USER_ID)\">\n          <span class=\"fas fa-search\"></span>\n        </button>\n        <button title=\"Change\" id=\"change\" class=\"btn\" type=\"button\" (click)=\"changeUser(user.USER_ID)\">\n          <span class=\"fas fa-pen\"></span>\n        </button>\n        <button title=\"Delete\" id=\"delete\" class=\"btn\" type=\"button\" (click)=\"deleteUser(user.USER_ID)\">\n          <span class=\"far fa-trash-alt\"></span>\n        </button>\n      </td>\n    </tr>\n    </tbody>\n  </table>\n\n  <div class=\"modal fade\" [class.show]=\"showDeletionConfirmation\"\n       [ngStyle]=\"{'display': displayDeletionConfirmation}\" id=\"deletionConfirmation\" tabindex=\"-1\" role=\"dialog\">\n    <div class=\"modal-dialog modal-sm modal-dialog-centered\" role=\"document\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title\" id=\"confirmDeletion\">Confirm Deletion</h5>\n          <button type=\"button\" class=\"close\" (click)=\"cancelDeletion()\">\n            <span aria-hidden=\"true\">&times;</span>\n          </button>\n        </div>\n        <div class=\"modal-body\">\n          <p>Are you sure to delete the user '{{toBeDeletedUser}}'?</p>\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" id=\"cancel\" class=\"btn btn-secondary\" (click)=\"cancelDeletion()\">Cancel</button>\n          <button type=\"button\" id=\"confirm\" class=\"btn btn-primary\" (click)=\"confirmDeletion()\">Confirm</button>\n        </div>\n      </div>\n    </div>\n  </div>\n\n</div>\n","import { Injectable } from '@angular/core';\nimport {ActivatedRouteSnapshot, CanDeactivate, RouterStateSnapshot} from '@angular/router';\nimport { Observable } from 'rxjs';\n\nexport interface CanComponentDeactivate {\n  canDeactivate: () => Observable<boolean> | Promise<boolean> | boolean;\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class WorkProtectionGuard implements CanDeactivate<CanComponentDeactivate>  {\n\n  canDeactivate(component: CanComponentDeactivate,\n                currentRoute: ActivatedRouteSnapshot,\n                currentState: RouterStateSnapshot,\n                nextState?: RouterStateSnapshot): Observable<boolean> | Promise<boolean> | boolean {\n    return component.canDeactivate ? component.canDeactivate() : true;\n  }\n}\n","// The file contents for the current environment will overwrite these during build.\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\n// The list of which env maps to which file can be found in `.angular-cli.json`.\n\nexport const environment = {\n  production: false,\n  originalHost: 'http://localhost:3000'\n};\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.log(err));\n"]}