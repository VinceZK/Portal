{"version":3,"sources":["webpack:///$_lazy_route_resources|lazy|groupOptions: {}|namespace object","webpack:///src/app/app-routing.module.ts","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/custom.reuse.strategy.ts","webpack:///src/app/dialog.service.ts","webpack:///src/app/error-page/error-page.component.ts","webpack:///src/app/error-page/error-page.component.html","webpack:///src/app/external-app/external-app-routing.module.ts","webpack:///src/app/external-app/external-app.component.ts","webpack:///src/app/external-app/external-app.component.html","webpack:///src/app/external-app/external-app.module.ts","webpack:///src/app/head-bar/head-bar.component.html","webpack:///src/app/head-bar/head-bar.component.ts","webpack:///src/app/history.service.ts","webpack:///src/app/identity.service.ts","webpack:///src/app/mockup/mockup-routing.module.ts","webpack:///src/app/mockup/mockup.component.ts","webpack:///src/app/mockup/mockup.module.ts","webpack:///src/app/msgStore.ts","webpack:///src/app/not-found/not-found.component.ts","webpack:///src/app/not-found/not-found.component.html","webpack:///src/app/role.ts","webpack:///src/app/share.service.ts","webpack:///src/app/side-menu/side-menu.component.html","webpack:///src/app/side-menu/side-menu.component.ts","webpack:///src/app/user/user-detail/async-validators.ts","webpack:///src/app/user/user-detail/user-address/user-address.component.html","webpack:///src/app/user/user-detail/user-address/user-address.component.ts","webpack:///src/app/user/user-detail/user-basic/user-basic.component.ts","webpack:///src/app/user/user-detail/user-basic/user-basic.component.html","webpack:///src/app/user/user-detail/user-detail.component.html","webpack:///src/app/user/user-detail/user-detail.component.ts","webpack:///src/app/user/user-detail/user-email/user-email.component.html","webpack:///src/app/user/user-detail/user-email/user-email.component.ts","webpack:///src/app/user/user-detail/user-personalization/user-personalization.component.ts","webpack:///src/app/user/user-detail/user-personalization/user-personalization.component.html","webpack:///src/app/user/user-detail/user-role/user-role.component.html","webpack:///src/app/user/user-detail/user-role/user-role.component.ts","webpack:///src/app/user/user-list/user-list.component.html","webpack:///src/app/user/user-list/user-list.component.ts","webpack:///src/app/work-protection.guard.ts","webpack:///src/environments/environment.ts","webpack:///src/main.ts"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","id","module","exports","routes","path","component","UserListComponent","UserDetailComponent","canDeactivate","WorkProtectionGuard","loadChildren","m","DashboardModule","HandsontableModule","ErrorPageComponent","NotFoundComponent","AppRoutingModule","RouterModule","relativeLinkResolution","AppComponent","router","activatedRoute","identityService","shareService","historyService","entityService","messageService","logonService","isCollapsed","setOriginalHost","environment","setHost","session","subscribe","data","setSession","setMessageStore","msgStore","Session","LANGUAGE","events","pipe","filter","event","NavigationEnd","map","route","outlet","url","firstChild","snapshot","length","join","mergeMap","apps","of","find","app","routeLink","sideMenu","activateApp","addHistory","collapse","SideMenuComponent","onCollapse","AppModule","provide","RouteReuseStrategy","useClass","CustomReuseStrategy","BrowserModule","FormsModule","ReactiveFormsModule","MessageModule","MockupModule","ExternalAppModule","HttpClientModule","JorAngularModule","LogonModule","HeadBarComponent","UserBasicComponent","UserPersonalizationComponent","UserRoleComponent","UserEmailComponent","UserAddressComponent","routesToCache","storedRouteHandles","Map","indexOf","routeConfig","handle","set","has","get","future","curr","DialogService","message","confirmation","window","confirm","ExternalAppComponent","ExternalAppRoutingModule","sanitizer","paramMap","switchMap","params","appID","getAppRouteLink","originalRouteLink","navigate","appDangerousUrl","substr","location","origin","appUrl","bypassSecurityTrustResourceUrl","CommonModule","document","history","EventEmitter","dropdown","historyOpen","notificationOpen","preferenceOpen","userBasicInfo","currentHistoryObserver","navHistory","currentAppObserver","currentApp","$event","srcElement","className","emit","logout","href","DOCUMENT","toggleHistoryDropdown","toggleNotificationDropdown","togglePreferenceOpen","HistoryService","historySource","BehaviorSubject","name","NUM_OF_HISTORY","asObservable","idx","ele","splice","push","shift","next","httpOptions","headers","HttpHeaders","IdentityService","http","originalHost","defaultSession","USER_ID","formatDate","Date","post","catchError","handleError","RELATION_ID","APP_ID","appEntity","App","Array","isArray","ROUTE_LINK","userID","userName","queryObject","QueryObject","ENTITY_ID","PROJECTION","FILTER","includes","FIELD_NAME","OPERATOR","LOW","replace","SORT","pieceObject","ID","piece","RELATIONS","RELATIONSHIPS","RELATIONSHIP_ID","PARTNER_ENTITY_PIECES","USER_NAME","roleID","NAME","instance","INSTANCE_GUID","DESCRIPTION","user","put","userGUID","operation","result","error","status","addMessage","messageType","console","MockupComponent","MockupRoutingModule","mockupUI","msgCat","msgName","msgText","EN","shortText","longText","Role","Catalog","UserBasicInfo","ShareService","isCollapsedSubject","Subject","isCollapsed$","activeRow","mouseLocs","lastDelayLoc","timeoutId","rem","searchTerms","menuDisplay","TOLERANCE","DELAY","role","parseInt","getComputedStyle","head","getPropertyValue","getRoleDetail","roles","_processRoleData","updateIsCollapsed","apps$","debounceTime","distinctUntilChanged","term","results","key","returnedApps","forEach","obj","searchedApps","clearMessages","msg","add","categories","category","height","originalHeight","active","isSubMenuShow","isExternal","log","keyCode","row","menuHeight","nativeElement","offsetHeight","menuScrollTop","getElementsByClassName","scrollTop","top","arrowTop","x","pageX","y","pageY","clearTimeout","isMouseInMenuArea","deactivateSubMenu","menu","offset","left","offsetLeft","offsetTop","upperLeft","offsetWidth","upperRight","lowerLeft","lowerRight","loc","possiblyActivate","appIdx","catalogIdx","findIndex","app1","activate","activateSubMenu","delay","activationDelay","setTimeout","prevLoc","slope","a","b","decreasingCorner","increasingCorner","decreasingSlope","increasingSlope","prevDecreasingSlope","prevIncreasingSlope","mouseleaveMenu","existingUserNameValidator","control","timer","getUserByUserName","value","generateMessage","msgShortText","existingUserIDValidator","getUserByUserID","fb","attributeControlService","userAddressFormArray","userForm","attrCtrls","toAttributeControl","relationMetas","relationMeta","ATTRIBUTES","fieldName","attrCtrl","addressFormGroup","group","ADDRESS_ID","TYPE","Validators","ADDRESS_VALUE","POSTCODE","CITY","COUNTRY","PRIMARY","setValue","markAsDirty","index","at","newPrimaryIndex","removeAt","addAddress","userBasicNamesForm","userBasicEmployeeForm","concat","dialogService","uiMapperService","readonly","isNewMode","originalUserValue","changedUser","tabStrip","action","forkJoin","getRelationMetaOfEntity","_createNewUser","getUserDetail","instanceGUID","_generateUserForm","_switch2EditMode","_switch2DisplayMode","errorMessages","tabStripID","dirty","reset","_setCheckBoxState","userIDCtrl","clearAsyncValidators","userNameCtrl","emailArray","lastIndex","emailFormGroup","invalid","EMAIL","addressArray","roleArray","roleFormGroup","markAsPristine","replaceState","setAsyncValidators","system_role_INSTANCE_GUID","RELATIONSHIP_INSTANCE_GUID","userDetail","Entity","LOCK","PWD_STATUS","DISPLAY_NAME","GIVEN_NAME","MIDDLE_NAME","FAMILY_NAME","TITLE","DEPARTMENT_ID","COMPANY_ID","GENDER","TIMEZONE","DECIMAL_FORMAT","DATE_FORMAT","userBasic","names","employee","emails","array","addresses","userPersonalization","userRole","email","address","userRoleRelationship","values","roleInstance","PARTNER_INSTANCES","getRawValue","userEmailFormArray","userEmployeeForm","userPersonalizationForm","controls","userEmailForm","disable","userAddressForm","enable","_composeChangesToUser","saveUser","userData","_resetUserValue","reportMessage","SYSTEM_ACCESS","userBasicFormGroup","userBasicNamesFormGroup","composeChangedRelation","userBasicEmployeeFormGroup","composeChangedRelationArray","userPersonalizationFormGroup","userRoleFormArray","relationship","composeChangedRelationship","ROLE_ID","switchEditDisplay","save","addEmail","ctrl","onChangeRoleID","currentRole","oldRole","setErrors","trim","getRoleDesc","userRoleForm","existIndex","pristine","rowID","exportObject","afterExportFn","context","ruleIdx","bind","searchHelpComponent","openSearchHelpModalByEntity","SearchHelpComponent","showDeletionConfirmation","users","searchUsers","messages","search","toBeDeletedUser","toBeDeletedUserGUID","deleteUser","errorMsg","enterSearch","newUser","cancelDeletion","confirmDeletion","currentRoute","currentState","nextState","production","enableProdMode","platformBrowser","bootstrapModule","err"],"mappings":"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","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 98255;\nmodule.exports = webpackEmptyAsyncContext;","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport {NotFoundComponent} from \"./not-found/not-found.component\";\nimport {ErrorPageComponent} from \"./error-page/error-page.component\";\nimport {UserListComponent} from \"./user/user-list/user-list.component\";\nimport {UserDetailComponent} from \"./user/user-detail/user-detail.component\";\nimport {WorkProtectionGuard} from \"./work-protection.guard\";\n\nconst routes: Routes = [\n  // The dashboard app is lazy loading\n  // { path: 'users', loadChildren: 'app/user/user.module#UserModule'},\n  { path: 'users', component: UserListComponent},\n  { path: 'users/:userID', component: UserDetailComponent, canDeactivate: [WorkProtectionGuard]},\n  { path: 'dashboard', loadChildren: () => import('app/dashboard/dashboard.module').then(m => m.DashboardModule)},\n  { path: 'handsontable', loadChildren: () => import('app/handsontable/handsontable.module').then(m => m.HandsontableModule)},\n  { path: 'errors', component: ErrorPageComponent },\n  { path: 'pageNotFound', component: NotFoundComponent },\n  { path: '**', component: NotFoundComponent }\n];\n\n@NgModule({\n  exports: [ RouterModule ],\n  imports: [ RouterModule.forRoot(routes, { relativeLinkResolution: 'legacy' }) ]\n})\nexport class AppRoutingModule {}\n","import {Component, OnInit, ViewChild} from '@angular/core';\nimport {SideMenuComponent} from \"./side-menu/side-menu.component\";\nimport {ActivatedRoute, NavigationEnd, Router} from \"@angular/router\";\nimport {HistoryService} from \"./history.service\";\nimport {filter, map, mergeMap} from \"rxjs/operators\";\nimport {IdentityService} from \"./identity.service\";\nimport {ShareService} from \"./share.service\";\nimport {of} from \"rxjs\";\nimport {EntityService} from \"jor-angular\";\nimport {environment} from \"../environments/environment\";\nimport {App} from \"./role\";\nimport {MessageService} from \"ui-message-angular\";\nimport {LogonService} from \"ui-logon-angular\";\nimport {msgStore} from './msgStore';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent implements OnInit {\n  @ViewChild(SideMenuComponent, { static: true })\n  private sideMenu: SideMenuComponent;\n\n  isCollapsed = false;\n  constructor(private router: Router,\n              private activatedRoute: ActivatedRoute,\n              private identityService: IdentityService,\n              private shareService: ShareService,\n              private historyService: HistoryService,\n              private entityService: EntityService,\n              private messageService: MessageService,\n              private logonService: LogonService\n  ) {\n    this.entityService.setOriginalHost(environment.originalHost);\n    this.logonService.setHost(environment.originalHost);\n    this.logonService.session().subscribe( data => {\n      this.identityService.setSession( data );\n      this.messageService.setMessageStore(msgStore, this.identityService.Session.LANGUAGE);\n    });\n  }\n\n  ngOnInit() {\n    this.router.events.pipe(\n      filter(event => event instanceof NavigationEnd),\n      map(() => this.activatedRoute),\n      filter(route => route.outlet === 'primary'),\n      map(route => {\n        let url = '';\n        while (route.firstChild) {\n          route = route.firstChild;\n          if ( route.snapshot.url.length > 0 ) {\n            url = url ? url + '/' + route.snapshot.url.join('/') : route.snapshot.url.join('/');\n          }\n        }\n        return url;\n      }),\n      mergeMap(url => {\n        if (this.shareService.apps.length === 0) {\n          // return this.identityService.getApp('/' + url);\n          return of(null);\n        } else {\n          return of(this.shareService.apps.find( app => app.routeLink === '/' + url ));\n        }\n      }))\n      .subscribe(app => {\n        if (app && app['routeLink']) {\n          this.sideMenu.activateApp(<App>app);\n          this.historyService.addHistory(<App>app);\n        }\n      });\n  }\n\n  onCollapse() {\n    this.isCollapsed = this.sideMenu.collapse();\n  }\n}\n","<div class=\"dk-frame-view\">\n  <!-- Head Bar Navigation -->\n  <app-head-bar (onCollapse)=\"onCollapse()\"></app-head-bar>\n\n  <div class=\"dk-frame-content\">\n    <!-- Side Bar Navigation -->\n    <app-side-menu></app-side-menu>\n\n    <!-- Content Area -->\n    <div class=\"dk-content-area\">\n      <router-outlet></router-outlet>\n    </div>\n  </div>\n</div>\n\n<!--<router-outlet></router-outlet>-->\n","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { AppComponent } from './app.component';\nimport { AppRoutingModule } from './app-routing.module';\nimport { SideMenuComponent } from './side-menu/side-menu.component';\nimport { HeadBarComponent } from './head-bar/head-bar.component';\nimport { MockupModule } from \"./mockup/mockup.module\";\nimport { HttpClientModule } from \"@angular/common/http\";\nimport { ExternalAppModule } from \"./external-app/external-app.module\";\nimport { NotFoundComponent } from './not-found/not-found.component';\nimport { ErrorPageComponent } from './error-page/error-page.component';\nimport {MessageModule} from \"ui-message-angular\";\nimport {RouteReuseStrategy} from \"@angular/router\";\nimport {CustomReuseStrategy} from \"./custom.reuse.strategy\";\nimport {UserListComponent} from \"./user/user-list/user-list.component\";\nimport {UserDetailComponent} from \"./user/user-detail/user-detail.component\";\nimport {UserBasicComponent} from \"./user/user-detail/user-basic/user-basic.component\";\nimport {UserPersonalizationComponent} from \"./user/user-detail/user-personalization/user-personalization.component\";\nimport {UserRoleComponent} from \"./user/user-detail/user-role/user-role.component\";\nimport {UserEmailComponent} from \"./user/user-detail/user-email/user-email.component\";\nimport {UserAddressComponent} from \"./user/user-detail/user-address/user-address.component\";\nimport {FormsModule, ReactiveFormsModule} from \"@angular/forms\";\nimport {JorAngularModule} from \"jor-angular\";\nimport {LogonModule} from \"ui-logon-angular\";\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    SideMenuComponent,\n    HeadBarComponent,\n    UserListComponent,\n    UserDetailComponent,\n    UserBasicComponent,\n    UserPersonalizationComponent,\n    UserRoleComponent,\n    UserEmailComponent,\n    UserAddressComponent,\n    NotFoundComponent,\n    ErrorPageComponent\n  ],\n  imports: [\n    BrowserModule,\n    FormsModule,\n    ReactiveFormsModule,\n    MessageModule,\n    MockupModule,\n    ExternalAppModule,\n    AppRoutingModule,\n    HttpClientModule,\n    JorAngularModule,\n    LogonModule\n  ],\n  bootstrap: [\n    AppComponent\n  ],\n  providers: [\n    {provide: RouteReuseStrategy, useClass: CustomReuseStrategy}\n  ]\n})\nexport class AppModule { }\n","/**\n * The custom route reuse strategy inherits the \"RouteReuseStrategy\" to achieve a very usual case,\n * which by default, Angular doesn't support.\n * 1. Search for items based on filter conditions.\n * 2. Navigate to one of the item to the detail page(component).\n * 3. Navigate back to searched item list without re-initializing the search&list component again.\n * This requires the Angular route to save the search&list component, and restore it whenever back.\n * The detail solution is described in following thread:\n * https://stackoverflow.com/questions/41280471/how-to-implement-routereusestrategy-shoulddetach-for-specific-routes-in-angular\n */\nimport {ActivatedRouteSnapshot, DetachedRouteHandle, RouteReuseStrategy} from '@angular/router';\nimport { Injectable } from \"@angular/core\";\n\n@Injectable()\nexport class CustomReuseStrategy implements RouteReuseStrategy {\n  routesToCache: string[] = ['users'];\n  storedRouteHandles = new Map<string, DetachedRouteHandle>();\n\n  /**\n   * When navigation from a reusable component, and if shouldReuseRoute return false,\n   * this method is invoked to decide whether the current route should be stored.\n   * @param route\n   */\n  shouldDetach(route: ActivatedRouteSnapshot): boolean {\n    // console.log('detaching', route);\n    return this.routesToCache.indexOf(route.routeConfig.path) > -1;\n  }\n\n  /**\n   * If the current route need to be stored, that is shouldDetach return true,\n   * then on this method, you can implement a way to store routes. Usually in a Map.\n   * @param route\n   * @param handle\n   */\n  store(route: ActivatedRouteSnapshot, handle: DetachedRouteHandle): void {\n    // console.log('store', route);\n    this.storedRouteHandles.set(route.routeConfig.path, handle);\n  }\n\n  /**\n   * When navigation to a reusable component, and if shouldReuseRoute return false,\n   * this method is invoked to decide whether the target component can be get from a reuse buffer.\n   * @param route\n   */\n  shouldAttach(route: ActivatedRouteSnapshot): boolean {\n    // console.log('shouldAttach', route);\n    return this.storedRouteHandles.has(route.routeConfig.path);\n  }\n\n  /**\n   * If shouldAttach return true, then this method is invoke to retrieve the component from the buffer.\n   * @param route\n   */\n  retrieve(route: ActivatedRouteSnapshot): DetachedRouteHandle {\n    return this.storedRouteHandles.get(route.routeConfig.path);\n  }\n\n  /**\n   * By default, Angular doesn't re-initializing the same component if the navigation is not to\n   * a different one. For example, you switch different entity ID in the same entity type detail page.\n   * In this way, shouldReuseRoute should return true to avoid executing other methods in this Class.\n   * However, if you navigate from search&list component to entity detail component, then the method should return false.\n   * So that other methods can be executed to decide whether the search&list component should be stored for future reuse.\n   * @param future\n   * @param curr\n   */\n  shouldReuseRoute(future: ActivatedRouteSnapshot, curr: ActivatedRouteSnapshot): boolean {\n    // console.log('shouldReuseRoute, future:', future, 'current:', curr);\n    return future.routeConfig === curr.routeConfig;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport {Observable, of} from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DialogService {\n\n  /**\n   * Ask user to confirm an action. `message` explains the action and choices.\n   * Returns observable resolving to `true`=confirm or `false`=cancel\n   */\n  confirm(message?: string): Observable<boolean> {\n    const confirmation = window.confirm(message || 'Is it OK?');\n\n    return of(confirmation);\n  }\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-error-page',\n  templateUrl: './error-page.component.html',\n  styleUrls: ['./error-page.component.css']\n})\nexport class ErrorPageComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","<dk-message></dk-message>\n\n","import { NgModule } from '@angular/core';\nimport {RouterModule, Routes} from \"@angular/router\";\nimport {ExternalAppComponent} from \"./external-app.component\";\n\nconst routes: Routes = [\n  {\n    path: 'external-app/:appID', component: ExternalAppComponent\n  }\n];\n\n@NgModule({\n  imports: [\n    RouterModule.forChild(routes)\n  ],\n  exports: [\n    RouterModule\n  ]\n})\nexport class ExternalAppRoutingModule { }\n","import {Component, OnInit} from '@angular/core';\nimport {ActivatedRoute, ParamMap, Router} from '@angular/router';\nimport {DomSanitizer} from \"@angular/platform-browser\";\nimport {switchMap} from \"rxjs/operators\";\nimport {ShareService} from \"../share.service\";\nimport {App} from \"../role\";\nimport {IdentityService} from \"../identity.service\";\nimport {of} from \"rxjs\";\n\n@Component({\n  selector: 'app-external-app',\n  templateUrl: './external-app.component.html',\n  styleUrls: ['./external-app.component.css']\n})\nexport class ExternalAppComponent implements OnInit {\n  appUrl;\n  // iFrameWidth: string;\n  apps: App[] = [];\n\n  constructor(\n    private route: ActivatedRoute,\n    private shareService: ShareService,\n    private identityService: IdentityService,\n    private sanitizer: DomSanitizer,\n    private router: Router\n  ) { }\n\n  ngOnInit() {\n    this.route.paramMap.pipe(\n      switchMap((params: ParamMap) => {\n          const appID = params.get('appID');\n          if (this.shareService.apps.length === 0) {\n            return this.identityService.getAppRouteLink(appID);\n          } else {\n            return of(this.shareService.apps.find( app => app.appID === appID).originalRouteLink);\n          }\n        }\n      )).subscribe(routeLink => {\n        if (routeLink === 'appNotFound') {\n          this.router.navigate(['pageNotFound']);\n        } else {\n          const appDangerousUrl = routeLink.substr(0, 4) === 'http' ? routeLink :\n            window.location.origin + routeLink;\n          this.appUrl = this.sanitizer.bypassSecurityTrustResourceUrl(appDangerousUrl);\n        }\n    });\n  }\n}\n","<iframe [src]=\"appUrl\" class=\"nav-content-iframe\">\n</iframe>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport {ExternalAppRoutingModule} from \"./external-app-routing.module\";\nimport {ExternalAppComponent} from \"./external-app.component\";\n\n@NgModule({\n  imports: [\n    CommonModule,\n    ExternalAppRoutingModule\n  ],\n  declarations: [\n    ExternalAppComponent\n  ]\n})\nexport class ExternalAppModule { }\n","<nav class=\"dk-navbar-inverse\">\n  <div class=\"dk-navbar-header\">\n    <button type=\"button\" class=\"dk-navbar-toggle\" (click)=\"collapse()\">\n      <span class=\"dk-sr-only\">Toggle navigation</span>\n      <span class=\"dk-icon-bar\"></span>\n      <span class=\"dk-icon-bar\"></span>\n      <span class=\"dk-icon-bar\"></span>\n    </button>\n    <a class=\"dk-navbar-brand\" href=\"#\"><img alt=\"Brand\" src=\"assets/darkhouse.png\"></a>\n  </div>\n\n  <!-- Application Name or Title -->\n  <div class=\"dk-navbar-center\">\n    <ul class=\"dk-nav dk-navbar-nav dk-navbar-app-title\">\n      <li [ngClass]=\"{'open': dropdown.historyOpen}\">\n        <a (click)=\"toggleHistoryDropdown()\" class=\"dk-nav-toggle\">{{currentApp.name}} <b class=\"dk-caret\"></b></a>\n        <ul class=\"dk-dropdown-menu\">\n          <li *ngFor=\"let app of navHistory\"><a routerLink=\"{{app.routeLink}}\">\n            {{app.name}}</a>\n          </li>\n        </ul>\n      </li>\n    </ul>\n  </div>\n\n  <!-- Generic Functions in the header bar -->\n  <div class=\"dk-navbar-right\">\n    <ul class=\"dk-nav dk-navbar-nav\">\n      <li [ngClass]=\"{'open': dropdown.notificationOpen}\">\n        <a (click)=\"toggleNotificationDropdown()\" class=\"dk-nav-toggle\"><span\n          class=\"fas fa-bell\"></span><span class=\"dk-label dk-badge\">32</span>\n        </a>\n        <ul class=\"dk-dropdown-menu\">\n          <li><a href=\"#\"><span class=\"dk-label dk-label-warning\">4:00 AM</span>Favourites Snippet</a></li>\n          <li><a href=\"#\"><span class=\"dk-label dk-label-warning\">4:30 AM</span>Email marketing</a></li>\n          <li><a href=\"#\"><span class=\"dk-label dk-label-warning\">5:00 AM</span>Subscriber focused email\n            design</a></li>\n          <li class=\"dk-divider\"></li>\n          <li><a href=\"#\" class=\"dk-text-center\">View All</a></li>\n        </ul>\n      </li>\n      <li [ngClass]=\"{'open': dropdown.preferenceOpen}\">\n        <a (click)=\"togglePreferenceOpen()\" class=\"dk-nav-toggle\"><span\n          class=\"fas fa-user\"></span>{{userBasicInfo && userBasicInfo.DISPLAY_NAME}} <b class=\"dk-caret\"></b>\n        </a>\n        <ul class=\"dk-dropdown-menu\">\n          <li><a href=\"#\"><span class=\"fas fa-user\"></span>Profile</a></li>\n          <li><a href=\"#\"><span class=\"fas fa-cog\"></span>Settings</a></li>\n          <li class=\"dk-divider\"></li>\n          <li><a (click)=\"logout()\"><span class=\"fas fa-power-off\"></span>Logout</a></li>\n        </ul>\n      </li>\n    </ul>\n  </div>\n</nav>\n","import {Component, EventEmitter, HostListener, Inject, OnInit, Output} from '@angular/core';\nimport {App} from \"../role\";\nimport {HistoryService} from \"../history.service\";\nimport {DOCUMENT} from \"@angular/common\";\nimport {LogonService, Session} from \"ui-logon-angular\";\nimport {IdentityService} from \"../identity.service\";\n\n@Component({\n  selector: 'app-head-bar',\n  templateUrl: './head-bar.component.html',\n  styleUrls: ['./head-bar.component.css']\n})\nexport class HeadBarComponent implements OnInit {\n  @Output() onCollapse = new EventEmitter<boolean>();\n  navHistory: App[];\n  currentApp: App;\n  dropdown = {\n    historyOpen: false,\n    notificationOpen: false,\n    preferenceOpen: false\n  };\n  userBasicInfo: Session = new Session();\n\n  constructor(@Inject(DOCUMENT)\n              private document: any,\n              private history: HistoryService,\n              private logonService: LogonService,\n              private identityService: IdentityService) { }\n\n  ngOnInit() {\n    this.history.currentHistoryObserver.subscribe(history => this.navHistory = history );\n    this.history.currentAppObserver.subscribe(currentApp => this.currentApp = currentApp );\n    this.logonService.session().subscribe( session => this.userBasicInfo = session );\n    this.userBasicInfo = this.identityService.Session;\n  }\n\n  @HostListener('document:mouseup', ['$event', 'dropdown'])\n  mouseupDocument($event, dropdown): void {\n    if ($event.srcElement.className !== 'dk-nav-toggle') {\n      dropdown.historyOpen = false;\n      dropdown.notificationOpen = false;\n      dropdown.preferenceOpen = false;\n    }\n  }\n\n  collapse() {\n    this.onCollapse.emit();\n  }\n\n  toggleHistoryDropdown() {\n    this.dropdown.historyOpen = !this.dropdown.historyOpen;\n    this.dropdown.notificationOpen = false;\n    this.dropdown.preferenceOpen = false;\n  }\n\n  toggleNotificationDropdown() {\n    this.dropdown.notificationOpen = !this.dropdown.notificationOpen;\n    this.dropdown.historyOpen = false;\n    this.dropdown.preferenceOpen = false;\n  }\n\n  togglePreferenceOpen() {\n    this.dropdown.preferenceOpen = !this.dropdown.preferenceOpen;\n    this.dropdown.historyOpen = false;\n    this.dropdown.notificationOpen = false;\n  }\n\n  logout() {\n    this.logonService.logout().subscribe(() => this.document.location.href = window.location.origin);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport {App} from \"./role\";\nimport {BehaviorSubject} from \"rxjs/internal/BehaviorSubject\";\n\n@Injectable({providedIn: 'root'})\nexport class HistoryService {\n  private navHistory: App[] = [];\n  private historySource = new BehaviorSubject<App[]>([]);\n  private currentApp = new BehaviorSubject<App>(<App>{name: 'Home'});\n  private readonly NUM_OF_HISTORY = 10;\n  currentHistoryObserver = this.historySource.asObservable();\n  currentAppObserver = this.currentApp.asObservable();\n\n  constructor() { }\n\n  addHistory(app: App) {\n    const idx = this.navHistory.map(ele => ele.routeLink)\n                               .indexOf(app.routeLink);\n    if ( idx > -1 ) {\n      this.navHistory.splice(idx, 1);\n    }\n    this.navHistory.push(app);\n    if (this.navHistory.length > this.NUM_OF_HISTORY ) {\n      this.navHistory.shift();\n    }\n    this.historySource.next(this.navHistory);\n    this.currentApp.next(app);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport {HttpClient, HttpHeaders} from '@angular/common/http';\nimport {Observable, of} from 'rxjs';\nimport {catchError, map} from 'rxjs/operators';\nimport {App, Role} from \"./role\";\nimport {Entity, QueryObject} from \"jor-angular\";\nimport {Router} from \"@angular/router\";\nimport {environment} from \"../environments/environment\";\nimport {Message, MessageService, messageType} from \"ui-message-angular\";\nimport {Session} from 'ui-logon-angular';\nimport {UserList} from \"./user\";\nimport {formatDate} from \"@angular/common\";\n\nconst httpOptions = {\n  headers: new HttpHeaders({ 'Content-Type': 'application/json' })\n};\n\n@Injectable({providedIn: 'root'})\nexport class IdentityService {\n  private originalHost = environment.originalHost;\n  private session: Session;\n\n  constructor(private http: HttpClient,\n              private messageService: MessageService,\n              private router: Router) {\n  }\n\n  setSession( data: any ) {\n    this.session = <Session>data;\n  }\n\n  get Session(): Session {\n    if (this.session) { return this. session; }\n    const defaultSession = new Session();\n    defaultSession.USER_ID = 'DH001';\n    defaultSession.LANGUAGE = 'EN';\n    return defaultSession;\n  }\n\n  get CurrentTime(): string {\n    return formatDate( new Date(), 'yyyy-MM-dd hh:mm:ss', 'en-US' );\n  }\n\n  /**\n   * Get a role detail information from backend based on an authenticated user\n   * @returns {Observable<Role>}\n   */\n  getRoleDetail(): Observable<Role[]> {\n    return this.http.post<Role[]>(this.originalHost + `/api/function/getRoleDetail`, {}, httpOptions).pipe(\n      catchError(this.handleError<any>('getRoleDetail')));\n  }\n\n  /**\n   * Get an APP detail based on a routeLink\n   * @param {string} routeLink\n   * @returns {Observable<App>}\n   */\n  getApp(routeLink: string): Observable<App> {\n    if (routeLink.substr(0, 13) === '/external-app') {\n      return this.http.post<Entity>(this.originalHost + `/api/entity/instance`,\n        {RELATION_ID: 'app', APP_ID: routeLink.substr(14)}, httpOptions).pipe(\n        map(appEntity => {\n          const app: App = new App;\n          if (Array.isArray(appEntity)) { appEntity = appEntity[0]; } // Could return an array, like message or multiple entities\n          if (appEntity['ENTITY_ID']) { // It returns entity instance, rather than an error message;\n            app.name = appEntity['app'][0]['NAME'];\n            app.routeLink = routeLink;\n          }\n          return app;\n        }),\n        catchError(this.handleError<any>('getApp')));\n    } else {\n      return this.http.post<Entity>(this.originalHost + `/api/entity/instance`,\n        {RELATION_ID: 'app', ROUTE_LINK: routeLink}, httpOptions).pipe(\n        map(appEntity => {\n          const app: App = new App;\n          if (Array.isArray(appEntity)) { appEntity = appEntity[0]; }\n          if (appEntity['ENTITY_ID']) {\n            app.name = appEntity['app'][0]['NAME'];\n            app.routeLink = appEntity['app'][0]['ROUTE_LINK'];\n          }\n          return app;\n        }),\n        catchError(this.handleError<any>('getApp')));\n    }\n  }\n\n  /**\n   * Get an APP's routelink from its appID\n   * @param appID\n   */\n  getAppRouteLink(appID: string): Observable<string> {\n    return this.http.post<string>(this.originalHost + `/api/entity/instance`,\n      {RELATION_ID: 'app', APP_ID: appID}, httpOptions).pipe(\n      map(appEntity => {\n        if (Array.isArray(appEntity)) { appEntity = appEntity[0]; } // Could return an array, like message or multiple entities\n        if (appEntity['ENTITY_ID']) { // It returns entity instance, rather than an error message;\n          return appEntity['app'][0]['ROUTE_LINK'];\n        } else {\n          return 'appNotFound';\n        }\n      }),\n      catchError(this.handleError<any>('getAppRouteLink')));\n  }\n\n  /**\n   * Search Users by USER_ID and USER_NAME.\n   * Return a list with columns USER_ID, USER_NAME, DISPLAY_NAME, LOCK, and PWD_STATE\n   * Wildcard search is supported using '*' or '%'.\n   **/\n  searchUsers(userID: string, userName: string): Observable<UserList[] | Message[]> {\n    const queryObject = new QueryObject();\n    queryObject.ENTITY_ID = 'person';\n    queryObject.RELATION_ID = 'r_user';\n    queryObject.PROJECTION = ['USER_ID', 'USER_NAME', 'DISPLAY_NAME', 'LOCK', 'PWD_STATE'];\n    queryObject.FILTER = [];\n    if (userID) {\n      if (userID.includes('*') || userID.includes('%')) {\n        queryObject.FILTER.push({FIELD_NAME: 'USER_ID', OPERATOR: 'CN', LOW: userID});\n      } else {\n        queryObject.FILTER.push({FIELD_NAME: 'USER_ID', OPERATOR: 'EQ', LOW: userID});\n      }\n    }\n    if (userName) {\n      if (userName.includes('*')) {\n        userName = userName.replace(/\\*/gi, '%');\n        queryObject.FILTER.push({FIELD_NAME: 'USER_NAME', OPERATOR: 'CN', LOW: userName});\n      } else {\n        queryObject.FILTER.push({FIELD_NAME: 'USER_NAME', OPERATOR: 'EQ', LOW: userName});\n      }\n    }\n    queryObject.SORT = ['USER_ID'];\n    return this.http.post<any>(this.originalHost + `/api/query`, queryObject, httpOptions).pipe(\n      catchError(this.handleError<any>('searchObjects')));\n  }\n\n  /**\n   * Get detail information of a user from USER_ID\n   * Return information in Relations: r_user, r_employee, r_email, r_address, and r_personalization.\n   * The relationship to user role is also inquired with information in Relation: r_role\n   **/\n  getUserDetail(userID: string): Observable<Entity | Message[]> {\n    const pieceObject = {\n      ID: { RELATION_ID: 'r_user', USER_ID: userID},\n      piece: {RELATIONS: ['r_user', 'r_employee', 'r_email', 'r_address', 'r_personalization'],\n              RELATIONSHIPS: [\n                {\n                  RELATIONSHIP_ID: 'rs_user_role',\n                  PARTNER_ENTITY_PIECES: { RELATIONS: ['r_role'] }\n                }]\n      }\n    };\n    return this.http.post<Entity | Message[]>(\n      this.originalHost + `/api/entity/instance/piece`, pieceObject, httpOptions).pipe(\n      catchError(this.handleError<any>('getUserDetail')));\n  }\n\n  /**\n   * Get user by User ID, only return information in Relations: r_user\n   * This service call is mainly used to check whether the given USER_ID already exists\n   **/\n  getUserByUserID(userID: string): Observable<Entity | Message[]> {\n    const pieceObject = {\n      ID: { RELATION_ID: 'r_user', USER_ID: userID},\n      piece: {RELATIONS: ['r_user']}\n    };\n    return this.http.post<Entity | Message[]>(\n      this.originalHost + `/api/entity/instance/piece`, pieceObject, httpOptions).pipe(\n      catchError(this.handleError<any>('getUserByUserID')));\n  }\n\n  getUserByUserName(userName: string): Observable<Entity | Message[]> {\n    const pieceObject = {\n      ID: { RELATION_ID: 'r_user', USER_NAME: userName},\n      piece: {RELATIONS: ['r_user']}\n    };\n    return this.http.post<Entity | Message[]>(\n      this.originalHost + `/api/entity/instance/piece`, pieceObject, httpOptions).pipe(\n      catchError(this.handleError<any>('getUserByUserName')));\n  }\n\n  getRoleDesc(roleID: string): Observable<{}> {\n    const pieceObject = {\n      ID: { RELATION_ID: 'r_role', NAME: roleID},\n      piece: {RELATIONS: ['r_role']}\n    };\n    return this.http.post<{}>(\n      this.originalHost + `/api/entity/instance/piece`, pieceObject, httpOptions).pipe(\n       map(instance => {\n         return 'INSTANCE_GUID' in instance ?\n         {\n           INSTANCE_GUID: instance['INSTANCE_GUID'],\n           DESCRIPTION: instance['r_role'] ? instance['r_role'][0]['DESCRIPTION'] : ''\n         } : instance[0];\n       }),\n       catchError(this.handleError<any>('getRoleDesc')));\n  }\n\n  /**\n   * Save an entity to DB\n   * A generic entity in JSON is given. If the JSON has attribute INSTANCE_GUID, it calls PUT, otherwise, POST\n   **/\n  saveUser(user: Entity): Observable<Entity | Message[]> {\n    if (user['INSTANCE_GUID']) {\n      return this.http.put<Entity | Message[]>(\n        this.originalHost + `/api/entity`, user, httpOptions).pipe(\n        catchError(this.handleError<any>('saveUser')));\n    } else {\n      return this.http.post<Entity | Message[]>(\n        this.originalHost + `/api/entity`, user, httpOptions).pipe(\n        catchError(this.handleError<any>('saveUser')));\n    }\n  }\n\n  /**\n   * Delete an entity from DB\n   * A GUID of entity instance is given. After the call, the instance will be deleted permanently\n   **/\n  deleteUser(userGUID: string): Observable<null | Message[]> {\n    return this.http.delete<null | Message[]>(this.originalHost + `/api/entity/instance/` + userGUID, httpOptions).pipe(\n      catchError(this.handleError<any>('deleteUser'))\n    );\n  }\n\n  private handleError<T> (operation = 'operation', result?: T) {\n    return (error: any): Observable<T> => {\n      if (error.status === 401) {\n        this.messageService.addMessage('EXCEPTION', 'NOT_AUTHENTICATED_OR_SESSION_EXPIRED', messageType.Exception);\n      } else {\n        this.messageService.addMessage('EXCEPTION', 'GENERIC', messageType.Exception, operation, error.message);\n      }\n\n      this.router.navigate(['errors']);\n      console.error(operation, error); // log to console instead\n\n      // Let the app keep running by returning an empty result.\n      return of(result as T);\n    };\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule  } from '@angular/router';\nimport {MockupComponent} from \"./mockup.component\";\n\nconst routes: Routes = [\n  {\n    path: 'mockup/:UI', component: MockupComponent\n  }\n];\n\n@NgModule({\n  imports: [\n    RouterModule.forChild(routes)\n  ],\n  exports: [\n    RouterModule\n  ]\n})\nexport class MockupRoutingModule { }\n","import {Component, DoCheck, OnInit} from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\n\n@Component({\n  selector: 'app-mockup',\n  template: '<img [src]=\"mockupUI\" style=\"max-width: 100%\">',\n  styleUrls: ['./mockup.component.css']\n})\nexport class MockupComponent implements OnInit, DoCheck {\n\n  constructor(private route: ActivatedRoute) { }\n\n  mockupUI: String;\n\n  ngOnInit() { }\n\n  ngDoCheck() {\n    this.mockupUI = 'assets/' + this.route.snapshot.paramMap.get('UI') + '.png';\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport {MockupComponent} from \"./mockup.component\";\nimport {MockupRoutingModule} from \"./mockup-routing.module\";\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    MockupRoutingModule\n  ],\n  declarations: [\n    MockupComponent\n  ]\n})\nexport class MockupModule { }\n","export const msgStore = [\n  { msgCat: \"EXCEPTION\",\n    msgName: \"GENERIC\",\n    msgText: {\n      EN: {shortText: \"Exception Occurs in Operation: '%s'\",\n           longText: \"%s1\"}\n    }\n  },\n  { msgCat: \"EXCEPTION\",\n    msgName: \"NOT_AUTHENTICATED_OR_SESSION_EXPIRED\",\n    msgText: {\n      EN: {shortText: \"You are not authenticated or your session is expired!\",\n        longText: \"You are not authenticated or your session is expired, please <a href='/logon'>re-logon</a>.\"}\n    }\n  },\n  { msgCat: \"GENERAL\",\n    msgName: \"EMPTY_LIST\",\n    msgText: {\n      EN: {shortText: \"No result is found\",\n        longText: \"The system cannot find any items meet the search criteria.\"}\n    }\n  },\n  { msgCat: \"GENERAL\",\n    msgName: \"UNSAVED_CHANGES\",\n    msgText: {\n      EN: {\n        shortText: \"There are unsaved changes. Do you want to save the changes?\",\n        longText: \"\"\n      }\n    }\n  },\n  { msgCat: \"GENERAL\",\n    msgName: \"NO_CHANGE\",\n    msgText: {\n      EN: {\n        shortText: \"No change is made, saving is not necessary.\",\n        longText: \"The data is not changed, thus there is no need to save changes\"\n      }\n    }\n  },\n  { msgCat: \"USER\",\n    msgName: \"INVALID\",\n    msgText: {\n      EN: {shortText: \"Data is invalid, please check.\",\n        longText: \"The data still contains some errors, please make sure all mandatory fields are filled!\"}\n    }\n  },\n  { msgCat: \"USER\",\n    msgName: \"USER_NAME_EXISTS\",\n    msgText: {\n      EN: {shortText: \"User name: '%s' already exists!\",\n           longText: \"\"}\n    }\n  },\n  { msgCat: \"USER\",\n    msgName: \"USER_ID_EXISTS\",\n    msgText: {\n      EN: {shortText: \"User ID: '%s' already exists!\",\n        longText: \"\"}\n    }\n  },\n  { msgCat: \"USER\",\n    msgName: \"AT_LEAST_ONE_EMAIL\",\n    msgText: {\n      EN: {\n        shortText: \"At least one email needs to be maintained!\",\n        longText: \"\"\n      }\n    }\n  },\n  { msgCat: \"USER\",\n    msgName: \"USER_SAVED\",\n    msgText: {\n      EN: {\n        shortText: \"User '%s' is saved!\",\n        longText: \"\"\n      }\n    }\n  }\n];\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-not-found',\n  templateUrl: './not-found.component.html',\n  styleUrls: ['./not-found.component.css']\n})\nexport class NotFoundComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","<h2>Page not found!</h2>\n","export class Role {\n  name: string;\n  categories: Catalog[]; // Containing Catalogs\n}\nexport class Catalog {\n  name: string;\n  icon: string;  // Catalog Icon using Font Awesome, like: \"fas fa-search\"\n  routeLink?: string; // routeLink in Angular navigation and route system\n  top?: number; // hover submenu position to the page top\n  height?: number; // hover submenu height dynamically calculated based on the page height\n  originalHeight?: number; // the original hover submenu height based on the number of APPs contained\n  arrowTop?: number; // arrow position to the page top\n  active?: boolean; // Indicates current catalog is in active status, that is one of the APPs contained is in shown.\n  isSubMenuShow?: boolean; // Indicates the submenu is in shown (hovered)\n  apps?: App[]; // Containing APPs\n}\nexport class App {\n  name: string;\n  appID: string;\n  routeLink: string; // RouteLink in Angular navigation and route system\n  isExternal: boolean; // Whether it is an external app or internal app\n  originalRouteLink?: string; // original route link for external apps\n  active?: boolean; // Indicates current APP is in active status, that is the APP is in shown.\n}\nexport class UserBasicInfo {\n  userID: string;\n  userName?: string;\n  displayName?: string;\n  email?: string;\n}\n","import { Injectable } from '@angular/core';\nimport {Subject} from \"rxjs\";\nimport {App} from \"./role\";\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ShareService {\n  apps: App[] = [];\n  isCollapsed = false;\n  private isCollapsedSubject = new Subject<boolean>();\n  isCollapsed$ = this.isCollapsedSubject.asObservable();\n\n  updateIsCollapsed(status: boolean): void {\n    this.isCollapsed = status;\n    this.isCollapsedSubject.next(this.isCollapsed);\n  }\n\n}\n","<div #sideMenu class=\"dk-side-menu\" [class.dk-side-menu-collapsed]=\"isCollapsed\" (mouseleave)=\"mouseleaveMenu()\" >\n  <div class=\"dk-menu-list\">\n    <!-- side menu in expended mode -->\n    <ul *ngIf=\"!isCollapsed\" class=\"dk-menu-content\">\n      <li *ngFor=\"let category of role.categories; index as i;\"\n          [ngClass]=\"{'active':category.active,\n                      'collapsed':!category.isSubMenuShow,\n                      'dk-menu-search': category.routeLink === '/appSearch',\n                      'menuDisplay': category.routeLink === '/appSearch' || menuDisplay}\">\n        <span *ngIf=\"category.routeLink === '/appSearch'\" [ngClass]=\"category.icon\" aria-hidden=\"true\"></span>\n        <input *ngIf=\"category.routeLink === '/appSearch'\" #searchBox class=\"dk-search-box\" placeholder=\"Search\"\n               (keyup)=\"searchApp(searchBox.value)\" (keypress)=\"enterApp($event)\"/>\n        <ul *ngIf=\"category.routeLink === '/appSearch'\" class=\"dk-sub-menu\">\n          <li *ngFor=\"let app of apps$ | async\" >\n            <a routerLink=\"{{app.routeLink}}\">{{app.name}}</a>\n          </li>\n        </ul>\n\n        <a *ngIf=\"category.routeLink && category.routeLink !== '/appSearch'\" routerLink=\"{{category.routeLink}}\">\n          <span [ngClass]=\"category.icon\" aria-hidden=\"true\"></span> {{category.name}}\n        </a>\n        <a *ngIf=\"!category.routeLink\" (click)=\"clickRow(i)\">\n          <span [ngClass]=\"category.icon\" aria-hidden=\"true\"></span> {{category.name}}\n          <span *ngIf=\"category.apps && category.apps.length > 0\" class=\"fas arrow\"\n                [ngClass]=\"{'fa-angle-right': !category.isSubMenuShow, 'fa-angle-down': category.isSubMenuShow}\">\n          </span>\n        </a>\n        <ul *ngIf=\"!category.routeLink\" class=\"dk-sub-menu\"\n            [ngClass]=\"{'expended':category.isSubMenuShow, 'collapsed':!category.isSubMenuShow}\">\n          <li *ngFor=\"let app of category.apps\" [ngClass]=\"{'active':app.active}\">\n            <a routerLink=\"{{app.routeLink}}\">{{app.name}}</a>\n          </li>\n        </ul>\n      </li>\n    </ul>\n    <!-- side menu in collapsed mode -->\n    <ul *ngIf=\"isCollapsed\" class=\"dk-menu-content\">\n      <li *ngFor=\"let category of role.categories; index as i\" class=\"menuDisplay\" [ngClass]=\"{'active':category.active}\"\n          (mouseenter)=\"mouseenterRow(i)\" (mouseleave)=\"mouseleaveRow(i)\" (click)=\"clickRow(i)\">\n        <a *ngIf=\"category.routeLink === '/appSearch'\">\n          <span [ngClass]=\"category.icon\" aria-hidden=\"true\"></span>\n        </a>\n        <div *ngIf=\"category.routeLink === '/appSearch'\"\n             class=\"dk-side-menu dk-side-menu-hover dk-menu-search-hover\"\n             [ngClass]=\"{'dk-side-menu-hover-show':category.isSubMenuShow}\"\n             [style.top.rem]=\"category.top\">\n          <ul class=\"dk-menu-content-hover\">\n            <li><input #searchBox class=\"dk-search-box\" placeholder=\"Search\" class=\"dk-search-box\"\n                       (keyup)=\"searchApp(searchBox.value)\" (keypress)=\"enterApp($event)\"/></li>\n            <ul class=\"dk-sub-menu dk-sub-menu-collapsed\">\n              <li *ngFor=\"let app of apps$ | async\" >\n                <a routerLink=\"{{app.routeLink}}\" (click)=\"hideSubMenu()\">{{app.name}}</a>\n              </li>\n            </ul>\n          </ul>\n        </div>\n        <span *ngIf=\"category.routeLink === '/appSearch'\"\n              class=\"dk-popover-arrow\" [ngClass]=\"{'dk-popover-arrow-show':category.isSubMenuShow}\"\n              [style.top.rem]=\"category.arrowTop\"></span>\n\n        <a *ngIf=\"category.routeLink !== '/appSearch' && category.apps.length === 0\" routerLink=\"{{category.routeLink}}\">\n          <span [ngClass]=\"category.icon\" aria-hidden=\"true\"></span>\n        </a>\n        <a *ngIf=\"category.routeLink !== '/appSearch' && category.apps.length > 0\">\n          <span [ngClass]=\"category.icon\" aria-hidden=\"true\"></span>\n        </a>\n\n        <div *ngIf=\"category.routeLink !== '/appSearch' && category.apps.length > 0\"\n             class=\"dk-side-menu dk-side-menu-hover\"\n             [style.top.rem]=\"category.top\"\n             [style.height.rem]=\"category.height\"\n             [ngClass]=\"{'dk-side-menu-hover-show':category.isSubMenuShow}\">\n          <ul class=\"dk-menu-content-hover\">\n            <li><a>{{category.name}}</a></li>\n            <ul class=\"dk-sub-menu dk-sub-menu-collapsed\">\n              <li *ngFor=\"let app of category.apps\" [ngClass]=\"{'active':app.active}\">\n                <a routerLink=\"{{app.routeLink}}\" (click)=\"hideSubMenu()\">{{app.name}}</a>\n              </li>\n            </ul>\n          </ul>\n        </div>\n        <span *ngIf=\"category.routeLink !== '/appSearch' && category.apps.length > 0\"\n              class=\"dk-popover-arrow\" [ngClass]=\"{'dk-popover-arrow-show':category.isSubMenuShow}\"\n              [style.top.rem]=\"category.arrowTop\"></span>\n      </li>\n    </ul>\n  </div>\n\n  <div class=\"dk-separator\"></div>\n\n  <div class=\"dk-menu-bottom\">\n    <ul *ngIf=\"!isCollapsed\" class=\"dk-menu-content\">\n      <li >\n        <a href=\"#\">\n          <span class=\"fas fa-question-circle\" aria-hidden=\"true\"></span> Useful Links\n        </a>\n      </li>\n      <li>\n        <a href=\"#\">\n          <span class=\"fas fa-balance-scale\" aria-hidden=\"true\"></span> Legal Information\n        </a>\n      </li>\n    </ul>\n    <ul *ngIf=\"isCollapsed\" class=\"dk-menu-content\">\n      <li (mouseenter)=\"mouseenterRow(0)\" (mouseleave)=\"mouseleaveRow(0)\" (click)=\"clickRow(0)\" >\n        <a href=\"#\">\n          <span class=\"fas fa-question-circle\" aria-hidden=\"true\"></span>\n        </a>\n      </li>\n      <li (mouseenter)=\"mouseenterRow(0)\" (mouseleave)=\"mouseleaveRow(0)\" (click)=\"clickRow(0)\">\n        <a href=\"#\">\n          <span class=\"fas fa-balance-scale\" aria-hidden=\"true\"></span>\n        </a>\n      </li>\n    </ul>\n  </div>\n\n</div>\n\n","import {Component, ElementRef, HostListener, OnInit, ViewChild} from '@angular/core';\nimport { Role, App } from '../role';\nimport { debounceTime, distinctUntilChanged, switchMap} from 'rxjs/operators';\nimport {Router} from \"@angular/router\";\nimport {Subject} from \"rxjs/internal/Subject\";\nimport {Observable} from \"rxjs/internal/Observable\";\nimport * as fuzzySort from \"fuzzysort\";\nimport {of} from \"rxjs\";\nimport {IdentityService} from \"../identity.service\";\nimport {MessageService} from \"ui-message-angular\";\nimport {ShareService} from \"../share.service\";\n\n@Component({\n  selector: 'app-side-menu',\n  templateUrl: './side-menu.component.html',\n  styleUrls: ['./side-menu.component.css']\n})\nexport class SideMenuComponent implements OnInit {\n  private activeRow = null;\n  private mouseLocs = [];\n  private lastDelayLoc = null;\n  private timeoutId = null;\n  private rem = 0;\n  private searchTerms = new Subject<string>();\n  private menuDisplay = true;\n  private readonly TOLERANCE = 75;  // bigger = more forgive when entering submenu\n  private readonly DELAY = 600;  // ms delay when user appears to be entering submenu\n\n  isCollapsed = false;\n  role: Role = new Role;\n  apps$: Observable<App[]>;\n  searchedApps: App[];\n\n  @ViewChild('sideMenu', { static: true })\n  sideMenu: ElementRef;\n\n  constructor(private identityService: IdentityService,\n              private messageService: MessageService,\n              private shareService: ShareService,\n              private router: Router\n              ) {}\n\n  ngOnInit() {\n    this.rem = parseInt(window.getComputedStyle(document.head).getPropertyValue('font-size'), 10);\n    this.identityService.getRoleDetail().subscribe(roles => this._processRoleData(roles));\n    this.shareService.updateIsCollapsed(this.isCollapsed);\n    this.apps$ = this.searchTerms.pipe (\n      debounceTime(300),\n      distinctUntilChanged(),\n      switchMap((term: string) => {\n        const results = fuzzySort.go(term, this.shareService.apps, {key: 'name'});\n        const returnedApps = [];\n        results.forEach(result => returnedApps.push(result.obj));\n        return of(returnedApps as App[]);\n      })\n    );\n    this.apps$.subscribe(searchedApps => this.searchedApps = searchedApps );\n  }\n\n  _processRoleData(roles): void {\n    if (!roles) {return; }\n\n    this.role = roles[0]; // Currently, only support one role per user logon\n    if (this.role['msgCat']) {\n      this.messageService.clearMessages();\n      roles.forEach( msg => this.messageService.add(msg));\n      this.router.navigate(['errors']);\n    } else {\n      this.role.categories.forEach(category => {\n        category.height = category.originalHeight = (category.apps.length + 1) * 3 + 2;\n        category.active = false;\n        category.isSubMenuShow = false;\n        category.apps.forEach( app => {\n          if (app.isExternal) {\n            app.originalRouteLink = app.routeLink;\n            app.routeLink = '/external-app/' + app.appID;\n          }\n          app.active = false;\n          this.shareService.apps.push(app);\n        });\n        if (category.apps.length === 1) {\n          category.routeLink = category.apps[0].routeLink;\n          category.apps = [];\n        }\n      });\n    }\n  }\n\n  searchApp(term: string): void {\n    this.searchTerms.next(term);\n    this.menuDisplay = !term;\n  }\n\n  enterApp($event): void {\n    console.log($event);\n    if ($event.keyCode === 13 && this.searchedApps[0]) {\n      this.router.navigate([this.searchedApps[0].routeLink]);\n    }\n  }\n\n  collapse(): boolean {\n    for (const category of this.role.categories) {\n      category.isSubMenuShow = false;\n    }\n    this.menuDisplay = true;\n    this.isCollapsed = !this.isCollapsed;\n    this.shareService.updateIsCollapsed(this.isCollapsed);\n    return this.isCollapsed;\n  }\n\n  activateSubMenu(row): void {\n    const menuHeight = this.sideMenu.nativeElement.offsetHeight / this.rem;\n    const menuScrollTop = this.sideMenu.nativeElement.getElementsByClassName('dk-menu-list')[0].scrollTop / this.rem;\n    if (menuHeight + 1 - 4 * row + menuScrollTop <= this.role.categories[row].originalHeight) {\n      this.role.categories[row].top = null;\n      if ( menuHeight + 3 <= this.role.categories[row].originalHeight) {\n        this.role.categories[row].height = menuHeight + 3;\n      } else {\n        this.role.categories[row].height = this.role.categories[row].originalHeight;\n      }\n    } else {\n      this.role.categories[row].top = 5 + 4 * row - menuScrollTop;\n    }\n    this.role.categories[row].arrowTop = 6 + 4 * row - menuScrollTop;\n    this.role.categories[row].isSubMenuShow = true;\n  }\n\n  deactivateSubMenu(row): void {\n    this.role.categories[row].isSubMenuShow = false;\n  }\n\n  /**\n   * Keep track of the last few locations of the mouse.\n   */\n  @HostListener('document:mousemove', ['$event', 'mouseLocs'])\n  mousemoveDocument(e, mouseLocs): void {\n    mouseLocs.push({x: e.pageX, y: e.pageY});\n\n    if (mouseLocs.length > 3) { // '30' of the past mouse locations to track\n      mouseLocs.shift();\n    }\n  }\n\n  /**\n   * Cancel possible row activations when leaving the menu entirely\n   */\n  mouseleaveMenu(): void {\n    if (this.timeoutId) {\n      clearTimeout(this.timeoutId);\n    }\n\n    // If exitMenu is supplied and returns true, deactivate the\n    // currently active row on menu exit.\n    if (this.activeRow && !this.isMouseInMenuArea()) {\n      this.deactivateSubMenu(this.activeRow);\n    }\n\n    this.activeRow = null;\n  }\n\n  /**\n   * Check if the mouse is in the area of main menu and sub-menu.\n   */\n  isMouseInMenuArea(): boolean {\n    if (!this.activeRow) { return false; }\n\n    const menu = this.sideMenu.nativeElement;\n    const offset = {\n      left: menu.offsetLeft,\n      top: menu.offsetTop\n    };\n    const upperLeft = {\n      x: offset.left + menu.offsetWidth,\n      y: this.role.categories[this.activeRow].top * this.rem\n    };\n    const upperRight = {\n      x: upperLeft.x + this.rem,\n      y: upperLeft.y\n    };\n    const lowerLeft = {\n      x: offset.left + menu.offsetWidth,\n      y: upperLeft.y + this.role.categories[this.activeRow].height * this.rem\n    };\n    const lowerRight = {\n      x: lowerLeft.x + this.rem,\n      y: lowerLeft.y\n    };\n    const loc = this.mouseLocs[this.mouseLocs.length - 1];\n    return (loc && ((loc.x <= upperRight.x && loc.y <= lowerRight.y && loc.y >= upperRight.y)\n      || (loc.x <= upperLeft.x && loc.y >= offset.top && loc.y <= offset.top + menu.offsetHeight)));\n  }\n\n  /**\n   * Trigger a possible row activation whenever entering a new row.\n   */\n  mouseenterRow(row): void {\n    if (this.timeoutId) {\n      // Cancel any previous activation delays\n      clearTimeout(this.timeoutId);\n    }\n    this.possiblyActivate(row);\n  }\n\n  /**\n   * Trigger a row deactivation whenever leaving a row.\n   */\n  mouseleaveRow(row): void {\n    if (!this.isMouseInMenuArea()) {\n      this.deactivateSubMenu(row);\n    }\n  }\n\n  /**\n   * Set the current opened app to be active\n   * @param {App} app\n   */\n  activateApp(app: App) {\n    // Clear the existing active app\n    let appIdx = -1;\n    let catalogIdx = this.role.categories.findIndex(category => category.active === true );\n    if (catalogIdx > -1 ) {\n      this.role.categories[catalogIdx].active = false;\n      if (!this.role.categories[catalogIdx].routeLink) {\n        appIdx = this.role.categories[catalogIdx].apps.findIndex(app1 => app1.active === true );\n        if (appIdx > -1) {\n          this.role.categories[catalogIdx].apps[appIdx].active = false;\n        }\n      }\n    }\n    // Set the new active app\n    catalogIdx = this.role.categories.findIndex(category => {\n      if ( category.routeLink === app.routeLink ) {\n        return true;\n      } else {\n        appIdx = category.apps.findIndex( app1 => app1.routeLink === app.routeLink);\n        return appIdx > -1;\n      }});\n    if (catalogIdx > -1) {\n      this.role.categories[catalogIdx].active = true;\n      if (appIdx > -1) {\n        this.role.categories[catalogIdx].apps[appIdx].active = true;\n      }\n    }\n  }\n\n  /**\n   * Immediately activate a row if the user clicks on it.\n   */\n  clickRow(row): void {\n    if (this.isCollapsed) {\n      this.activate(row);\n    } else {\n      this.role.categories[row].isSubMenuShow = !this.role.categories[row].isSubMenuShow;\n    }\n  }\n\n  /**\n   * Hide the sub-menu\n   */\n  hideSubMenu(): void {\n    this.role.categories[this.activeRow].isSubMenuShow = false;\n  }\n\n  /**\n   * Activate a menu row.\n   */\n  activate(row): void {\n    if (row === this.activeRow) {\n      return;\n    }\n\n    if (this.activeRow) {\n      this.deactivateSubMenu(this.activeRow);\n    }\n\n    this.activateSubMenu(row);\n    this.activeRow = row;\n  }\n\n  /**\n   * Possibly activate a menu row. If mouse movement indicates that we\n   * shouldn't activate yet because user may be trying to enter\n   * a submenu's content, then delay and check again later.\n   */\n  possiblyActivate(row): void {\n    const delay = this.activationDelay();\n\n    if (delay) {\n      this.timeoutId = setTimeout(() => this.possiblyActivate(row), delay);\n    } else {\n      this.activate(row);\n    }\n  }\n\n  /**\n   * Return the amount of time that should be used as a delay before the\n   * currently hovered row is activated.\n   *\n   * Returns 0 if the activation should happen immediately. Otherwise,\n   * returns the number of milliseconds that should be delayed before\n   * checking again to see if the row should be activated.\n   */\n  activationDelay(): number {\n\n    if (!this.activeRow) {\n      // If there is no other submenu row already active, then\n      // go ahead and activate immediately.\n      return 0;\n    }\n\n    const menu = this.sideMenu.nativeElement;\n    const rem = parseInt(window.getComputedStyle(document.head).getPropertyValue('font-size'), 10);\n    const offset = {\n      left: menu.offsetLeft,\n      top: menu.offsetTop\n    };\n    const upperLeft = {\n      x: offset.left,\n      y: this.role.categories[this.activeRow].top * rem + this.TOLERANCE\n    };\n    const upperRight = {\n      x: offset.left + menu.offsetWidth + rem,\n      y: upperLeft.y\n    };\n    const lowerLeft = {\n      x: offset.left,\n      y: upperLeft.y + this.role.categories[this.activeRow].height * rem\n    };\n    const lowerRight = {\n      x: offset.left + menu.offsetWidth + rem,\n      y: lowerLeft.y\n    };\n    const loc = this.mouseLocs[this.mouseLocs.length - 1];\n\n    let prevLoc = this.mouseLocs[0];\n\n    if (!loc) {\n      return 0;\n    }\n\n    if (!prevLoc) {\n      prevLoc = loc;\n    }\n\n    if (prevLoc.x < offset.left || prevLoc.x > lowerRight.x ||\n      prevLoc.y < offset.top || prevLoc.y > lowerRight.y) {\n      // If the previous mouse location was outside of the entire\n      // menu's bounds, immediately activate.\n      return 0;\n    }\n\n    if (this.lastDelayLoc &&\n      loc.x === this.lastDelayLoc.x && loc.y === this.lastDelayLoc.y) {\n      // If the mouse hasn't moved since the last time we checked\n      // for activation status, immediately activate.\n      return 0;\n    }\n\n    // Detect if the user is moving towards the currently activated\n    // submenu.\n    function slope(a, b) {\n      return (b.y - a.y) / (b.x - a.x);\n    }\n\n    const decreasingCorner = upperRight,\n      increasingCorner = lowerRight;\n\n    const decreasingSlope = slope(loc, decreasingCorner),\n      increasingSlope = slope(loc, increasingCorner),\n      prevDecreasingSlope = slope(prevLoc, decreasingCorner),\n      prevIncreasingSlope = slope(prevLoc, increasingCorner);\n\n    if (decreasingSlope < prevDecreasingSlope &&\n      increasingSlope > prevIncreasingSlope) {\n      // Mouse is moving from previous location towards the\n      // currently activated submenu. Delay before activating a\n      // new menu row, because user may be moving into submenu.\n      this.lastDelayLoc = loc;\n      return this.DELAY;\n    }\n\n    this.lastDelayLoc = null;\n    return 0;\n  }\n}\n","import {IdentityService} from \"../../identity.service\";\nimport {AbstractControl, AsyncValidatorFn, ValidationErrors} from \"@angular/forms\";\nimport {Observable, timer} from \"rxjs\";\nimport {map, switchMap} from \"rxjs/operators\";\nimport {MessageService} from \"ui-message-angular\";\n\nexport function existingUserNameValidator(identityService: IdentityService,\n                                          messageService: MessageService,\n                                          userID: string): AsyncValidatorFn {\n  return (control: AbstractControl): Promise<ValidationErrors | null> | Observable<ValidationErrors | null> => {\n    return timer(500).pipe(\n      switchMap( () => identityService.getUserByUserName(control.value).pipe(\n        map(data => {\n          if (data['r_user'] && data['r_user'][0]['USER_ID'] !== userID) {\n            return {message: messageService.generateMessage('USER', 'USER_NAME_EXISTS',\n                'E', control.value).msgShortText};\n          } else {\n            return null;\n          }\n        })\n      )));\n  };\n}\n\nexport function existingUserIDValidator(identityService: IdentityService,\n                                          messageService: MessageService): AsyncValidatorFn {\n  return (control: AbstractControl): Promise<ValidationErrors | null> | Observable<ValidationErrors | null> => {\n    return timer(500).pipe(\n      switchMap( () => identityService.getUserByUserID(control.value).pipe(\n        map(data => {\n          if (data['r_user'] && data['r_user'][0]['USER_ID'] === control.value) {\n            return {message: messageService.generateMessage('USER', 'USER_ID_EXISTS',\n                'E', control.value).msgShortText};\n          } else {\n            return null;\n          }\n        })\n      )));\n  };\n}\n","<div class=\"card mt-4\">\n  <div class=\"card-body\">\n    <div *ngFor=\"let userAddressForm of userAddressFormArray.controls; let i = index\" class=\"card mb-4\">\n      <button type=\"button\" id=\"remove\" class=\"dk-close-button close d-flex justify-content-end mr-2\" aria-label=\"Close\"\n              (click)=\"deleteAddress(i)\">\n        <span aria-hidden=\"true\">&times;</span>\n      </button>\n      <div class=\"card-body row\" [formGroup]=\"userAddressForm\">\n        <dk-app-attribute-form2 class=\"col-3 dk-form-label\"\n                                [attributeControl]=\"getAttrCtrlFromID('TYPE')\"\n                                [formGroup]=\"userAddressForm\"\n                                [readonly]=\"readonly\">\n        </dk-app-attribute-form2>\n        <dk-app-attribute-form2 class=\"col-6 dk-form-label\"\n                                [attributeControl]=\"getAttrCtrlFromID('ADDRESS_VALUE')\"\n                                [formGroup]=\"userAddressForm\"\n                                [readonly]=\"readonly\">\n        </dk-app-attribute-form2>\n        <div class=\"col-1 row form-group mr-2\">\n          <label for=\"primaryAddress\" class=\"col-form-label dk-form-label\">Primary</label>\n          <input type=\"radio\" class=\"form-control\" id=\"primaryAddress\" [value]=\"1\" name=\"PRIMARY\" formControlName=\"PRIMARY\">\n        </div>\n        <dk-app-attribute-form2 class=\"col-md-3 dk-form-label\"\n                                [attributeControl]=\"getAttrCtrlFromID('POSTCODE')\"\n                                [formGroup]=\"userAddressForm\"\n                                [readonly]=\"readonly\">\n        </dk-app-attribute-form2>\n        <dk-app-attribute-form2 class=\"col-md-3 dk-form-label\"\n                                [attributeControl]=\"getAttrCtrlFromID('CITY')\"\n                                [formGroup]=\"userAddressForm\"\n                                [readonly]=\"readonly\">\n        </dk-app-attribute-form2>\n        <dk-app-attribute-form2 class=\"col-md-3 dk-form-label\"\n                                [attributeControl]=\"getAttrCtrlFromID('COUNTRY')\"\n                                [formGroup]=\"userAddressForm\"\n                                [readonly]=\"readonly\">\n        </dk-app-attribute-form2>\n      </div>\n    </div>\n    <button type=\"button\" id=\"add\" class=\"btn btn-primary float-right\" [disabled]=\"readonly\" (click)=\"addAddress()\">Add</button>\n  </div>\n</div>\n","import {Component, Input, OnInit} from '@angular/core';\nimport {FormArray, FormBuilder, FormGroup, Validators} from \"@angular/forms\";\nimport {AttributeBase, AttributeControlService, RelationMeta} from \"jor-angular\";\n\n@Component({\n  selector: 'app-user-address',\n  templateUrl: './user-address.component.html',\n  styleUrls: ['./user-address.component.css']\n})\nexport class UserAddressComponent implements OnInit {\n  @Input() readonly: boolean;\n  @Input() userForm: FormGroup;\n  @Input() relationMetas: RelationMeta[];\n  private attrCtrls: AttributeBase[];\n  userAddressFormArray: FormArray;\n\n  constructor(private fb: FormBuilder,\n              private attributeControlService: AttributeControlService) { }\n\n  ngOnInit() {\n    this.userAddressFormArray = this.userForm.get('addresses') as FormArray;\n    this.attrCtrls = this.attributeControlService.toAttributeControl(\n      this.relationMetas.find( relationMeta => relationMeta.RELATION_ID === 'r_address').ATTRIBUTES);\n  }\n\n  getAttrCtrlFromID(fieldName: string): AttributeBase {\n    return this.attrCtrls.find( attrCtrl => attrCtrl.name === fieldName);\n  }\n\n  addAddress() {\n    const addressFormGroup = this.fb.group({\n      ADDRESS_ID: [''],\n      TYPE: ['', [Validators.required]],\n      ADDRESS_VALUE: ['', [Validators.required]],\n      POSTCODE: [''],\n      CITY: [''],\n      COUNTRY: [''],\n      PRIMARY: []\n    });\n    if (this.userAddressFormArray.length === 0) {\n      addressFormGroup.get('PRIMARY').setValue(1);\n      addressFormGroup.get('PRIMARY').markAsDirty();\n    }\n    this.userAddressFormArray.push(addressFormGroup);\n  }\n\n  deleteAddress(index: number) {\n    if (this.userAddressFormArray.length > 1 &&\n        this.userAddressFormArray.at(index).value['PRIMARY']) {\n      const newPrimaryIndex = index === 0 ? 1 : 0;\n      this.userAddressFormArray.at(newPrimaryIndex).get('PRIMARY').setValue(1);\n      this.userAddressFormArray.at(newPrimaryIndex).get('PRIMARY').markAsDirty();\n    }\n    this.userAddressFormArray.removeAt(index);\n    this.userAddressFormArray.markAsDirty();\n  }\n}\n","import {Component, Input, OnInit } from '@angular/core';\nimport {FormGroup} from \"@angular/forms\";\nimport {AttributeBase, AttributeControlService, RelationMeta} from \"jor-angular\";\n\n@Component({\n  selector: 'app-user-basic',\n  templateUrl: './user-basic.component.html',\n  styleUrls: ['./user-basic.component.css']\n})\nexport class UserBasicComponent implements OnInit {\n  @Input() readonly: boolean;\n  @Input() userForm: FormGroup;\n  @Input() relationMetas: RelationMeta[];\n  private attrCtrls: AttributeBase[];\n  userBasicNamesForm: FormGroup;\n  userBasicEmployeeForm: FormGroup;\n\n  constructor(private attributeControlService: AttributeControlService) { }\n\n  ngOnInit() {\n    this.userBasicNamesForm = this.userForm.get('userBasic.names') as FormGroup;\n    this.userBasicEmployeeForm = this.userForm.get('userBasic.employee') as FormGroup;\n    this.attrCtrls = this.attributeControlService.toAttributeControl(\n      this.relationMetas.find( relationMeta => relationMeta.RELATION_ID === 'r_employee').ATTRIBUTES);\n    this.attrCtrls = this.attrCtrls.concat(this.attributeControlService.toAttributeControl(\n      this.relationMetas.find( relationMeta => relationMeta.RELATION_ID === 'r_user').ATTRIBUTES));\n  }\n\n  getAttrCtrlFromID(fieldName: string): AttributeBase {\n    return this.attrCtrls.find( attrCtrl => attrCtrl.name === fieldName);\n  }\n}\n","<div class=\"card mt-4\">\n  <div class=\"card-header\">Name</div>\n  <div class=\"card-body\">\n    <form class=\"mt-2 row\">\n      <dk-app-attribute-form2 class=\"col-md-6 col-lg-4 dk-form-label\"\n                              [attributeControl]=\"getAttrCtrlFromID('USER_NAME')\"\n                              [formGroup]=\"userBasicNamesForm\"\n                              [readonly]=\"readonly\">\n      </dk-app-attribute-form2>\n      <dk-app-attribute-form2 class=\"col-md-6 col-lg-4 dk-form-label\"\n                              [attributeControl]=\"getAttrCtrlFromID('DISPLAY_NAME')\"\n                              [formGroup]=\"userBasicNamesForm\"\n                              [readonly]=\"readonly\">\n      </dk-app-attribute-form2>\n      <div class=\"col-md-4\"></div>\n      <dk-app-attribute-form2 class=\"col-md-6 col-lg-4 dk-form-label\"\n                              [attributeControl]=\"getAttrCtrlFromID('GIVEN_NAME')\"\n                              [formGroup]=\"userBasicNamesForm\"\n                              [readonly]=\"readonly\">\n      </dk-app-attribute-form2>\n      <dk-app-attribute-form2 class=\"col-md-6 col-lg-4 dk-form-label\"\n                              [attributeControl]=\"getAttrCtrlFromID('MIDDLE_NAME')\"\n                              [formGroup]=\"userBasicNamesForm\"\n                              [readonly]=\"readonly\">\n      </dk-app-attribute-form2>\n      <dk-app-attribute-form2 class=\"col-md-6 col-lg-4 dk-form-label\"\n                              [attributeControl]=\"getAttrCtrlFromID('FAMILY_NAME')\"\n                              [formGroup]=\"userBasicNamesForm\"\n                              [readonly]=\"readonly\">\n      </dk-app-attribute-form2>\n    </form>\n  </div>\n</div>\n\n<div class=\"card mt-4\">\n  <div class=\"card-header\">Employee</div>\n  <div class=\"card-body\">\n    <form class=\"mt-2 row\">\n      <dk-app-attribute-form2 class=\"col-md-6 col-lg-4 dk-form-label\"\n                              [attributeControl]=\"getAttrCtrlFromID('COMPANY_ID')\"\n                              [formGroup]=\"userBasicEmployeeForm\"\n                              [readonly]=\"readonly\">\n      </dk-app-attribute-form2>\n      <dk-app-attribute-form2 class=\"col-md-6 col-lg-4 dk-form-label\"\n                              [attributeControl]=\"getAttrCtrlFromID('DEPARTMENT_ID')\"\n                              [formGroup]=\"userBasicEmployeeForm\"\n                              [readonly]=\"readonly\">\n      </dk-app-attribute-form2>\n      <dk-app-attribute-form2 class=\"col-md-6 col-lg-4 dk-form-label\"\n                              [attributeControl]=\"getAttrCtrlFromID('TITLE')\"\n                              [formGroup]=\"userBasicEmployeeForm\"\n                              [readonly]=\"readonly\">\n      </dk-app-attribute-form2>\n      <dk-app-attribute-form2 class=\"col-md-6 col-lg-4 dk-form-label\"\n                              [attributeControl]=\"getAttrCtrlFromID('GENDER')\"\n                              [formGroup]=\"userBasicEmployeeForm\"\n                              [readonly]=\"readonly\">\n      </dk-app-attribute-form2>\n    </form>\n  </div>\n</div>\n","<nav class=\"navbar dk-fixed-top navbar-light bg-light\">\n  <div>\n    <span class=\"font-weight-bold mb-0 mx-1\">{{isNewMode? 'New User' : readonly? 'Display User' : 'Change User'}}</span>\n  </div>\n\n  <div class=\"flex-row-reverse\">\n    <button class=\"btn btn-lg btn-outline-primary mr-2\" type=\"button\" title=\"Edit/Display\" id=\"editDisplay\" (click)=\"switchEditDisplay()\">\n      <span *ngIf=\"readonly\" class=\"fas fa-edit\"> Edit</span>\n      <span *ngIf=\"!readonly\" class=\"fas fa-glasses\"> Display</span>\n    </button>\n    <button class=\"btn btn-lg btn-outline-primary mr-2\" type=\"button\" title=\"Save\" id=\"save\" (click)=\"save()\" [disabled]=\"readonly\">\n      <span class=\"fas fa-save\"> Save</span>\n    </button>\n  </div>\n</nav>\n\n<div class=\"mt-2 mb-2\">\n  <dk-message></dk-message>\n</div>\n\n<div *ngIf=\"userForm\" class=\"ml-2\">\n  <div class=\"mt-2 ml-1 row\">\n    <dk-app-attribute-form2 class=\"col-md-6 col-lg-4 dk-form-label\"\n                            [attributeControl]=\"getAttrCtrlFromID('USER_ID')\"\n                            [formGroup]=\"userForm\"\n                            [readonly]=\"!isNewMode\">\n    </dk-app-attribute-form2>\n    <div class=\"col-md-6 col-lg-4 row form-group mr-2\" [formGroup]=\"userForm\">\n      <label for=\"lockStatus\" class=\"col-form-label dk-form-label\">Lock Status:</label>\n      <div id=\"lockStatus\" class=\"form-control dk-icon\">\n        <span *ngIf=\"userForm.get('LOCK').value\" class=\"fas fa-lock\" > Locked</span>\n        <span *ngIf=\"!userForm.get('LOCK').value\" class=\"fas fa-lock-open\"> Unlocked</span>\n      </div>\n    </div>\n    <div class=\"col-md-6 col-lg-4 row form-group mr-2\" [formGroup]=\"userForm\">\n      <label for=\"passwordStatus\" class=\"col-form-label dk-form-label\">Password Status:</label>\n      <div id=\"passwordStatus\" class=\"form-control dk-icon\" [ngSwitch]=\"userForm.get('PWD_STATUS').value\">\n        <div *ngSwitchCase=\"\">\n          <span class=\"badge badge-primary\">Initial</span>\n        </div>\n        <div *ngSwitchCase=\"1\">\n          <span class=\"badge badge-success\">Active</span>\n        </div>\n        <div *ngSwitchCase=\"2\">\n          <span class=\"badge badge-warning\">Renew</span>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <ul class=\"nav nav-tabs mt-1\">\n    <li class=\"nav-item\">\n      <a class=\"nav-link\" [class.active]=\"tabStrip===1\" href=\"javascript:void(0);\" (click)=\"switchTabStrip(1)\">Basic</a>\n    </li>\n    <li class=\"nav-item\">\n      <a class=\"nav-link\" [class.active]=\"tabStrip===2\" href=\"javascript:void(0);\" (click)=\"switchTabStrip(2)\">Email</a>\n    </li>\n    <li class=\"nav-item\">\n      <a class=\"nav-link\" [class.active]=\"tabStrip===3\" href=\"javascript:void(0);\" (click)=\"switchTabStrip(3)\">Address</a>\n    </li>\n    <li class=\"nav-item\">\n      <a class=\"nav-link\" [class.active]=\"tabStrip===4\" href=\"javascript:void(0);\" (click)=\"switchTabStrip(4)\">Personalization</a>\n    </li>\n    <li class=\"nav-item\">\n      <a class=\"nav-link\" [class.active]=\"tabStrip===5\" href=\"javascript:void(0);\" (click)=\"switchTabStrip(5)\">Role</a>\n    </li>\n  </ul>\n\n  <div class=\"mt-2\" [ngSwitch]=\"tabStrip\">\n    <app-user-basic *ngSwitchCase=\"1\" [userForm]=\"userForm\" [relationMetas]=\"relationMetas\" [readonly]=\"readonly\"></app-user-basic>\n    <app-user-email *ngSwitchCase=\"2\" [userForm]=\"userForm\" [relationMetas]=\"relationMetas\" [readonly]=\"readonly\"></app-user-email>\n    <app-user-address *ngSwitchCase=\"3\" [userForm]=\"userForm\" [relationMetas]=\"relationMetas\"  [readonly]=\"readonly\"></app-user-address>\n    <app-user-personalization *ngSwitchCase=\"4\" [userForm]=\"userForm\" [relationMetas]=\"relationMetas\" [readonly]=\"readonly\"></app-user-personalization>\n    <app-user-role *ngSwitchCase=\"5\" [userForm]=\"userForm\" [readonly]=\"readonly\"></app-user-role>\n  </div>\n</div>\n","import {Component, OnInit} from '@angular/core';\nimport {FormArray, FormBuilder, FormControl, FormGroup, Validators} from \"@angular/forms\";\nimport {ActivatedRoute, ParamMap, Router} from \"@angular/router\";\nimport {Message, MessageService} from \"ui-message-angular\";\nimport {switchMap} from \"rxjs/operators\";\nimport {IdentityService} from \"../../identity.service\";\nimport {forkJoin, Observable, of} from \"rxjs\";\nimport {\n  AttributeBase,\n  AttributeControlService,\n  Entity,\n  EntityService,\n  RelationMeta,\n  UiMapperService\n} from \"jor-angular\";\nimport {existingUserIDValidator, existingUserNameValidator} from \"./async-validators\";\nimport {DialogService} from \"../../dialog.service\";\n\n@Component({\n  selector: 'app-user-detail',\n  templateUrl: './user-detail.component.html',\n  styleUrls: ['./user-detail.component.css']\n})\nexport class UserDetailComponent implements OnInit {\n  userForm: FormGroup;\n  relationMetas: RelationMeta[];\n  attrCtrls: AttributeBase[];\n  readonly = true;\n  isNewMode = false;\n  action: string;\n  instanceGUID: string;\n  originalUserValue = {};\n  changedUser = {};\n  tabStrip = 1;\n\n  get pwdStatus(): string {\n    switch (this.userForm.get('PWD_STATUS').value) {\n      case '':\n        return 'Initial';\n      case 1:\n        return 'Active';\n      case 3:\n        return 'Need Change';\n      default:\n        return 'Initial';\n    }\n  }\n\n  constructor(private fb: FormBuilder,\n              private route: ActivatedRoute,\n              private router: Router,\n              private dialogService: DialogService,\n              private identityService: IdentityService,\n              private attributeControlService: AttributeControlService,\n              private entityService: EntityService,\n              private uiMapperService: UiMapperService,\n              private messageService: MessageService) {\n  }\n\n  ngOnInit() {\n    this.route.paramMap.pipe(\n      switchMap((params: ParamMap) => {\n        this.action = params.get('action');\n        if (this.action === 'new') {\n          this.isNewMode = true;\n          return forkJoin(\n            [this.entityService.getRelationMetaOfEntity('person'), this._createNewUser()]);\n        } else {\n          this.isNewMode = false;\n          return forkJoin(\n            [this.entityService.getRelationMetaOfEntity('person'),\n            this.identityService.getUserDetail(params.get('userID'))]);\n        }\n      })\n    ).subscribe( data => {\n      this.relationMetas = data[0] as RelationMeta[];\n      this.attrCtrls = this.attributeControlService.toAttributeControl(\n        this.relationMetas.find( relationMeta => relationMeta.RELATION_ID === 'r_user').ATTRIBUTES);\n      if ('ENTITY_ID' in data[1]) {\n        this.instanceGUID = data[1]['INSTANCE_GUID'];\n        this._generateUserForm(<Entity>data[1]);\n        if (this.isNewMode || this.action === 'change') {\n          this._switch2EditMode();\n        } else {\n          this._switch2DisplayMode();\n        }\n      } else {\n        const errorMessages = <Message[]>data[1];\n        errorMessages.forEach( msg => this.messageService.add(msg));\n      }\n    });\n  }\n\n  getAttrCtrlFromID(fieldName: string): AttributeBase {\n    return this.attrCtrls.find( attrCtrl => attrCtrl.name === fieldName);\n  }\n\n  switchTabStrip(tabStripID: number): void {\n    this.tabStrip = tabStripID;\n  }\n\n  switchEditDisplay(): void {\n    if (this.readonly ) {\n      this._switch2EditMode();\n    } else {\n      if (this.userForm.dirty) {\n        this.dialogService.confirm('Discard changes?').subscribe(confirm => {\n          if (confirm) {\n            this.userForm.reset(this.originalUserValue);\n            this._switch2DisplayMode();\n          }\n        });\n      } else {\n        this._switch2DisplayMode();\n      }\n    }\n    this.messageService.clearMessages();\n  }\n\n  _switch2DisplayMode(): void {\n    this.readonly = true;\n    this._setCheckBoxState();\n\n    const userIDCtrl = this.userForm.get('USER_ID') as FormControl;\n    userIDCtrl.clearAsyncValidators();\n    const userNameCtrl = this.userForm.get('userBasic.names.USER_NAME') as FormControl;\n    userNameCtrl.clearAsyncValidators();\n\n    const emailArray = this.userForm.get('emails') as FormArray;\n    let lastIndex = emailArray.length - 1;\n    while (lastIndex >= 0) {\n      const emailFormGroup = emailArray.at(lastIndex);\n      if (emailFormGroup.invalid || !emailFormGroup.value.EMAIL) {\n        emailArray.removeAt(lastIndex);\n      }\n      lastIndex--;\n    }\n\n    const addressArray = this.userForm.get('addresses') as FormArray;\n    lastIndex = addressArray.length - 1;\n    while (lastIndex >= 0) {\n      const addressFormGroup = addressArray.at(lastIndex);\n      if (addressFormGroup.invalid || !addressFormGroup.value.ADDRESS_VALUE) {\n        addressArray.removeAt(lastIndex);\n      }\n      lastIndex--;\n    }\n\n    const roleArray = this.userForm.get('userRole') as FormArray;\n    lastIndex = roleArray.length - 1;\n    while (lastIndex >= 0) {\n      const roleFormGroup = roleArray.at(lastIndex);\n      if (roleFormGroup.invalid || !roleFormGroup.value.NAME) {\n        roleArray.removeAt(lastIndex);\n      }\n      lastIndex--;\n    }\n\n    this.userForm.markAsPristine();\n    // Replace the URL from change to display\n    window.history.replaceState({}, '', `/users/${userIDCtrl.value};action=display`);\n  }\n\n  _switch2EditMode(): void {\n    this.readonly = false;\n    this._setCheckBoxState();\n\n    const userIDCtrl = this.userForm.get('USER_ID') as FormControl;\n    if (this.isNewMode) {\n      userIDCtrl.setAsyncValidators(\n        existingUserIDValidator(this.identityService, this.messageService));\n    }\n\n    const userNameCtrl = this.userForm.get('userBasic.names.USER_NAME') as FormControl;\n    userNameCtrl.setAsyncValidators(\n      existingUserNameValidator(this.identityService, this.messageService, this.userForm.get('USER_ID').value));\n\n    const roleArray = this.userForm.get('userRole') as FormArray;\n    roleArray.push( this.fb.group({\n      NAME: [''],\n      DESCRIPTION: [''],\n      system_role_INSTANCE_GUID: [''],\n      RELATIONSHIP_INSTANCE_GUID: [''],\n    }));\n\n    // Replace the URL from to display\n    if (this.action === 'display') {this.action = 'change'; }\n    window.history.replaceState({}, '', `/users/${userIDCtrl.value};action=` + this.action);\n  }\n\n  _createNewUser(): Observable<Entity> {\n    const userDetail = new Entity();\n    userDetail['ENTITY_ID'] = 'person';\n    userDetail['r_user'] = [\n      { USER_ID: '', LOCK: 0, PWD_STATUS: '', USER_NAME: '', DISPLAY_NAME: '',\n        GIVEN_NAME: '', MIDDLE_NAME: '', FAMILY_NAME: ''}\n    ];\n    userDetail['r_employee'] = [\n      {TITLE: '', DEPARTMENT_ID: '', COMPANY_ID: '', GENDER: ''}\n    ];\n    userDetail['r_email'] = [];\n    userDetail['r_personalization'] = [\n      {USER_ID: '', LANGUAGE: '', TIMEZONE: '', DECIMAL_FORMAT: '', DATE_FORMAT: ''}\n    ];\n    userDetail['relationships'] = [];\n    return of(userDetail);\n  }\n\n  _generateUserForm(data: Entity): void {\n    this.userForm = this.fb.group({\n      USER_ID: [data['r_user'][0]['USER_ID'], [Validators.required]],\n      LOCK: [data['r_user'][0]['LOCK']],\n      PWD_STATUS: [data['r_user'][0]['PWD_STATUS']],\n      userBasic: this.fb.group({\n        names: this.fb.group({\n          USER_NAME: [data['r_user'][0]['USER_NAME'], [Validators.required]],\n          DISPLAY_NAME: [data['r_user'][0]['DISPLAY_NAME'], [Validators.required]],\n          GIVEN_NAME: [data['r_user'][0]['GIVEN_NAME']],\n          MIDDLE_NAME: [data['r_user'][0]['MIDDLE_NAME']],\n          FAMILY_NAME: [data['r_user'][0]['FAMILY_NAME']]\n        }),\n        employee: this.fb.group({\n          TITLE: [data['r_employee'][0]['TITLE']],\n          DEPARTMENT_ID: [data['r_employee'][0]['DEPARTMENT_ID']],\n          COMPANY_ID: [data['r_employee'][0]['COMPANY_ID'], [Validators.required]],\n          GENDER: [data['r_employee'][0]['GENDER']]\n        })\n      }),\n      emails:  this.fb.array([]),\n      addresses: this.fb.array([]),\n      userPersonalization: this.fb.group({\n        USER_ID: [data['r_personalization'] ? data['r_personalization'][0]['USER_ID'] : ''],\n        LANGUAGE: [data['r_personalization'] ? data['r_personalization'][0]['LANGUAGE'] : ''],\n        TIMEZONE: [data['r_personalization'] ? data['r_personalization'][0]['TIMEZONE'] : ''],\n        DECIMAL_FORMAT: [data['r_personalization'] ? data['r_personalization'][0]['DECIMAL_FORMAT'] : ''],\n        DATE_FORMAT: [data['r_personalization'] ? data['r_personalization'][0]['DATE_FORMAT'] : '']\n      }),\n      userRole: this.fb.array([])\n    });\n\n    const emailArray = this.userForm.get('emails') as FormArray;\n    data['r_email'].forEach( email => {\n      emailArray.push(\n        this.fb.group({\n          EMAIL: [email['EMAIL'], [Validators.required]],\n          TYPE: [email['TYPE'], [Validators.required]],\n          PRIMARY: [email['PRIMARY']]\n        })\n      );\n    });\n\n    const addressArray = this.userForm.get('addresses') as FormArray;\n    if (data['r_address']) {\n      data['r_address'].forEach( address => {\n        addressArray.push(\n          this.fb.group({\n            ADDRESS_ID: [address['ADDRESS_ID']],\n            TYPE: [address['TYPE'], [Validators.required]],\n            ADDRESS_VALUE: [address['ADDRESS_VALUE'], [Validators.required]],\n            POSTCODE: [address['POSTCODE']],\n            CITY: [address['CITY']],\n            COUNTRY: [address['COUNTRY']],\n            PRIMARY: [address['PRIMARY']]\n          })\n        );\n      });\n    }\n\n    const roleArray = this.userForm.get('userRole') as FormArray;\n    const userRoleRelationship = data['relationships'][0];\n    if (userRoleRelationship) {\n      userRoleRelationship.values.forEach( value => {\n        const roleInstance = value.PARTNER_INSTANCES[0];\n        roleArray.push(\n          this.fb.group({\n            NAME: [roleInstance['r_role'][0]['NAME']],\n            DESCRIPTION: [roleInstance['r_role'][0]['DESCRIPTION']],\n            system_role_INSTANCE_GUID: [roleInstance['INSTANCE_GUID']],\n            RELATIONSHIP_INSTANCE_GUID: [value['RELATIONSHIP_INSTANCE_GUID']]\n          })\n        );\n      });\n    }\n\n    this.originalUserValue = this.userForm.getRawValue();\n  }\n\n  _resetUserValue(data: Entity): void {\n    this.originalUserValue = {\n      USER_ID: data['r_user'][0]['USER_ID'],\n      LOCK: data['r_user'][0]['LOCK'],\n      PWD_STATUS: data['r_user'][0]['PWD_STATUS'],\n      userBasic: {\n        names: {\n          USER_NAME: data['r_user'][0]['USER_NAME'],\n          DISPLAY_NAME: data['r_user'][0]['DISPLAY_NAME'],\n          GIVEN_NAME: data['r_user'][0]['GIVEN_NAME'],\n          MIDDLE_NAME: data['r_user'][0]['MIDDLE_NAME'],\n          FAMILY_NAME: data['r_user'][0]['FAMILY_NAME']\n        },\n        employee: {\n          TITLE: data['r_employee'][0]['TITLE'],\n          DEPARTMENT_ID: data['r_employee'][0]['DEPARTMENT_ID'],\n          COMPANY_ID: data['r_employee'][0]['COMPANY_ID'],\n          GENDER: data['r_employee'][0]['GENDER']\n        }\n      },\n      emails: [],\n      addresses: [],\n      userPersonalization: {\n        USER_ID: data['r_personalization'] ? data['r_personalization'][0]['USER_ID'] : '',\n        LANGUAGE: data['r_personalization'] ? data['r_personalization'][0]['LANGUAGE'] : '',\n        TIMEZONE: data['r_personalization'] ? data['r_personalization'][0]['TIMEZONE'] : '',\n        DECIMAL_FORMAT: data['r_personalization'] ? data['r_personalization'][0]['DECIMAL_FORMAT'] : '',\n        DATE_FORMAT: data['r_personalization'] ? data['r_personalization'][0]['DATE_FORMAT'] : ''\n      },\n      userRole: []\n    };\n\n    data['r_email'].forEach( email => {\n      this.originalUserValue['emails'].push(\n        {\n          EMAIL: email['EMAIL'],\n          TYPE: email['TYPE'],\n          PRIMARY: email['PRIMARY']\n        }\n      );\n    });\n\n    if (data['r_address']) {\n      data['r_address'].forEach( address => {\n        this.originalUserValue['addresses'].push(\n          {\n            ADDRESS_ID: address['ADDRESS_ID'],\n            TYPE: address['TYPE'],\n            ADDRESS_VALUE: address['ADDRESS_VALUE'],\n            POSTCODE: address['POSTCODE'],\n            CITY: address['CITY'],\n            COUNTRY: address['COUNTRY'],\n            PRIMARY: address['PRIMARY']\n          }\n        );\n      });\n    }\n\n    const userRoleRelationship = data['relationships'][0];\n    if (userRoleRelationship) {\n      userRoleRelationship.values.forEach( value => {\n        const roleInstance = value.PARTNER_INSTANCES[0];\n        this.originalUserValue['userRole'].push(\n          {\n            NAME: [roleInstance['r_role'][0]['NAME']],\n            DESCRIPTION: [roleInstance['r_role'][0]['DESCRIPTION']],\n            system_role_INSTANCE_GUID: [roleInstance['INSTANCE_GUID']],\n            RELATIONSHIP_INSTANCE_GUID: [value['RELATIONSHIP_INSTANCE_GUID']]\n          }\n        );\n      });\n    }\n\n    this.userForm.reset(this.originalUserValue);\n  }\n\n  _setCheckBoxState() {\n    const userEmailFormArray = this.userForm.get('emails') as FormArray;\n    const userAddressFormArray = this.userForm.get('addresses') as FormArray;\n    const userEmployeeForm = this.userForm.get('userBasic').get('employee') as FormGroup;\n    const userPersonalizationForm = this.userForm.get('userPersonalization') as FormGroup;\n    if (this.readonly) {\n      userEmailFormArray.controls.forEach( userEmailForm => {\n        userEmailForm.get('PRIMARY').disable();\n        userEmailForm.get('TYPE').disable();\n      });\n      userAddressFormArray.controls.forEach( userAddressForm => {\n        userAddressForm.get('PRIMARY').disable();\n        userAddressForm.get('TYPE').disable();\n      });\n      userEmployeeForm.get('GENDER').disable();\n      userPersonalizationForm.get('LANGUAGE').disable();\n      userPersonalizationForm.get('TIMEZONE').disable();\n      userPersonalizationForm.get('DECIMAL_FORMAT').disable();\n      userPersonalizationForm.get('DATE_FORMAT').disable();\n    } else {\n      userEmailFormArray.controls.forEach( userEmailForm => {\n        userEmailForm.get('PRIMARY').enable();\n        userEmailForm.get('TYPE').enable();\n      });\n      userAddressFormArray.controls.forEach( userAddressForm => {\n        userAddressForm.get('PRIMARY').enable();\n        userAddressForm.get('TYPE').enable();\n      });\n      userEmployeeForm.get('GENDER').enable();\n      userPersonalizationForm.get('LANGUAGE').enable();\n      userPersonalizationForm.get('TIMEZONE').enable();\n      userPersonalizationForm.get('DECIMAL_FORMAT').enable();\n      userPersonalizationForm.get('DATE_FORMAT').enable();\n    }\n  }\n\n  save() {\n    this.messageService.clearMessages();\n    if (this._composeChangesToUser()) {\n      this.identityService.saveUser(<Entity>this.changedUser).subscribe( data => {\n        this.changedUser = {};\n        if ('INSTANCE_GUID' in data) {\n          const userID = data['r_user'][0]['USER_ID'];\n          this.instanceGUID = data['INSTANCE_GUID'];\n          this.isNewMode = false;\n          this.identityService.getUserDetail(userID).subscribe(userData => {\n            if ('ENTITY_ID' in userData) {\n              this._switch2DisplayMode();\n              this._resetUserValue(<Entity>userData);\n            } else {\n              const errorMessages = <Message[]>userData;\n              errorMessages.forEach( msg => this.messageService.add(msg));\n            }\n          });\n          this.messageService.reportMessage('USER', 'USER_SAVED', 'S', userID);\n        } else {\n          const errorMessages = <Message[]>data;\n          errorMessages.forEach( msg => this.messageService.add(msg));\n        }\n      });\n    }\n  }\n\n  _composeChangesToUser() {\n    if (this.userForm.invalid) {\n      this.messageService.reportMessage('USER', 'INVALID', 'E');\n      return false;\n    }\n\n    if (this.userForm.dirty === false) {\n      this.messageService.reportMessage('GENERAL', 'NO_CHANGE', 'W');\n      return false;\n    }\n\n    this.changedUser['ENTITY_ID'] = 'person';\n    this.changedUser['INSTANCE_GUID'] = this.instanceGUID;\n    if (this.isNewMode) {\n      this.changedUser['person'] = {action: 'add', TYPE: 'employee', SYSTEM_ACCESS: 'PORTAL'};\n    }\n\n    const userBasicFormGroup = this.userForm.get('userBasic');\n    const userID = this.userForm.get('USER_ID').value;\n    if (userBasicFormGroup.dirty) {\n      const userBasicNamesFormGroup = userBasicFormGroup.get('names') as FormGroup;\n      this.changedUser['r_user'] = this.uiMapperService.composeChangedRelation(\n        userBasicNamesFormGroup, {USER_ID: userID}, this.isNewMode);\n\n      const userBasicEmployeeFormGroup = userBasicFormGroup.get('employee') as FormGroup;\n      this.changedUser['r_employee'] = this.uiMapperService.composeChangedRelation(\n        userBasicEmployeeFormGroup, {USER_ID: userID}, this.isNewMode);\n    }\n\n    const userEmailFormArray = this.userForm.get('emails') as FormArray;\n    this.changedUser['r_email'] = this.uiMapperService.composeChangedRelationArray(\n      userEmailFormArray, this.originalUserValue['emails'], {EMAIL: null});\n\n    const userAddressFormArray = this.userForm.get('addresses') as FormArray;\n    this.changedUser['r_address'] = this.uiMapperService.composeChangedRelationArray(\n      userAddressFormArray, this.originalUserValue['addresses'], {ADDRESS_ID: null});\n\n    const userPersonalizationFormGroup = this.userForm.get('userPersonalization') as FormGroup;\n    this.changedUser['r_personalization'] = this.uiMapperService.composeChangedRelation(\n      userPersonalizationFormGroup, {USER_ID: userID}, !userPersonalizationFormGroup.get('USER_ID').value);\n\n    const userRoleFormArray = this.userForm.get('userRole') as FormArray;\n    const relationship = this.uiMapperService.composeChangedRelationship(\n      'rs_user_role',\n      [{ENTITY_ID: 'permission', ROLE_ID: 'system_role'}],\n      userRoleFormArray, this.originalUserValue['userRole'], ['NAME', 'DESCRIPTION']);\n    if (relationship) {this.changedUser['relationships'] = [relationship]; }\n\n    return true;\n  }\n\n  canDeactivate(): Observable<boolean> | boolean {\n    if (this.isNewMode || (this.userForm && this.userForm.dirty)) {\n      return this.dialogService.confirm('Discard changes?');\n    } else {\n      return true;\n    }\n  }\n}\n\n","<div class=\"card mt-4\">\n  <div class=\"card-body\">\n    <div *ngFor=\"let userEmailForm of userEmailFormArray.controls; let i = index\" class=\"card mb-4\">\n      <button type=\"button\" id=\"remove\" class=\"dk-close-button close d-flex justify-content-end mr-2\" aria-label=\"Close\" (click)=\"deleteEmail(i)\">\n        <span aria-hidden=\"true\">&times;</span>\n      </button>\n      <div class=\"card-body row\" [formGroup]=\"userEmailForm\">\n        <dk-app-attribute-form2 class=\"col-md-6 col-lg-4 dk-form-label\"\n                                [attributeControl]=\"getAttrCtrlFromID('TYPE')\"\n                                [formGroup]=\"userEmailForm\"\n                                [readonly]=\"readonly\">\n        </dk-app-attribute-form2>\n        <dk-app-attribute-form2 class=\"col-md-6 col-lg-4 dk-form-label\"\n                                [attributeControl]=\"getAttrCtrlFromID('EMAIL')\"\n                                [formGroup]=\"userEmailForm\"\n                                [readonly]=\"readonly\">\n        </dk-app-attribute-form2>\n        <div class=\"col-1 row form-group mr-2\">\n          <label for=\"primaryEmail\" class=\"col-form-label dk-form-label\">Primary</label>\n          <input type=\"radio\" class=\"form-control\" id=\"primaryEmail\" [value]=\"1\" name=\"PRIMARY\" formControlName=\"PRIMARY\">\n        </div>\n      </div>\n    </div>\n    <button type=\"button\" id=\"add\" class=\"btn btn-primary float-right\" [disabled]=\"readonly\" (click)=\"addEmail()\">Add</button>\n  </div>\n</div>\n","import {Component, Input, OnInit} from '@angular/core';\nimport {FormArray, FormBuilder, FormGroup, Validators} from \"@angular/forms\";\nimport {MessageService} from \"ui-message-angular\";\nimport {AttributeBase, AttributeControlService, RelationMeta} from \"jor-angular\";\n\n@Component({\n  selector: 'app-user-email',\n  templateUrl: './user-email.component.html',\n  styleUrls: ['./user-email.component.css']\n})\nexport class UserEmailComponent implements OnInit {\n  @Input() readonly: boolean;\n  @Input() userForm: FormGroup;\n  @Input() relationMetas: RelationMeta[];\n  private attrCtrls: AttributeBase[];\n  userEmailFormArray: FormArray;\n\n  constructor(private fb: FormBuilder,\n              private messageService: MessageService,\n              private attributeControlService: AttributeControlService) { }\n\n  ngOnInit() {\n    this.userEmailFormArray = this.userForm.get('emails') as FormArray;\n    this.attrCtrls = this.attributeControlService.toAttributeControl(\n      this.relationMetas.find( relationMeta => relationMeta.RELATION_ID === 'r_email').ATTRIBUTES);\n    if (!this.readonly && this.userEmailFormArray.length === 0) {\n      this.addEmail();\n    }\n  }\n\n  getAttrCtrlFromID(fieldName: string): AttributeBase {\n    return this.attrCtrls.find( attrCtrl => attrCtrl.name === fieldName);\n  }\n\n  addEmail() {\n    const emailFormGroup = this.fb.group({\n      EMAIL: ['', [Validators.required]],\n      TYPE: ['', [Validators.required]],\n      PRIMARY: ['']\n    });\n    if (this.userEmailFormArray.length === 0) {\n      emailFormGroup.get('PRIMARY').setValue(1);\n      emailFormGroup.get('PRIMARY').markAsDirty();\n    }\n    this.userEmailFormArray.push(emailFormGroup);\n  }\n\n  deleteEmail(index: number) {\n    if (this.userEmailFormArray.length === 1) {\n      this.messageService.reportMessage('USER', 'AT_LEAST_ONE_EMAIL', 'E');\n    } else {\n      if (this.userEmailFormArray.at(index).value['PRIMARY']) {\n        const newPrimaryIndex = index === 0 ? 1 : 0;\n        this.userEmailFormArray.at(newPrimaryIndex).get('PRIMARY').setValue(1);\n        this.userEmailFormArray.at(newPrimaryIndex).get('PRIMARY').markAsDirty();\n      }\n      this.userEmailFormArray.removeAt(index);\n      this.userEmailFormArray.markAsDirty();\n    }\n  }\n}\n","import {Component, Input, OnInit} from '@angular/core';\nimport {FormGroup} from \"@angular/forms\";\nimport {AttributeBase, AttributeControlService, RelationMeta} from \"jor-angular\";\n\n@Component({\n  selector: 'app-user-personalization',\n  templateUrl: './user-personalization.component.html',\n  styleUrls: ['./user-personalization.component.css']\n})\nexport class UserPersonalizationComponent implements OnInit {\n  @Input() readonly: boolean;\n  @Input() userForm: FormGroup;\n  @Input() relationMetas: RelationMeta[];\n  private attrCtrls: AttributeBase[];\n  userPersonalizationForm: FormGroup;\n\n  constructor(private attributeControlService: AttributeControlService) { }\n\n  ngOnInit() {\n    this.userPersonalizationForm = this.userForm.get('userPersonalization') as FormGroup;\n    this.attrCtrls = this.attributeControlService.toAttributeControl(\n      this.relationMetas.find( relationMeta => relationMeta.RELATION_ID === 'r_personalization').ATTRIBUTES);\n  }\n\n  getAttrCtrlFromID(fieldName: string): AttributeBase {\n    return this.attrCtrls.find( attrCtrl => attrCtrl.name === fieldName);\n  }\n}\n","<form class=\"mt-4 ml-2 row\">\n  <dk-app-attribute-form2 class=\"col-md-6 col-lg-4 dk-form-label\"\n                          [attributeControl]=\"getAttrCtrlFromID('LANGUAGE')\"\n                          [formGroup]=\"userPersonalizationForm\"\n                          [readonly]=\"readonly\">\n  </dk-app-attribute-form2>\n  <dk-app-attribute-form2 class=\"col-md-6 col-lg-4 dk-form-label\"\n                          [attributeControl]=\"getAttrCtrlFromID('TIMEZONE')\"\n                          [formGroup]=\"userPersonalizationForm\"\n                          [readonly]=\"readonly\">\n  </dk-app-attribute-form2>\n  <dk-app-attribute-form2 class=\"col-md-6 col-lg-4 dk-form-label\"\n                          [attributeControl]=\"getAttrCtrlFromID('DECIMAL_FORMAT')\"\n                          [formGroup]=\"userPersonalizationForm\"\n                          [readonly]=\"readonly\">\n  </dk-app-attribute-form2>\n  <dk-app-attribute-form2 class=\"col-md-6 col-lg-4 dk-form-label\"\n                          [attributeControl]=\"getAttrCtrlFromID('DATE_FORMAT')\"\n                          [formGroup]=\"userPersonalizationForm\"\n                          [readonly]=\"readonly\">\n  </dk-app-attribute-form2>\n</form>\n","<table class=\"table table-bordered dk-table ml-3 mt-4\" [formGroup]=\"userForm\">\n  <thead class=\"thead-light dk-form-label\">\n    <tr>\n      <th scope=\"col\">Role</th>\n      <th scope=\"col\">Description</th>\n      <th scope=\"col\">Action</th>\n    </tr>\n  </thead>\n\n  <tbody formArrayName=\"userRole\" class=\"mb-4\">\n    <tr *ngFor=\"let userRoleForm of userRoleFormArray.controls; let i = index\">\n      <td [formGroup]=\"userRoleForm\">\n        <div class=\"input-group dk-name\">\n          <input class=\"form-control\" type=\"text\" formControlName=\"NAME\"\n               [readonly]=\"readonly || oldRole(userRoleForm) && userRoleForm.valid\" (change)=\"onChangeRoleID(i)\">\n          <div class=\"invalid-tooltip\">\n            {{userRoleForm.get('NAME').errors?.message}}\n          </div>\n          <div class=\"input-group-append\">\n            <button class=\"btn btn-outline-secondary btn-light\" type=\"button\" id=\"searchPermission\"\n            (click)=\"onSearchHelp(i, userRoleForm)\">\n              <span class=\"fas fa-search\"></span>\n            </button>\n          </div>\n        </div>\n      </td>\n      <td [formGroup]=\"userRoleForm\" class=\"dk-description\">\n        <input type=\"text\" formControlName=\"DESCRIPTION\" readonly class=\"form-control\">\n      </td>\n      <td class=\"dk-actions\">\n        <button class=\"btn\" type=\"button\" id=\"delete\" [disabled]=\"readonly\" (click)=\"deleteRole(i)\" title=\"Delete\">\n          <span class=\"far fa-trash-alt\"></span>\n        </button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<dk-app-search-help></dk-app-search-help>\n","import {Component, Input, OnInit, ViewChild} from '@angular/core';\nimport {AbstractControl, FormArray, FormBuilder, FormGroup} from \"@angular/forms\";\nimport {IdentityService} from \"../../../identity.service\";\nimport {SearchHelpComponent} from \"jor-angular\";\n\n@Component({\n  selector: 'app-user-role',\n  templateUrl: './user-role.component.html',\n  styleUrls: ['./user-role.component.css']\n})\nexport class UserRoleComponent implements OnInit {\n  @Input() readonly: boolean;\n  @Input() userForm: FormGroup;\n  userRoleFormArray: FormArray;\n\n  constructor(private fb: FormBuilder,\n              private identityService: IdentityService) { }\n\n  @ViewChild(SearchHelpComponent, { static: true })\n  private searchHelpComponent: SearchHelpComponent;\n\n  ngOnInit() {\n    this.userRoleFormArray = this.userForm.get('userRole') as FormArray;\n    // Recheck each role since every time the template is initialized, Angular clears the error status.\n    if (!this.readonly) {\n      this.userRoleFormArray.controls.forEach( (ctrl, index) => {\n        this.onChangeRoleID(index);\n      });\n    }\n  }\n\n  deleteRole(index: number): void {\n    if (index !== this.userRoleFormArray.length - 1) {\n      this.userRoleFormArray.removeAt(index);\n      this.userRoleFormArray.markAsDirty();\n    }\n  }\n\n  onChangeRoleID(index: number): void {\n    const currentRole = this.userRoleFormArray.at(index);\n    if (this.oldRole(currentRole)) {\n      currentRole.get('NAME').setErrors({message: 'Duplicate Role'});\n      return;\n    }\n\n    if (index === this.userRoleFormArray.length - 1 && currentRole.value.NAME.trim() !== '') {\n      // Only work if the last line is not new and empty\n      this.userRoleFormArray.push(\n        this.fb.group({\n          NAME: [''],\n          DESCRIPTION: [''],\n          system_role_INSTANCE_GUID: [''],\n          RELATIONSHIP_INSTANCE_GUID: ['']\n        })\n      );\n    }\n\n    if (currentRole.value.NAME) {\n      this.identityService.getRoleDesc(currentRole.value.NAME).subscribe(data => {\n        if (data['msgCat']) {\n          currentRole.get('NAME').setErrors({message: data['msgShortText']});\n        } else {\n          currentRole.get('DESCRIPTION').setValue(data['DESCRIPTION']);\n          currentRole.get('system_role_INSTANCE_GUID').setValue(data['INSTANCE_GUID']);\n        }\n      });\n    }\n  }\n\n  oldRole(userRoleForm: AbstractControl): boolean {\n    const existIndex = this.userRoleFormArray.controls.findIndex(\n      role => role.value.NAME === userRoleForm.value.NAME && role.pristine && role.value.NAME !== '');\n    return existIndex !== -1 ;\n  }\n\n  onSearchHelp(rowID: number, exportObject: AbstractControl): void {\n    const afterExportFn = function (context: any, ruleIdx: number) {\n      return () => context.onChangeRoleID(ruleIdx);\n    }(this, rowID).bind(this);\n\n    this.searchHelpComponent.openSearchHelpModalByEntity('permission', 'r_role',\n      exportObject, this.readonly, null, null, afterExportFn);\n  }\n\n}\n","<div class=\"card mb-3 pt-3\">\n  <div class=\"mt-2 pl-4 row\">\n    <div class=\"col-6 form-group row\">\n      <label for=\"user_id\" class=\"col-sm-3 col-form-label\">User ID:</label>\n      <input id=\"user_id\" name=\"user_id\" [(ngModel)]=\"userID\" type=\"text\" class=\"col-sm-6 form-control\" (keyup)=\"enterSearch($event)\" autofocus>\n    </div>\n    <div class=\"col-6 form-group row\">\n      <label for=\"user_name\" class=\"col-sm-3 col-form-label\">User Name:</label>\n      <input id=\"user_name\" name=\"user_name\" [(ngModel)]=\"userName\" type=\"text\" class=\"col-sm-6 form-control\" (keyup)=\"enterSearch($event)\">\n    </div>\n  </div>\n\n  <div class=\"mb-4\">\n    <button type=\"button\" id=\"search\" class=\"btn btn-primary float-right mr-4\" (click)=\"search()\">Search</button>\n  </div>\n</div>\n\n<div class=\"mt-2 mb-4 mx-4\">\n  <dk-message></dk-message>\n  <div class=\"btn-toolbar justify-content-end my-2\" role=\"toolbar\">\n    <button type=\"button\" id=\"new\" class=\"btn btn-light\" (click)=\"newUser()\"><span class=\"fas fa-plus\"></span> New</button>\n  </div>\n  <table class=\"table table-bordered table-sm\">\n    <thead class=\"thead-light\">\n    <tr>\n      <th scope=\"col\">User ID</th>\n      <th scope=\"col\">User Name</th>\n      <th scope=\"col\">Display Name</th>\n      <th scope=\"col\">Locked?</th>\n      <th scope=\"col\">Password State</th>\n      <th scope=\"col\">Action</th>\n    </tr>\n    </thead>\n\n    <tbody>\n    <tr *ngFor=\"let user of users\">\n      <td><a [routerLink]=\"['/users', user.USER_ID, {action: 'display'}]\">{{user.USER_ID}}</a></td>\n      <td>{{user.USER_NAME}}</td>\n      <td>{{user.DISPLAY_NAME}}</td>\n      <td class=\"dk-lock\">\n        <span *ngIf=\"user.LOCK\" class=\"fas fa-lock\" title=\"Locked\"></span>\n        <span *ngIf=\"!user.LOCK\" class=\"fas fa-lock-open\" title=\"Unlocked\"></span>\n      </td>\n      <td class=\"dk-password-state\" [ngSwitch]=\"user.PWD_STATE\">\n        <div *ngSwitchCase=\"\">\n          <span class=\"badge badge-primary\">Initial</span>\n        </div>\n        <div *ngSwitchCase=\"1\">\n          <span class=\"badge badge-success\">Active</span>\n        </div>\n        <div *ngSwitchCase=\"2\">\n          <span class=\"badge badge-warning\">Renew</span>\n        </div>\n      </td>\n      <td class=\"dk-actions\">\n        <button title=\"Display\" id=\"display\" class=\"btn\" type=\"button\" (click)=\"displayUser(user.USER_ID)\">\n          <span class=\"fas fa-search\"></span>\n        </button>\n        <button title=\"Change\" id=\"change\" class=\"btn\" type=\"button\" (click)=\"changeUser(user.USER_ID)\">\n          <span class=\"fas fa-pen\"></span>\n        </button>\n        <button title=\"Delete\" id=\"delete\" class=\"btn\" type=\"button\" (click)=\"deleteUser(user.USER_ID)\">\n          <span class=\"far fa-trash-alt\"></span>\n        </button>\n      </td>\n    </tr>\n    </tbody>\n  </table>\n\n  <div class=\"modal fade\" [class.show]=\"showDeletionConfirmation\"\n       [ngStyle]=\"{'display': displayDeletionConfirmation}\" id=\"deletionConfirmation\" tabindex=\"-1\" role=\"dialog\">\n    <div class=\"modal-dialog modal-sm modal-dialog-centered\" role=\"document\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title\" id=\"confirmDeletion\">Confirm Deletion</h5>\n          <button type=\"button\" class=\"close\" (click)=\"cancelDeletion()\">\n            <span aria-hidden=\"true\">&times;</span>\n          </button>\n        </div>\n        <div class=\"modal-body\">\n          <p>Are you sure to delete the user '{{toBeDeletedUser}}'?</p>\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" id=\"cancel\" class=\"btn btn-secondary\" (click)=\"cancelDeletion()\">Cancel</button>\n          <button type=\"button\" id=\"confirm\" class=\"btn btn-primary\" (click)=\"confirmDeletion()\">Confirm</button>\n        </div>\n      </div>\n    </div>\n  </div>\n\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport {UserList} from \"../../user\";\nimport {Message, MessageService, messageType} from \"ui-message-angular\";\nimport {Router} from \"@angular/router\";\nimport {IdentityService} from \"../../identity.service\";\n\n@Component({\n  selector: 'app-user-list',\n  templateUrl: './user-list.component.html',\n  styleUrls: ['./user-list.component.css']\n})\nexport class UserListComponent implements OnInit {\n  userID: string;\n  userName: string;\n  users: UserList[];\n  showDeletionConfirmation = false;\n  toBeDeletedUser: string;\n\n  get displayDeletionConfirmation() {return this.showDeletionConfirmation ? 'block' : 'none'; }\n\n  constructor(private identityService: IdentityService,\n              private messageService: MessageService,\n              private router: Router) { }\n\n  ngOnInit() {\n  }\n\n  search() {\n    this.messageService.clearMessages();\n    this.users = [];\n    this.userID = this.userID ? this.userID.trim() : '';\n    this.userName = this.userName ? this.userName.trim() : '';\n    this.identityService.searchUsers(this.userID, this.userName).subscribe(\n      data => {\n        if (!data[0]) {\n          this.messageService.reportMessage('GENERAL', 'EMPTY_LIST', messageType.Warning);\n        } else if (data[0]['msgCat']) {\n          const messages = <Message[]>data;\n          messages.forEach( msg => this.messageService.add(msg));\n        } else {\n          this.users = <UserList[]>data;\n        }\n      }\n    );\n  }\n\n  enterSearch($event): void {\n    if ($event.keyCode === 13 ) {\n       this.search();\n    }\n  }\n\n  newUser(): void {\n    this.router.navigate(['users', '/', {action: 'new'}]);\n  }\n\n  displayUser(userID: string): void {\n    this.router.navigate(['users', userID, {action: 'display'}]);\n  }\n\n  changeUser(userID: string): void {\n    this.router.navigate(['users', userID, {action: 'change'}]);\n  }\n\n  deleteUser(userID: string): void {\n    this.toBeDeletedUser = userID;\n    this.showDeletionConfirmation = true;\n  }\n\n  cancelDeletion(): void {\n    this.showDeletionConfirmation = false;\n  }\n\n  confirmDeletion(): void {\n    const toBeDeletedUserGUID = this.users.find( ele => ele.USER_ID === this.toBeDeletedUser).INSTANCE_GUID;\n    this.identityService.deleteUser(toBeDeletedUserGUID).subscribe( errorMsg => {\n      this.showDeletionConfirmation = false;\n      if (errorMsg) {\n        const messages = <Message[]>errorMsg;\n        messages.forEach( msg => this.messageService.add(msg));\n      } else {\n        this.search();\n      }\n    });\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport {ActivatedRouteSnapshot, CanDeactivate, RouterStateSnapshot} from '@angular/router';\nimport { Observable } from 'rxjs';\n\nexport interface CanComponentDeactivate {\n  canDeactivate: () => Observable<boolean> | Promise<boolean> | boolean;\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class WorkProtectionGuard implements CanDeactivate<CanComponentDeactivate>  {\n\n  canDeactivate(component: CanComponentDeactivate,\n                currentRoute: ActivatedRouteSnapshot,\n                currentState: RouterStateSnapshot,\n                nextState?: RouterStateSnapshot): Observable<boolean> | Promise<boolean> | boolean {\n    return component.canDeactivate ? component.canDeactivate() : true;\n  }\n}\n","// The file contents for the current environment will overwrite these during build.\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\n// The list of which env maps to which file can be found in `.angular-cli.json`.\n\nexport const environment = {\n  production: false,\n  originalHost: 'http://localhost:3000'\n};\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.log(err));\n"]}